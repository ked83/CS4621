/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function ba(){return function(){}}function ca(a){return function(b){this[a]=b}}function k(a){return function(){return this[a]}}function l(a){return function(){return a}}var n,p={};function da(a,b){this.Yd=this.Gi=this.Jg=null;a=document.getElementById(a);if(a==null)p.il=false;else{if(this.Jg=a.parentNode){this.Zg=document.createElement("div");this.Jg.appendChild(this.Zg);this.Wn=a=document.createTextNode("Loading...");this.Zg.appendChild(a)}b&&ea(this)}}function ea(a){if(a.Gi==null){a.Gi=document.createElement("div");a.Jg.appendChild(a.Gi);var b=document.createTextNode("FPS: 0");a.Ml=b;a.Gi.appendChild(b);a.frames=0;a.ol=(new Date).getTime()}}
da.prototype.print=function(a){p.il!=false&&fa(this,a,false)};function ga(a,b){if(a.Zg)if(b==null)a.Zg.style.display="none";else{a.Zg.style.display="block";a.Wn.nodeValue=b}}function ha(a,b,c){fa(a,b,true,c)}function ia(a,b){setTimeout(function(){throw new Error(b);},0)}
function fa(a,b,c,d){if(!(p.il==false&&c!=true)){if(a.Yd==null){a.Yd=document.createElement("div");a.Yd.className="cldebug";a.Jg.appendChild(a.Yd)}if(d){a.Yd.appendChild(document.createElement("br"));c=document.createElement("div");a.Yd.appendChild(c);c.innerHTML=b}else{a.Yd.appendChild(document.createElement("br"));b=document.createTextNode(b);a.Yd.appendChild(b)}}}p.il=true;p.ma=null;function ja(a){this.Hi=a;this.ob=false;if(!this.ob&&typeof XMLHttpRequest!="undefined")try{this.ob=new XMLHttpRequest}catch(b){this.ob=false}if(!this.ob&&window.Do)try{this.ob=window.Do()}catch(c){this.ob=false}this.load=function(d){if(this.ob==false)ha(p.ma,"Your browser doesn't support AJAX");else{var e=this;try{this.ob.open("GET",this.Hi,true)}catch(f){ha(p.ma,"Could not open file "+this.Hi+": "+f.message);var g=navigator.appVersion;g!=null&&g.indexOf("Trident")!=-1&&ha(p.ma,"<i>Use a web server to run files in IE. Or start them from CopperCube.</i>",
true);return}this.ob.onreadystatechange=function(){if(e.ob.readyState==4){e.ob.status!=200&&e.ob.status!=0&&e.ob.status!=null&&ha(p.ma,"Could not open file "+e.Hi+" (status:"+e.ob.status+")");d&&d(e.ob.responseText)}};try{this.ob.send(null)}catch(i){ha(p.ma,"Could not open file "+e.Hi)}}};this.abort=function(){try{this.ob.abort()}catch(d){}}};p.PI=3.14159265359;p.Ap=1/3.14159265359;p.wp=1.570796326795;p.zp=3.141592653589793;p.hd=3.14159265359/180;p.Vd=57.29577951307855;p.so=1.0E-8;p.$h=function(a){return a*p.Vd};p.Rm=function(a){return a*p.hd};p.na=function(a){return a<1.0E-8&&a>-1.0E-8};p.ee=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};p.M=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};p.ac=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};p.Go=function(a){return a-Math.floor(a)};
p.Ro=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};p.Lp=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};p.kf=function(a){return(a&4278190080)>>>24};p.nf=function(a){return(a&16711680)>>16};p.mf=function(a){return(a&65280)>>8};p.lf=function(a){return a&255};p.Qm=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};
p.Wm=function(a,b,c){var d=1-c;return p.Qm(p.kf(a)*c+p.kf(b)*d,p.nf(a)*c+p.nf(b)*d,p.mf(a)*c+p.mf(b)*d,p.lf(a)*c+p.lf(b)*d)};function ka(){this.cd=this.jd=this.rd=this.ki=1}n=ka.prototype;n.e=function(){var a=new la;a.ki=this.ki;a.rd=this.rd;a.jd=this.jd;a.cd=this.cd;return a};n.ki=1;n.rd=1;n.jd=1;n.cd=1;function r(){return(new Date).getTime()};function s(a,b,c){if(a!=null){this.c=a;this.b=b;this.d=c}}n=s.prototype;n.c=0;n.b=0;n.d=0;n.set=function(a,b,c){this.c=a;this.b=b;this.d=c};n.e=function(){return new s(this.c,this.b,this.d)};n.Ca=function(a){a.c=this.c;a.b=this.b;a.d=this.d};n.substract=function(a){return new s(this.c-a.c,this.b-a.b,this.d-a.d)};function ma(a,b){a.c-=b.c;a.b-=b.b;a.d-=b.d}s.prototype.add=function(a){return new s(this.c+a.c,this.b+a.b,this.d+a.d)};s.prototype.va=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d};
function na(a,b){a.c+=b.c;a.b+=b.b;a.d+=b.d;return a}s.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a}};function v(a,b){var c=a.c*a.c+a.b*a.b+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.c*=c;a.b*=c;a.d*=c}}function oa(a,b){a.c=b.c;a.b=b.b;a.d=b.d}s.prototype.M=function(a){return p.M(this.c,a.c)&&p.M(this.b,a.b)&&p.M(this.d,a.d)};
function pa(a){return p.na(a.c)&&p.na(a.b)&&p.na(a.d)}s.prototype.getLength=function(){return Math.sqrt(this.c*this.c+this.b*this.b+this.d*this.d)};s.prototype.wb=function(a){var b=a.c-this.c,c=a.b-this.b;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function qa(a,b){var c=b.c-a.c,d=b.b-a.b;a=b.d-a.d;return c*c+d*d+a*a}function ra(a){return a.c*a.c+a.b*a.b+a.d*a.d}function w(a,b){return new s(a.c*b,a.b*b,a.d*b)}function y(a,b){a.c*=b;a.b*=b;a.d*=b}function sa(a,b){a.c*=b;a.b*=b;a.d*=b;return a}
function ta(a,b){a.c*=b.c;a.b*=b.b;a.d*=b.d}function ua(a,b){return new s(a.c*b.c,a.b*b.b,a.d*b.d)}function va(a,b){return new s(a.c/b.c,a.b/b.b,a.d/b.d)}function wa(a,b){return new s(a.b*b.d-a.d*b.b,a.d*b.c-a.c*b.d,a.c*b.b-a.b*b.c)}s.prototype.ea=function(a){return this.c*a.c+this.b*a.b+this.d*a.d};
function xa(a){var b=new s;b.b=p.$h(Math.atan2(a.c,a.d));if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;var c=Math.sqrt(a.c*a.c+a.d*a.d);b.c=p.$h(Math.atan2(c,a.b))-90;if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;return b}function ya(a,b){b*=p.hd;var c=Math.cos(b);b=Math.sin(b);a.c=a.c*c-a.d*b;a.d=a.c*b+a.d*c}function za(a,b,c){var d=1-c;return new s(b.c*d+a.c*c,b.b*d+a.b*c,b.d*d+a.d*c)}s.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+")"};function Aa(){this.V=new s;this.O=new s}
Aa.prototype.V=null;Aa.prototype.O=null;function Ba(a){return a.O.substract(a.V)}Aa.prototype.getLength=function(){return Ba(this).getLength()};function Ca(a,b){if(a==null)this.b=this.c=0;else{this.c=a;this.b=b}}Ca.prototype.c=0;Ca.prototype.b=0;Ca.prototype.set=function(a,b){this.c=a;this.b=b};function z(){this.J=new s;this.L=new s}z.prototype.J=null;z.prototype.L=null;z.prototype.e=function(){var a=new z;a.J=this.J.e();a.L=this.L.e();return a};function Da(a){a=a.J.add(a.L);y(a,0.5);return a}function Ea(a){return a.L.substract(a.J)}
function Fa(a){var b=Da(a);a=b.substract(a.L);var c=[];c.push(new s(b.c+a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c+a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c+a.c,b.b-a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d+a.d));c.push(new s(b.c-a.c,b.b+a.b,b.d-a.d));c.push(new s(b.c-a.c,b.b-a.b,b.d-a.d));return c}
function Ga(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=w(b.add(c),0.5);c=e*0.5;e=w(Ea(a),0.5);a=Da(a).substract(b);if(Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.b*d.d-a.d*d.b)>b)d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.d*d.c-a.c*d.d)>b)d=false;else{b=e.c*Math.abs(d.b)+e.b*Math.abs(d.c);d=Math.abs(a.c*d.b-a.b*d.c)>b?false:true}}}return d}
function A(a,b){var c=b.c,d=b.b;b=b.d;if(c>a.L.c)a.L.c=c;if(d>a.L.b)a.L.b=d;if(b>a.L.d)a.L.d=b;if(c<a.J.c)a.J.c=c;if(d<a.J.b)a.J.b=d;if(b<a.J.d)a.J.d=b}function Ha(a,b){return a.J.c<=b.L.c&&a.J.b<=b.L.b&&a.J.d<=b.L.d&&a.L.c>=b.J.c&&a.L.b>=b.J.b&&a.L.d>=b.J.d}z.prototype.Uh=function(a){return a.c>=this.J.c&&a.c<=this.L.c&&a.b>=this.J.b&&a.b<=this.L.b&&a.d>=this.J.d&&a.d<=this.L.d};z.prototype.reset=function(a,b,c){this.L.set(a,b,c);this.J.set(a,b,c)};function Ia(){this.m=new s(0,1,0);this.bb=-(new s(0,0,0)).ea(this.m)}Ia.prototype.bb=0;Ia.prototype.m=null;Ia.prototype.e=function(){var a=new Ia(false);a.m=this.m.e();a.bb=this.bb;return a};Ia.prototype.normalize=function(){var a=1/this.m.getLength();this.m=w(this.m,a);this.bb*=a};
function Ja(a,b,c,d){var e=new s,f=new s;var g=a.m.getLength(),i=a.m.ea(b.m),j=b.m.getLength(),m=g*j-i*i;if(Math.abs(m)<1.0E-8)b=false;else{m=1/m;j=(j*-a.bb+i*b.bb)*m;g=(g*-b.bb+i*a.bb)*m;wa(a.m,b.m).Ca(f);a=w(a.m,j);b=w(b.m,g);a.add(b).Ca(e);b=true}if(b)return c.kl(e,f,d);return false}Ia.prototype.kl=function(a,b,c){var d=this.m.ea(b);if(d==0)return false;d=-(this.m.ea(a)+this.bb)/d;a.add(w(b,d)).Ca(c);return true};Ia.prototype.wb=function(a){return a.ea(this.m)+this.bb};
function Ka(a,b){return a.m.ea(b)<=0};function D(a,b,c){this.R=a?a:new s;this.Z=b?b:new s;this.$=c?c:new s}D.prototype.R=null;D.prototype.Z=null;D.prototype.$=null;D.prototype.e=function(){return new D(this.R,this.Z,this.$)};function La(a){var b=new Ia(false),c=a.R,d=a.$;b.m=wa(a.Z.substract(c),d.substract(c));b.m.normalize();b.bb=-c.ea(b.m);return b}D.prototype.Uh=function(a){return Ma(this,a,this.R,this.Z,this.$)&&Ma(this,a,this.Z,this.R,this.$)&&Ma(this,a,this.$,this.R,this.Z)};
function Ma(a,b,c,d,e){a=e.substract(d);b=wa(a,b.substract(d));c=wa(a,c.substract(d));return b.ea(c)>=0}function Na(a){return wa(a.Z.substract(a.R),a.$.substract(a.R))}D.prototype.kl=function(a,b){var c=Na(this);c.normalize();var d=c.ea(b);if(p.na(d))a=null;else{var e=this.R.ea(c);c=-(c.ea(a)-e)/d;a=a.add(w(b,c))}if(a==null)return null;if(this.Uh(a))return a;return null};D.prototype.Ca=function(a){this.R.Ca(a.R);this.Z.Ca(a.Z);this.$.Ca(a.$)};function F(a){if(a==null)a=true;this.I=this.H=this.G=this.F=this.D=this.q=this.w=this.v=this.C=this.u=this.p=this.t=this.B=this.s=this.r=this.o=0;this.Ka=false;if(a){this.I=this.q=this.p=this.o=1;this.Ka=true}}function Oa(a){if(a.Ka)return true;a.Ka=p.ee(a.o)&&p.na(a.r)&&p.na(a.s)&&p.na(a.B)&&p.na(a.t)&&p.ee(a.p)&&p.na(a.u)&&p.na(a.C)&&p.na(a.v)&&p.na(a.w)&&p.ee(a.q)&&p.na(a.D)&&p.na(a.F)&&p.na(a.G)&&p.na(a.H)&&p.ee(a.I);return a.Ka}
function Pa(a){if(a.Ka)return true;return p.ee(a.o)&&p.na(a.r)&&p.na(a.s)&&p.na(a.B)&&p.na(a.t)&&p.ee(a.p)&&p.na(a.u)&&p.na(a.C)&&p.na(a.v)&&p.na(a.w)&&p.ee(a.q)&&p.na(a.D)&&p.ee(a.I)}F.prototype.M=function(a){return p.M(this.o,a.o)&&p.M(this.r,a.r)&&p.M(this.s,a.s)&&p.M(this.B,a.B)&&p.M(this.t,a.t)&&p.M(this.p,a.p)&&p.M(this.u,a.u)&&p.M(this.C,a.C)&&p.M(this.v,a.v)&&p.M(this.w,a.w)&&p.M(this.q,a.q)&&p.M(this.D,a.D)&&p.M(this.F,a.F)&&p.M(this.G,a.G)&&p.M(this.H,a.H)&&p.M(this.I,a.I)};
function Qa(a){return new s(a.o,a.p,a.q)}function Ra(a,b){var c=b.e();b.c=c.c*a.o+c.b*a.t+c.d*a.v;b.b=c.c*a.r+c.b*a.p+c.d*a.w;b.d=c.c*a.s+c.b*a.u+c.d*a.q}function Sa(a,b,c){b.c=c.c*a.o+c.b*a.t+c.d*a.v;b.b=c.c*a.r+c.b*a.p+c.d*a.w;b.d=c.c*a.s+c.b*a.u+c.d*a.q}function Ta(a,b){return new s(b.c*a.o+b.b*a.t+b.d*a.v+a.F,b.c*a.r+b.b*a.p+b.d*a.w+a.G,b.c*a.s+b.b*a.u+b.d*a.q+a.H)}function Ua(a,b){var c=b.c*a.r+b.b*a.p+b.d*a.w+a.G,d=b.c*a.s+b.b*a.u+b.d*a.q+a.H;b.c=b.c*a.o+b.b*a.t+b.d*a.v+a.F;b.b=c;b.d=d}
function Va(a,b){return new s(b.c+a.F,b.b+a.G,b.d+a.H)}
function I(a,b){var c=new F(false);if(a.Ka){b.Ca(c);return c}if(b.Ka){a.Ca(c);return c}c.o=a.o*b.o+a.t*b.r+a.v*b.s+a.F*b.B;c.r=a.r*b.o+a.p*b.r+a.w*b.s+a.G*b.B;c.s=a.s*b.o+a.u*b.r+a.q*b.s+a.H*b.B;c.B=a.B*b.o+a.C*b.r+a.D*b.s+a.I*b.B;c.t=a.o*b.t+a.t*b.p+a.v*b.u+a.F*b.C;c.p=a.r*b.t+a.p*b.p+a.w*b.u+a.G*b.C;c.u=a.s*b.t+a.u*b.p+a.q*b.u+a.H*b.C;c.C=a.B*b.t+a.C*b.p+a.D*b.u+a.I*b.C;c.v=a.o*b.v+a.t*b.w+a.v*b.q+a.F*b.D;c.w=a.r*b.v+a.p*b.w+a.w*b.q+a.G*b.D;c.q=a.s*b.v+a.u*b.w+a.q*b.q+a.H*b.D;c.D=a.B*b.v+a.C*b.w+
a.D*b.q+a.I*b.D;c.F=a.o*b.F+a.t*b.G+a.v*b.H+a.F*b.I;c.G=a.r*b.F+a.p*b.G+a.w*b.H+a.G*b.I;c.H=a.s*b.F+a.u*b.G+a.q*b.H+a.H*b.I;c.I=a.B*b.F+a.C*b.G+a.D*b.H+a.I*b.I;return c}
function Wa(a,b){if(a.Ka){a.Ca(b);return true}var c=(a.o*a.p-a.r*a.t)*(a.q*a.I-a.D*a.H)-(a.o*a.u-a.s*a.t)*(a.w*a.I-a.D*a.G)+(a.o*a.C-a.B*a.t)*(a.w*a.H-a.q*a.G)+(a.r*a.u-a.s*a.p)*(a.v*a.I-a.D*a.F)-(a.r*a.C-a.B*a.p)*(a.v*a.H-a.q*a.F)+(a.s*a.C-a.B*a.u)*(a.v*a.G-a.w*a.F);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.o=c*(a.p*(a.q*a.I-a.D*a.H)+a.u*(a.D*a.G-a.w*a.I)+a.C*(a.w*a.H-a.q*a.G));b.r=c*(a.w*(a.s*a.I-a.B*a.H)+a.q*(a.B*a.G-a.r*a.I)+a.D*(a.r*a.H-a.s*a.G));b.s=c*(a.G*(a.s*a.C-a.B*a.u)+a.H*(a.B*a.p-a.r*
a.C)+a.I*(a.r*a.u-a.s*a.p));b.B=c*(a.r*(a.C*a.q-a.u*a.D)+a.s*(a.p*a.D-a.C*a.w)+a.B*(a.u*a.w-a.p*a.q));b.t=c*(a.u*(a.v*a.I-a.D*a.F)+a.C*(a.q*a.F-a.v*a.H)+a.t*(a.D*a.H-a.q*a.I));b.p=c*(a.q*(a.o*a.I-a.B*a.F)+a.D*(a.s*a.F-a.o*a.H)+a.v*(a.B*a.H-a.s*a.I));b.u=c*(a.H*(a.o*a.C-a.B*a.t)+a.I*(a.s*a.t-a.o*a.u)+a.F*(a.B*a.u-a.s*a.C));b.C=c*(a.s*(a.C*a.v-a.t*a.D)+a.B*(a.t*a.q-a.u*a.v)+a.o*(a.u*a.D-a.C*a.q));b.v=c*(a.C*(a.v*a.G-a.w*a.F)+a.t*(a.w*a.I-a.D*a.G)+a.p*(a.D*a.F-a.v*a.I));b.w=c*(a.D*(a.o*a.G-a.r*a.F)+
a.v*(a.r*a.I-a.B*a.G)+a.w*(a.B*a.F-a.o*a.I));b.q=c*(a.I*(a.o*a.p-a.r*a.t)+a.F*(a.r*a.C-a.B*a.p)+a.G*(a.B*a.t-a.o*a.C));b.D=c*(a.B*(a.p*a.v-a.t*a.w)+a.o*(a.C*a.w-a.p*a.D)+a.r*(a.t*a.D-a.C*a.v));b.F=c*(a.t*(a.q*a.G-a.w*a.H)+a.p*(a.v*a.H-a.q*a.F)+a.u*(a.w*a.F-a.v*a.G));b.G=c*(a.v*(a.s*a.G-a.r*a.H)+a.w*(a.o*a.H-a.s*a.F)+a.q*(a.r*a.F-a.o*a.G));b.H=c*(a.F*(a.s*a.p-a.r*a.u)+a.G*(a.o*a.u-a.s*a.t)+a.H*(a.r*a.t-a.o*a.p));b.I=c*(a.o*(a.p*a.q-a.u*a.w)+a.r*(a.u*a.v-a.t*a.q)+a.s*(a.t*a.w-a.p*a.v));b.Ka=a.Ka;return true}
function Xa(a){var b=new F(false);if(Wa(a,b)){b.Ca(a);return true}return false}function Ya(a){var b=new F(false);b.o=a.o;b.r=a.t;b.s=a.v;b.B=a.F;b.t=a.r;b.p=a.p;b.u=a.w;b.C=a.G;b.v=a.s;b.w=a.u;b.q=a.q;b.D=a.H;b.F=a.B;b.G=a.C;b.H=a.D;b.I=a.I;b.Ka=a.Ka;return b}
function Za(a,b,c){a.Ka=false;switch(b){case 0:a.o=c;break;case 1:a.r=c;break;case 2:a.s=c;break;case 3:a.B=c;break;case 4:a.t=c;break;case 5:a.p=c;break;case 6:a.u=c;break;case 7:a.C=c;break;case 8:a.v=c;break;case 9:a.w=c;break;case 10:a.q=c;break;case 11:a.D=c;break;case 12:a.F=c;break;case 13:a.G=c;break;case 14:a.H=c;break;case 15:a.I=c;break}}F.prototype.e=function(){var a=new F(false);this.Ca(a);return a};
F.prototype.Ca=function(a){a.o=this.o;a.r=this.r;a.s=this.s;a.B=this.B;a.t=this.t;a.p=this.p;a.u=this.u;a.C=this.C;a.v=this.v;a.w=this.w;a.q=this.q;a.D=this.D;a.F=this.F;a.G=this.G;a.H=this.H;a.I=this.I;a.Ka=this.Ka};function $a(a,b,c,d,e){b=1/Math.tan(b/2);a.o=b/c;a.r=0;a.s=0;a.B=0;a.t=0;a.p=b;a.u=0;a.C=0;a.v=0;a.w=0;a.q=e/(e-d);a.D=1;a.F=0;a.G=0;a.H=-d*e/(e-d);a.I=0;a.Ka=false}
function ab(a,b){var c=w(b,p.hd);b=Math.cos(c.c);var d=Math.sin(c.c),e=Math.cos(c.b),f=Math.sin(c.b),g=Math.cos(c.d);c=Math.sin(c.d);a.o=e*g;a.r=e*c;a.s=-f;var i=d*f;f=b*f;a.t=i*g-b*c;a.p=i*c+b*g;a.u=d*e;a.v=f*g+d*c;a.w=f*c-d*g;a.q=b*e;a.Ka=false}
function bb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=p.Vd;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.q*f;e=a.u*f;c=Math.atan2(e,d)*p.Vd;d=a.o*f;e=a.r*f}else{c=0;d=a.p;e=-a.t}a=Math.atan2(e,d)*p.Vd;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new s(c,b,a)}function cb(a,b){a.F=b.c;a.G=b.b;a.H=b.d;a.Ka=false}function db(a,b){a.o=b.c;a.p=b.b;a.q=b.d;a.Ka=false}function eb(a,b){var c=Fa(b),d;for(d=0;d<8;++d)Ua(a,c[d]);a=c[0];b.J=a.e();b.L=a.e();for(d=1;d<8;++d)A(b,c[d])}
F.prototype.toString=function(){return this.o+" "+this.r+" "+this.s+" "+this.B+"\n"+this.t+" "+this.p+" "+this.u+" "+this.C+"\n"+this.v+" "+this.w+" "+this.q+" "+this.D+"\n"+this.F+" "+this.G+" "+this.H+" "+this.I};function J(a,b,c,d){this.d=this.b=this.c=0;this.ua=1;if(a!=null)this.c=a;if(b!=null)this.b=b;if(c!=null)this.d=c;if(d!=null)this.ua=d}n=J.prototype;n.c=0;n.b=0;n.d=0;n.ua=0;n.e=function(){var a=new J;this.Ca(a);return a};n.Ca=function(a){a.c=this.c;a.b=this.b;a.d=this.d;a.ua=this.ua};function fb(a,b){return new J(a.c*b,a.b*b,a.d*b,a.ua*b)}J.prototype.va=function(a){this.c+=a.c;this.b+=a.b;this.d+=a.d;this.ua+=a.ua;return this};
function gb(a,b,c,d){var e=b.ea(c);if(e<0){b=fb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new J(-b.b,b.c,-b.ua,b.d);e=Math.sin(p.PI*(0.5-d));d=Math.sin(p.PI*d)}b=fb(b,e).va(fb(c,d));a.c=b.c;a.b=b.b;a.d=b.d;a.ua=b.ua}J.prototype.ea=function(a){return this.c*a.c+this.b*a.b+this.d*a.d+this.ua*a.ua};
function hb(a){var b=new F(false),c=a.c,d=a.b,e=a.d;a=a.ua;b.o=1-2*d*d-2*e*e;b.t=2*c*d+2*e*a;b.v=2*c*e-2*d*a;b.F=0;b.r=2*c*d-2*e*a;b.p=1-2*c*c-2*e*e;b.w=2*e*d+2*c*a;b.G=0;b.s=2*c*e+2*d*a;b.u=2*e*d-2*c*a;b.q=1-2*c*c-2*d*d;b.H=0;b.B=0;b.C=0;b.D=0;b.I=1;b.Ka=false;return b}function ib(a,b){var c=a.ua*a.ua,d=a.c*a.c,e=a.b*a.b,f=a.d*a.d;b.d=Math.atan2(2*(a.c*a.b+a.d*a.ua),d-e-f+c);b.c=Math.atan2(2*(a.b*a.d+a.c*a.ua),-d-e+f+c);b.b=Math.asin(p.ac(-2*(a.c*a.d-a.b*a.ua),-1,1))}
function jb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var i=Math.cos(e);e=g*i;i=c*i;g=g*d;c=c*d;a.c=b*e-f*c;a.b=f*i+b*g;a.d=f*g-b*i;a.ua=f*e+b*c;a.normalize()}J.prototype.normalize=function(){var a=this.c*this.c+this.b*this.b+this.d*this.d+this.ua*this.ua;if(a!=1){a=a=1/Math.sqrt(a);this.c*=a;this.b*=a;this.d*=a;this.ua*=a}};J.prototype.toString=function(){return"(x: "+this.c+" y:"+this.b+" z:"+this.d+" w:"+this.ua+")"};function kb(){this.Wa=[];for(var a=0;a<lb;++a)this.Wa.push(new Ia)}kb.prototype.Wa=null;var lb=6;
kb.prototype.Lj=function(a){var b;b=this.Wa[2];b.m.c=a.B+a.o;b.m.b=a.C+a.t;b.m.d=a.D+a.v;b.bb=a.I+a.F;b=this.Wa[3];b.m.c=a.B-a.o;b.m.b=a.C-a.t;b.m.d=a.D-a.v;b.bb=a.I-a.F;b=this.Wa[5];b.m.c=a.B-a.r;b.m.b=a.C-a.p;b.m.d=a.D-a.w;b.bb=a.I-a.G;b=this.Wa[4];b.m.c=a.B+a.r;b.m.b=a.C+a.p;b.m.d=a.D+a.w;b.bb=a.I+a.G;b=this.Wa[0];b.m.c=a.B-a.s;b.m.b=a.C-a.u;b.m.d=a.D-a.q;b.bb=a.I-a.H;b=this.Wa[1];b.m.c=a.s;b.m.b=a.u;b.m.d=a.q;b.bb=a.H;for(a=a=0;a<lb;++a){b=this.Wa[a];var c=-(1/b.m.getLength());b.m=w(b.m,c);b.bb*=
c}};function mb(a){var b=new s;Ja(a.Wa[0],a.Wa[5],a.Wa[2],b);return b}function nb(a){var b=new s;Ja(a.Wa[0],a.Wa[5],a.Wa[3],b);return b}function ob(a){var b=new s;Ja(a.Wa[0],a.Wa[4],a.Wa[3],b);return b}function pb(a){var b=new s;Ja(a.Wa[0],a.Wa[4],a.Wa[2],b);return b}kb.prototype.nb=function(a){var b=new z;b.reset(a.c,a.b,a.d);A(b,mb(this));A(b,nb(this));A(b,pb(this));A(b,ob(this));return b};function K(a){if(a){this.f=new s;this.m=new s;this.Aa=4294967295;this.za=new Ca;this.eg=new Ca}}n=K.prototype;n.f=null;n.m=null;n.Aa=0;n.za=null;n.eg=null;function qb(){this.l="";this.nc=false;this.oh=this.ph=this.rf=this.sf=this.Ua=this.md=null}qb.prototype.ec=function(){if(this.md)return this.md.width;if(this.sf!=null)return this.sf;return 0};qb.prototype.cc=function(){if(this.md)return this.md.height;if(this.rf!=null)return this.rf;return 0};function rb(){this.Za="";this.Kb=null;this.Y=false;this.i="SetOverlayText"}rb.prototype.h=function(a,b){var c=new rb;c.Za=this.Za;c.Kb=this.Kb;c.Y=this.Y;if(c.Kb==a)c.Kb=b;return c};
rb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Kb!=-1)c=L(b,this.Kb);if(c&&c.wl){var d=this.Za.indexOf("$");if(d!=-1){a=this.Za;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var i=a.substr(d+1,g-(d+1));if(i=sb(i,false,b)){d=a.substr(0,d);d+=tb(i);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.wl(a)}else c.wl(this.Za)}}};
function ub(){this.Ni=0;this.Pe=null;this.Y=false;this.i="MakeSceneNodeInvisible"}ub.prototype.h=function(a,b){var c=new ub;c.Ni=this.Ni;c.Pe=this.Pe;c.Y=this.Y;if(c.Pe==a)c.Pe=b;return c};ub.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Pe!=-1)c=L(b,this.Pe);if(c)switch(this.Ni){case 0:c.X=false;break;case 1:c.X=true;break;case 2:c.X=!c.X;break}}};function vb(){this.Ec=this.yd=false;this.i="ChangeSceneNodePosition"}
vb.prototype.h=function(a,b){var c=new vb;c.Ud=this.Ud;c.Ac=this.Ac;c.zc=this.zc;c.Y=this.Y;c.Ke=this.Ke;c.da=this.da?this.da.e():null;c.pi=this.pi?this.pi.e():null;c.yd=this.yd;c.Ec=this.Ec;if(c.Ac==a)c.Ac=b;if(c.zc==a)c.zc=b;return c};
vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Ac!=-1)c=L(b,this.Ac);if(c){var d=null;switch(this.Ud){case 0:d=this.da.e();break;case 1:d=c.f.add(this.da);break;case 2:var e=null;if(this.Ke)e=a;else if(this.zc!=-1)e=L(b,this.zc);if(e)d=e.f.add(this.da);break;case 3:d=this.da.getLength();a=c.aa;b=new s(1,0,0);Ra(a,b);if(c.j()=="camera")b=c.ga.substract(c.f);v(b,d);d=c.f.add(b);break;case 4:a=new z;a.reset(this.da.c,this.da.b,this.da.d);A(a,this.pi);d=new s;d.c=a.J.c+
Math.random()*(a.L.c-a.J.c);d.b=a.J.b+Math.random()*(a.L.b-a.J.b);d.d=a.J.d+Math.random()*(a.L.d-a.J.d);break;case 5:d=b.hk.add(this.da);break}if(d!=null)if(this.yd&&this.Ec>0){a=new wb;a.V=c.f.e();a.O=d;a.Xc=this.Ec;a.Kg=true;xb(a);yb(c,a)}else c.f=d}}};function zb(){this.i="ChangeSceneNodeRotation"}zb.prototype.h=function(a,b){var c=new zb;c.Nk=this.Nk;c.Wf=this.Wf;c.Y=this.Y;c.da=this.da?this.da.e():null;c.ij=this.ij;c.Yk=this.Yk;if(c.Wf==a)c.Wf=b;return c};
zb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Wf!=-1)c=L(b,this.Wf);if(c){b=null;switch(this.Nk){case 0:b=this.da.e();break;case 1:b=c.T.add(this.da);break}if(b)if(this.ij){a=new Ab;b=b;var d=c.T,e=this.Yk;a.km=true;a.Me=b.e();a.Gl=d.e();a.Mk=a.Ia+e;yb(c,a)}else c.T=b}}};function Bb(){this.i="ChangeSceneNodeScale"}Bb.prototype.h=function(a,b){var c=new Bb;c.Pk=this.Pk;c.Xf=this.Xf;c.Y=this.Y;c.da=this.da?this.da.e():null;if(c.Xf==a)c.Xf=b;return c};
Bb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Xf!=-1)c=L(b,this.Xf);if(c)switch(this.Pk){case 0:c.la=this.da.e();break;case 1:c.la=ua(c.la,this.da);break}}};function Cb(){this.i="ChangeSceneNodeTexture"}Cb.prototype.h=function(a,b){var c=new Cb;c.Vc=this.Vc;c.Kb=this.Kb;c.Y=this.Y;c.hg=this.hg;c.bk=this.bk;if(c.Kb==a)c.Kb=b;return c};
Cb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Kb!=-1)c=L(b,this.Kb);if(c)if(c.j()=="2doverlay")c.Ua=this.hg;else{a=c.Ic();if(this.Vc==0)for(b=0;b<a;++b){var d=c.dc(b);d.gb=this.hg}else if(this.Vc==1){d=c.dc(this.bk);if(d!=null)d.gb=this.hg}}}};function Db(){this.i="ExecuteJavaScript"}Db.prototype.h=function(){var a=new Db;a.ek=this.ek;return a};Db.prototype.execute=function(){eval(this.ek)};function Eb(){this.i="OpenWebpage"}
Eb.prototype.h=function(){var a=new Eb;a.al=this.al;a.ga=this.ga;return a};Eb.prototype.execute=function(){window.open(this.al,this.ga)};function Fb(){this.i="SetSceneNodeAnimation"}Fb.prototype.h=function(a,b){var c=new Fb;c.Vf=this.Vf;c.Y=this.Y;c.Gb=this.Gb;c.Pj=this.Pj;if(c.Vf==a)c.Vf=b;return c};Fb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Vf!=-1)c=L(b,this.Vf);if(c){a=c;a.j()=="animatedmesh"&&Gb(a,this.Pj,this.Gb)}}};
function Hb(a){this.xa=a;this.i="SwitchToScene"}Hb.prototype.h=function(){var a=new Hb;a.Oe=this.Oe;return a};Hb.prototype.execute=function(){this.xa&&Ib(this.xa,this.Oe,true)};function Jb(a){this.xa=a;this.i="SetActiveCamera"}Jb.prototype.h=function(a,b){var c=new Jb;c.tf=this.tf;if(c.tf==a)c.tf=b;return c};Jb.prototype.execute=function(a,b){if(a&&b){a=null;if(this.tf!=-1)a=L(b,this.tf);a!=null&&a.j()=="camera"&&this.xa&&Kb(this.xa,a)}};
function Lb(){this.yd=false;this.Ec=0;this.i="SetCameraTarget"}Lb.prototype.h=function(){var a=new Lb;a.Ud=this.Ud;a.Ac=this.Ac;a.zc=this.zc;a.Y=this.Y;a.Ke=this.Ke;a.da=this.da?this.da.e():null;a.yd=this.yd;a.Ec=this.Ec;return a};
Lb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Ac!=-1)c=L(b,this.Ac);var d=c;if(d.j()=="camera"){var e=d.ga.e();switch(this.Ud){case 0:e=this.da.e();break;case 1:e=c.f.add(this.da);break;case 2:var f=null;if(this.Ke)f=a;else if(this.zc!=-1)f=L(b,this.zc);if(f)e=f.f.add(this.da);break}if(e!=null)if(this.yd&&this.Ec>0){a=new wb;a.V=d.ga.e();a.O=e;a.Xc=this.Ec;a.Kg=true;a.Ag=true;xb(a);yb(c,a)}else{Mb(d,e);c=M(d,"camerafps");c!=null&&Nb(c,e)}}}};
function Ob(){this.ui=this.Ld=this.Bh=0;this.Re=-1;this.Fc=100;this.i="Shoot";this.Qe=-1;this.pj=false;this.wg=this.zg=null;this.oj=new s}Ob.prototype.h=function(a,b){var c=new Ob;c.Bh=this.Bh;c.Ld=this.Ld;c.ui=this.ui;c.Re=this.Re;c.Fc=this.Fc;c.Qe=this.Qe;c.pj=this.pj;c.zg=this.zg;c.wg=this.wg?this.wg.h(a,b):null;c.oj=this.oj.e();if(c.Re==a)c.Re=b;if(c.Qe==a)c.Qe=b;return c};
Ob.prototype.execute=function(a,b){if(a&&b){var c=new Aa,d=false,e=null,f=null,g=Pb(b,"gameai");if(this.Qe!=-1){var i=L(b,this.Qe);if(i!=null){d=true;e=i;c.V=Da(i.nb());c.V.va(this.oj);Ua(i.aa,c.V);f=b.ha;if(this.pj&&f){i=new Aa;i.V=N(f);i.O=f.ga;f=Ba(i);v(f,this.Fc);i.O=i.V.add(f);Qb(this,i,g,this.Fc,b);Rb(this,i,g,this.Fc,e,b);c.O=i.O}else{f=i.aa;if(this.zg){i=new F;ab(i,this.zg);f=I(f,i)}c.O.set(1,0,0);Ra(f,c.O);c.O.va(c.V)}}}else if(a!=null){e=a;if((f=M(a,"gameai"))&&f.Tj){c=f.Uj;d=true}}if(!d)if(f=
b.ha){e=f;c.V=N(f);c.O=f.ga;d=true}if(d){d=Ba(c);v(d,this.Fc);c.O=c.V.add(d);Qb(this,c,g,this.Fc,b);if(this.Bh==1){e=null;if(this.Re!=-1)e=L(b,this.Re);if(e){e=e.h(b.Ha,-1,-1);O(b.Ha,e);if(e!=null){e.f=c.V;P(e);e.X=true;e.Ea=-1;e.l="";b=Ba(c);b=xa(b);e.T=b;b=this.ui;if(b==0)b=1;g=new wb;g.V=c.V;g.O=c.O;g.Xc=c.getLength()/b;g.Kg=true;xb(g);g.xm=true;g.qm=a;g.pm=this.Ld;g.Ci=true;g.qf=this.wg;g.Og=this.Fc/b;yb(e,g)}}}else if(this.Bh==0){a=Rb(this,c,g,this.Fc,e,b);if(a!=null){b.hk=c.O.e();(c=M(a,"gameai"))&&
Sb(c,this.Ld,a)}}}}};function Qb(a,b,c,d,e){if(c.length!=0)if(a=M(c[0],"gameai"))if(a=a.ka){e=Tb(Ub.prototype,e,b.V,b.O,a,true);if(e<d){d=Ba(b);v(d,e);b.O=b.V.add(d)}}}function Rb(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var i=M(c[g],"gameai");if(!(i&&!(i.Db>0))){i={};i.Ga=0;if(Vb(Ub.prototype,f,c[g],b,false,false,null,i))if(i.Ga<a){a=i.Ga;d=c[g]}}}if(d){c=Ba(b);v(c,a);b.O=b.V.add(c)}return d}function Wb(){this.i="SetOrChangeAVariable"}
Wb.prototype.h=function(){var a=new Wb;a.zb=this.zb;a.Ak=this.Ak;a.$e=this.$e;a.zd=this.zd;return a};
Wb.prototype.execute=function(a,b){if(a&&b)if(this.zb!=null){a=sb(this.zb,true,b);if(a!=null){var c=null;if(this.$e==1){c=sb(this.zd,false,b);if(c==null)return}if(c==null){c=new Xb;Yb(c,this.zd)}switch(this.Ak){case 0:c=c;if(c!=null){a.Mb=c.Mb;a.Dc=c.Dc;a.Rb=c.Rb;a.Qb=c.Qb}break;case 1:Zb(a,Q(a)+Q(c));break;case 2:Zb(a,Q(a)-Q(c));break;case 3:c=Q(c);Zb(a,c!=0?Q(a)/c:0);break;case 4:c=Q(c);$b(a,c!=0?Math.floor(Q(a)/c):0);break;case 5:Zb(a,Q(a)*Q(c));break;case 6:$b(a,Math.floor(Q(a)*Q(c)));break}ac(a,
b)}}};function bc(){this.i="IfVariable"}bc.prototype.h=function(a,b){var c=new bc;c.zb=this.zb;c.wi=this.wi;c.$e=this.$e;c.zd=this.zd;c.n=this.n?this.n.h(a,b):null;c.Ih=this.Ih?this.Ih.h(a,b):null;return c};
bc.prototype.execute=function(a,b){if(a&&b)if(this.zb!=null){var c=sb(this.zb,true,b);if(c!=null){var d=null;if(this.$e==1){d=sb(this.zd,false,b);if(d==null)return}if(d==null){d=new Xb;Yb(d,this.zd)}b=false;switch(this.wi){case 0:case 1:b=c.Mb==0&&d.Mb==0?tb(c)==tb(d):p.M(Q(c),Q(d));if(this.wi==1)b=!b;break;case 2:b=Q(c)>Q(d);break;case 3:b=Q(c)<Q(d);break}if(b)this.n&&this.n.execute(a);else this.Ih&&this.Ih.execute(a)}}};function cc(){this.Ah=null;this.Y=false;this.i="RestartBehaviors"}
cc.prototype.h=function(a,b){var c=new cc;c.Ah=this.Ah;c.Y=this.Y;if(c.Y==a)c.Y=b;return c};cc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Y)c=a;else if(this.Ah!=-1)c=L(b,this.Ah);if(c)for(a=0;a<c.ia.length;++a){b=c.ia[a];b!=null&&b.reset()}}};function dc(){this.i="PlaySound"}dc.prototype.h=function(a,b){var c=new dc;c.Bc=this.Bc;c.Qf=this.Qf;c.Dk=this.Dk?this.Dk.e():null;c.Rd=this.Rd;c.ah=this.ah;c.Ee=this.Ee;c.kg=this.kg;c.Pf=this.Pf;c.Wc=this.Wc;if(c.Bc==a)c.Bc=b;return c};
dc.prototype.execute=function(a,b){if(!(b==null||this.Wc==null))this.xc=ec(p.hf,this.Wc,this.Ee,this.kg)};function fc(){this.i="StopSound"}fc.prototype.h=function(){var a=new fc;a.tm=this.tm;a.qo=this.qo;return a};fc.prototype.execute=function(){for(var a=p.hf,b=0;b<a.Wb.length;++b){var c=a.Wb[b];c.Ej=true;c.src.$b.pause()}a.Wb=[]};function gc(){this.i="StoreLoadVariable"}gc.prototype.h=function(){var a=new gc;a.Si=this.Si;a.zb=this.zb;return a};
function hc(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}function ic(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}gc.prototype.execute=function(a,b){if(!(this.zb==null||this.zb=="")){a=sb(this.zb,this.Si,b);if(a!=null)try{this.Si?Yb(a,ic(this,a.getName())):hc(this,a.getName(),tb(a),99)}catch(c){}}};
function jc(a){this.me=[];this.qa=a}jc.prototype.execute=function(a){for(var b=0;b<this.me.length;++b)this.me[b].execute(a,this.qa)};function kc(a,b){b!=null&&a.me.push(b)}function lc(a,b){for(var c=0;c<a.me.length;++c){var d=a.me[c];if(d.i==b)return d}return null}jc.prototype.h=function(a,b){for(var c=new jc(this.qa),d=0;d<this.me.length;++d){var e=this.me[d];e.h!=null&&kc(c,e.h(a,b))}return c};function mc(a){this.xa=a;this.i="RestartScene"}mc.prototype.h=function(){var a=new mc;a.Oe=this.Oe;return a};
mc.prototype.execute=function(){this.xa&&this.xa.tl(this.Oe)};function nc(){this.i="ActionDeleteSceneNode"}nc.prototype.h=function(a,b){var c=new nc;c.Zf=this.Zf;c.Xj=this.Xj;c.Uk=this.Uk;if(c.Zf==a)c.Zf=b;return c};nc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Xj)c=a;else if(this.Zf!=-1)c=L(b,this.Zf);c!=null&&oc(b,c,this.Uk)}};function pc(){this.i="ActionCloneSceneNode"}
pc.prototype.h=function(a,b){var c=new pc;c.Yf=this.Yf;c.Rj=this.Rj;c.n=this.n?this.n.h(a,b):null;if(c.Yf==a)c.Yf=b;return c};pc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Rj)c=a;else if(this.Yf!=-1)c=L(b,this.Yf);if(c){a=c.Ea;var d=-1;d=qc(b);a=c.h(c.mb,a,d);if(a!=null){a.Ea=d;O(c.mb,a);b.ai(c,a);if(c=c.Ya)if(c=c.h(a)){a.Ya=c;b.fd&&rc(b.fd,c)}this.n&&this.n.execute(a)}}}};function sc(a){this.i="ActionPlayMovie";this.xa=a}
sc.prototype.h=function(a,b){var c=new sc;c.Ee=this.Ee;c.vi=this.vi;c.Zk=this.Zk;c.Bc=this.Bc;c.Qf=this.Qf;c.lk=this.lk;c.ni=this.ni?this.ni.h(a,b):null;c.mi=this.mi?this.mi.h(a,b):null;if(c.Bc==a)c.Bc=b;return c};
sc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.Qf)c=a;else if(this.Bc!=-1)c=L(b,this.Bc);a:{a=this.xa;var d=this.Zk;b=this.ni;for(var e=this.mi,f=0;f<a.rg.length;++f){var g=a.rg[f];if(g.filename==d){a=g;break a}}if(this.vi==0){d=new tc(d,a.Q);d.Cj=b;d.Dj=e;a.rg.push(d);a=d}else a=null}if(a!=null)switch(this.vi){case 0:a.play(this.Ee);if(c)if(c.j()=="2doverlay")c.Ua=a.gi;else{c=c.dc(this.lk);if(c!=null)c.gb=a.gi}break;case 1:a.pause();break;case 2:a.stop();break}}};
function tc(a,b){this.filename=a;this.$c=null;this.ul=b;this.Dj=this.Cj=this.gi=null;this.Pp=this.Xh=this.sn=false;this.state=0;this.ml=this.ln=false;this.np=function(){this.state=2;this.$c.play();this.sn=true;var c=this.gi,d=uc(this.ul,this.$c,true);c.Ua=d.Ua;c.sf=d.sf;c.rf=d.rf;c.ph=d.ph;c.oh=d.oh};this.op=function(){this.state=0;this.Xh=true};this.Eo=function(){this.state=0;this.ml=this.Xh=true};this.play=function(c){if(!(this.state==2||this.state==1)){if(this.$c)if(this.state==3){this.$c.play();
this.state=2;this.Xh=false;return}else if(this.state==0){this.$c.currentTime=0;this.$c.play();this.state=2;this.Xh=false;return}var d=document.createElement("video"),e=this;this.$c=d;this.ln=c;d.addEventListener("canplaythrough",function(){e.np()},true);d.addEventListener("ended",function(){e.op()},true);d.addEventListener("error",function(){e.Eo()},true);d.preload="auto";d.src=a;d.style.display="none";if(this.ln)d.loop=true;this.state=1;c=document.createElement("canvas");if(c!=null){c.width=16;c.height=
16;this.gi=uc(this.ul,c,true)}}};this.pause=function(){if(this.state==2){this.$c.pause();this.state=3}};this.stop=function(){if(this.state==2){this.$c.pause();this.state=0}};this.mp=function(){this.sn&&this.state==2&&vc(this.ul,this.gi,this.$c)};this.No=function(){if(this.state==0)return true;return this.Xh}};function wc(){this.i=0;this.sc=this.gb=null;this.df=true;this.Sc=this.Bb=false;this.pe=true}wc.prototype.Lj=function(a){if(a){this.i=a.i;this.df=a.df;this.gb=a.gb;this.sc=a.sc;this.Bb=a.Bb;this.Sc=a.Sc;this.pe=a.pe}};wc.prototype.e=function(){var a=new wc;a.i=this.i;a.bl=this.bl;a.df=this.df;a.gb=this.gb;a.sc=this.sc;a.Bb=this.Bb;a.Sc=this.Sc;a.pe=this.pe;return a};function xc(a){return a.i==yc||a.i==zc||a.i==Ac||a.i==Bc}n=wc.prototype;n.i=0;n.gb=null;n.sc=null;n.df=true;n.bl=true;n.Bb=false;
n.pe=true;n.Sc=false;var yc=12,zc=13,Bc=16,Ac=14;function Cc(){this.g=new z;this.ja=new wc;this.ba=[];this.k=[];this.Ta=null;this.dj=this.cj=false;this.ed=this.xd=null}n=Cc.prototype;n.g=null;n.ja=null;n.ba=null;n.k=null;n.Ta=null;n.xd=null;n.ed=null;n.update=function(a,b){if(a)this.cj=true;else if(b)this.dj=true;else this.Ta=null};function Dc(a){if(!a.k||a.k.length==0)a.g.reset(0,0,0);else{var b=a.k[0];a.g.J=b.f.e();a.g.L=b.f.e();for(var c=1;c<a.k.length;++c){b=a.k[c];A(a.g,b.f)}}}
Cc.prototype.h=function(){var a=new Cc;a.g=this.g.e();a.ja=this.ja.e();if(this.k)for(var b=0;b<this.k.length;++b)a.k.push(this.k[b]);if(this.ba)for(b=0;b<this.ba.length;++b)a.ba.push(this.ba[b]);if(this.xd)for(b=0;b<this.xd.length;++b)a.xd.push(this.xd[b].e());if(this.ed)for(b=0;b<this.ed.length;++b)a.ed.push(this.ed[b].e());return a};function Ec(){this.g=new z;this.Fa=[]}Ec.prototype.ad=function(a){this.Fa.push(a)};function Fc(a){var b=0;if(a.Fa)for(var c=0;c<a.Fa.length;++c)if(a.Fa[c].ba)b+=a.Fa[c].ba.length;return b/3}Ec.prototype.h=function(){var a=new Ec;a.g=this.g.e();if(this.Fa)for(var b=0;b<this.Fa.length;++b)this.Fa[b]&&a.Fa.push(this.Fa[b].h());return a};p.Xn=function(){this.mk=[]};function Gc(a,b){for(var c=0;c<a.mk.length;++c){var d=a.mk[c];if(d.l==b)return d}return null}p.ko=function(){this.l="";this.$g=new F;this.U=[];this.Cg=[];this.Je=[];this.Xd=[];this.Ne=[];this.cf=[];this.Eh=new z;this.Ji=new F;this.ue=new F;this.Gf=new F;this.hc=new s(0,0,0);this.Ab=new s(1,1,1);this.ic=new J;this.Rg=new F;this.Ol=false;this.un=this.vn=this.mn=-1};p.oo=function(){this.fi=this.ii=this.Qh=0;this.vm=new s;this.um=new s};
p.no=function(){this.frame=0;this.scale=new s};p.lo=function(){this.frame=0;this.position=new s};p.mo=function(){this.frame=0;this.rotation=new J};p.kh=function(){this.l="";this.mc=this.O=this.dd=0};p.kh.prototype.l="";p.kh.prototype.dd=0;p.kh.prototype.O=0;p.kh.prototype.mc=0;p.Rk=function(){this.l="";this.bd=[];this.Mc=0;this.cb=[];this.ra=[];this.Le=[];this.Wj=0;this.$l=this.ld=false;this.tp=this.Vn=this.gk=0;this.ib=new z;this.Cf=1;this.wj=[];this.zl=true;this.qk=[]};p.Rk.prototype.ad=function(a){this.cb.push(a)};
p.Rk.prototype.nb=k("ib");function Hc(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.Le.length;++b)Hc(a,a.Le[b],null);else{b.Ji=c==null?b.$g.e():I(c.Ji,b.$g);b.Gf=b.$g.e();b.ue=b.Ji.e();if(Oa(b.Rg)){b.Rg=b.Ji.e();Xa(b.Rg)}for(c=0;c<b.U.length;++c)Hc(a,b.U[c],b)}}
function Ic(a,b,c,d,e,f,g,i){var j=-1;e=j=-1;var m=c.Je;e=c.Xd;c=c.Ne;var o;if(m.length){j=-1;if(j==-1)for(g=0;g<m.length;++g){o=m[g];if(o.frame>=b){j=g;break}}if(j!=-1)if(a.Cf==0||j==0){o=m[j];o.position.e()}else if(a.Cf==1){o=m[j];m=m[j-1];g=b-o.frame;j=m.frame-b;oa(d,na(sa(sa(m.position.substract(o.position),1/(g+j)),g),o.position))}}if(e.length){j=-1;if(j==-1)for(g=0;g<e.length;++g){d=e[g];if(d.frame>=b){j=g;break}}if(j!=-1)if(a.Cf==0||j==0){d=e[j];d.scale.e()}else if(a.Cf==1){d=e[j];e=e[j-1];
g=b-d.frame;j=e.frame-b;oa(f,na(sa(sa(e.scale.substract(d.scale),1/(g+j)),g),d.scale))}}if(c.length){e=-1;if(e==-1)for(g=0;g<c.length;++g){f=c[g];if(f.frame>=b){e=g;break}}if(e!=-1)if(a.Cf==0||e==0){f=c[e];f.rotation.e()}else if(a.Cf==1){f=c[e];a=c[e-1];g=b-f.frame;j=a.frame-b;gb(i,f.rotation,a.rotation,g/(g+j))}}}function Jc(a,b,c){if(b==null)for(b=0;b<a.Le.length;++b)Jc(a,a.Le[b],null);else{b.ue=c==null||b.Ol?b.Gf.e():I(c.ue,b.Gf);for(c=0;c<b.U.length;++c)Jc(a,b.U[c],b)}}
function Kc(a,b,c,d){if(b.cf.length){c=I(b.ue,b.Rg);for(var e=new s,f=new s,g=a.cb,i,j=0;j<b.cf.length;++j){var m=b.cf[j];i=m.vm;e.c=i.c*c.o+i.b*c.t+i.d*c.v+c.F;e.b=i.c*c.r+i.b*c.p+i.d*c.w+c.G;e.d=i.c*c.s+i.b*c.u+i.d*c.q+c.H;d&&Sa(c,f,m.um);i=g[m.Qh];i=i.k[m.ii];if(a.wj[m.Qh][m.ii]){i.f.va(w(e,m.fi));d&&i.m.va(w(f,m.fi))}else{a.wj[m.Qh][m.ii]=true;i.f=w(e,m.fi);if(d)i.m=w(f,m.fi)}}}for(c=0;c<b.U.length;++c)Kc(a,b.U[c],b,d)}
function Lc(a,b){if(!b)return null;var c=a.qk.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.qk[d];if(e.l&&e.l.toLowerCase()==b)return e}return null};function Mc(){this.Va=[];this.Q=null;this.ej=""}
function Nc(a,b,c){if(b==null||b=="")return null;var d=Oc(a,b);if(d!=null)return d;if(c){d=new qb;d.l=b;Pc(a,d);d.md=new Image;d.md.onload=function(){var e=d,f=a.Q;if(f!=null){var g=f.fa,i=g.createTexture(),j=e.md;if((j.width&j.width-1)!=0||(j.height&j.height-1)!=0){var m=document.createElement("canvas");if(m!=null){m.width=Qc(f,j.width);m.height=Qc(f,j.height);m.getContext("2d").drawImage(j,0,0,j.width,j.height,0,0,m.width,m.height);j=m}}g.bindTexture(g.TEXTURE_2D,i);Rc(f,i,j);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.Bl=true;e.Ua=i;e.nc=true}};d.md.src=d.l;return d}return null}function Oc(a,b){for(var c=0;c<a.Va.length;++c){var d=a.Va[c];if(d.l==b)return d}return null}function Pc(a,b){if(b!=null){Oc(a,b.l)!=null&&p.ma.print("ERROR! Cannot add the texture multiple times: "+b.l);a.Va.push(b)}};function Sc(a){this.Fm=a;this.zo=a.length;this.Ja=0;this.Dp=null;this.Ep=8;this.Km=false}function R(a){return a.zo-a.Ja}function Tc(a,b){return a.Fm.charCodeAt(b)&255}function S(a){return Uc(a,1)!=0}function Vc(a,b){for(var c=0,d=a.Ja,e=d+b;e>d;)c=c*256+Tc(a,--e);a.Ja+=b;return c}function Uc(a,b){a=Vc(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function T(a){return Uc(a,4)}
function V(a){var b;var c=a.Fm,d=a.Ja;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.Ja+=4;return b}Sc.prototype.sa=function(a,b){this.Km=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.Km&&d.reverse()}};Sc.prototype.reset=function(){this.Ja=0;return this};function Wc(){this.fa=this.canvas=null;this.height=this.width=0;this.Bl=false;this.yb=new F;this.Ad=new F;this.ka=new F;this.Nb=new ka;this.Nb.rd=0;this.Nb.jd=0;this.Nb.cd=0;this.Np=this.Op=null;this.db=[];this.lb=[];this.fh=30;this.qj=this.lh=this.Ek=this.bm=this.am=null;this.Be=[];this.Hc=this.Ei=null;this.Sm=false;this.Zh=true}Wc.prototype.lh=null;Wc.prototype.ec=k("width");function Xc(a){var b=a.Bl;a.Bl=false;return b}Wc.prototype.cc=k("height");
function Yc(a,b){if(b!=null){var c=a.fa;if(c!=null){var d=null;try{d=b.Sc?a.lb[b.i]:a.db[b.i]}catch(e){}if(d!=null){a.Hc=d;c.useProgram(d);if(a.lh!=null)try{a.lh(b.i)}catch(f){}if(d.Mm){c.enable(c.BLEND);c.blendFunc(d.Nm,d.Lm)}else c.disable(c.BLEND);!b.df||b.i==yc||b.i==zc||b.i==Bc?c.depthMask(false):c.depthMask(true);b.bl?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);b.pe?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);if(b.gb&&b.gb.nc){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.gb.Ua);
c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,b.Bb?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.Bb?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.sc&&b.sc.nc){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.sc.Ua)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture2"),1)}}}}
function Zc(a,b,c){if(b!=null)if(a.fa!=null){if(b.Ta==null)$c(a,b);else if(b.dj){if(!(b.k.length==0||b.ba.length==0))if(b.Ta.En<b.k.length||b.Ta.Gj<b.ba.length){b.Ta=null;$c(a,b)}else if(b.Ta!=null){for(var d=a.fa,e=b.k.length,f=b.Ta.nn,g=b.Ta.Co,i=0;i<e;++i){var j=b.k[i];f[i*3+0]=j.f.c;f[i*3+1]=j.f.b;f[i*3+2]=j.f.d;g[i*4+0]=p.nf(j.Aa)/255;g[i*4+1]=p.mf(j.Aa)/255;g[i*4+2]=p.lf(j.Aa)/255;g[i*4+3]=p.kf(j.Aa)/255}d.bindBuffer(d.ARRAY_BUFFER,b.Ta.Jj);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.Ta.fl);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.Ta.Gj<b.ba.length){e=b.ba.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.ba[g+0];f[g+1]=b.ba[g+2];f[g+2]=b.ba[g+1]}b.Ta.Fj=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Ta.Fj);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.Ta.Gj=b.ba.length;b.Ta.En=b.k.length}}else b.cj&&ad(a,b);b.cj=false;b.dj=false;b=b.Ta;c=c;d=a.fa;e=b.Al&&b.el;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.Jj);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Cn);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Dn);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.gn);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.fl);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.Al);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.el);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Fj);g=new F(false);a.yb.Ca(g);g=I(g,a.Ad);g=I(g,a.ka);f=a.Hc;f.cn!=null&&d.uniformMatrix4fv(f.cn,false,bd(a,g));if(f.bn!=null){g=new F(true);g=I(g,a.Ad);g=I(g,a.ka);Xa(g);g=Ya(g);d.uniformMatrix4fv(f.bn,false,bd(a,g))}if(f.$m!=null){g=new F(true);g=I(g,a.Ad);g=I(g,a.ka);d.uniformMatrix4fv(f.$m,
false,bd(a,g))}f.an!=null&&d.uniformMatrix4fv(f.an,false,bd(a,Ya(a.ka)));f.Zm!=null&&cd(a,f,e,e);if(c==null)c=b.Gj;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}function ad(a,b){if(b.Ta!=null){a=a.fa;for(var c=b.k.length,d=b.Ta.nn,e=0;e<c;++e){var f=b.k[e];d[e*3+0]=f.f.c;d[e*3+1]=f.f.b;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.Ta.Jj);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function $c(a,b){if(b.Ta==null){a=a.fa;var c={},d=b.k.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),i=new WebGLFloatArray(d*2),j=new WebGLFloatArray(d*4),m=null,o=null;if(b.xd)m=new WebGLFloatArray(d*3);if(b.ed)o=new WebGLFloatArray(d*3);for(var q=0;q<d;++q){var h=b.k[q];e[q*3+0]=h.f.c;e[q*3+1]=h.f.b;e[q*3+2]=h.f.d;f[q*3+0]=h.m.c;f[q*3+1]=h.m.b;f[q*3+2]=h.m.d;g[q*2+0]=h.za.c;g[q*2+1]=h.za.b;i[q*2+0]=h.eg.c;i[q*2+1]=h.eg.b;j[q*4+0]=p.nf(h.Aa)/255;j[q*4+1]=
p.mf(h.Aa)/255;j[q*4+2]=p.lf(h.Aa)/255;j[q*4+3]=p.kf(h.Aa)/255}if(m&&o)for(q=0;q<d;++q){h=b.xd[q];m[q*3+0]=h.c;m[q*3+1]=h.b;m[q*3+2]=h.d;h=b.ed[q];o[q*3+0]=h.c;o[q*3+1]=h.b;o[q*3+2]=h.d}q=b.ba.length;h=new WebGLUnsignedShortArray(q);for(var x=0;x<q;x+=3){h[x+0]=b.ba[x+0];h[x+1]=b.ba[x+2];h[x+2]=b.ba[x+1]}c.Jj=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Jj);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.nn=e;c.Cn=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Cn);a.bufferData(a.ARRAY_BUFFER,g,
a.STATIC_DRAW);c.Dn=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Dn);a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW);c.gn=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.gn);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(m&&o){c.Al=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Al);a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW);c.el=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.el);a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.fl=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,
c.fl);a.bufferData(a.ARRAY_BUFFER,j,a.STATIC_DRAW);c.Co=j;a.bindBuffer(a.ARRAY_BUFFER,null);c.Fj=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.Fj);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.fa=a;c.Gj=q;c.En=d;b.Ta=c;b.cj=false;b.dj=false}}
function cd(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT),f=new WebGLFloatArray(e);e=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);var g=new WebGLFloatArray(e);e=new F(true);if(!c&&(a.Be!=null&&a.Be.length>0||a.Ei!=null))Wa(a.ka,e);for(c=0;c<4;++c){var i=c*4;if(a.Be!=null&&c<a.Be.length){var j=a.Be[c],m=Ta(e,j.uh);f[i]=m.c;f[i+1]=m.b;f[i+2]=m.d;m=1;m=d?1/(j.Ba*j.Ba):j.Eg;f[i+3]=m;g[i]=j.Aa.rd;g[i+1]=j.Aa.jd;g[i+2]=j.Aa.cd}else{f[i]=1;f[i+1]=0;f[i+2]=0;f[i+3]=1;g[i]=0;g[i+
1]=0;g[i+2]=0}g[i+3]=1}g[16]=a.Nb.rd;g[17]=a.Nb.jd;g[18]=a.Nb.cd;g[19]=1;a.fa.uniform4fv(b.Zm,f);a.fa.uniform4fv(b.Qo,g);if(b.Xm!=null){d=a.Ei;f=null;f=d&&d.Ra?d.Ra.e():new s(1,0,0);y(f,-1);Ra(e,f);f.normalize();a.fa.uniform3f(b.Xm,f.c,f.b,f.d,1);d?a.fa.uniform4f(b.Ym,d.Aa.rd,d.Aa.jd,d.Aa.cd,1):a.fa.uniform4f(b.Ym,0,0,0,1)}}
function dd(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var i=true;if(g==null||g==false)i=false;g=a.fa;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var j=2/a.width,m=2/a.height;b=b*j-1;c=c*m-1;d*=j;e*=m;j=new WebGLFloatArray(12);j[0]=b;j[1]=c;j[2]=0;j[3]=b+d;j[4]=c;j[5]=0;j[6]=b+d;j[7]=c-e;j[8]=0;j[9]=b;j[10]=c-e;j[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;
b[2]=1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,j,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.Hc=a.am;g.useProgram(a.Hc);g.uniform4f(g.getUniformLocation(a.Hc,"vColor"),p.nf(f)/255,p.mf(f)/255,p.lf(f)/255,i?p.kf(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(i){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function ed(a,b,c,d,e,f,g,i,j,m){if(!(f==null||f.nc==false||d<=0||e<=0||a.width==0||a.height==0)){if(j==null)j=1;if(m==null)m=1;var o=true;if(g==null||g==false)o=false;g=a.fa;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var q=2/a.width,h=2/a.height;b=b*q-1;c=c*h-1;d*=q;e*=h;q=new WebGLFloatArray(12);q[0]=b;q[1]=c;q[2]=0;q[3]=b+d;q[4]=c;q[5]=0;q[6]=b+d;q[7]=c-e;q[8]=0;q[9]=b;q[10]=c-
e;q[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=j;b[3]=0;b[4]=j;b[5]=m;b[6]=0;b[7]=m;j=new WebGLUnsignedShortArray(6);j[0]=0;j[1]=2;j[2]=1;j[3]=0;j[4]=3;j[5]=2;m=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bufferData(g.ARRAY_BUFFER,q,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,j,g.STATIC_DRAW);a.Hc=i==null?a.bm:i;g.useProgram(a.Hc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(o){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.Ua);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,
6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(m);g.deleteBuffer(b)}}function fd(a,b,c,d,e,f,g){if(!(f==null||f.nc==false||d<=0||e<=0||a.width==0||a.height==0)){var i=a.fa;a.Hc=a.Ek;i.useProgram(a.Hc);i.uniform4f(i.getUniformLocation(a.Hc,"vColor"),p.nf(g)/255,p.mf(g)/255,p.lf(g)/255,p.kf(g)/255);ed(a,b,c,d,e,f,true,a.Ek,f.ph/f.sf,f.oh/f.rf)}}function gd(a){a.Be=[];a.Ei=null}function hd(a,b){a.Be.push(b)}function id(a,b){a.Ei=b}
function jd(a){if(!(a.canvas==null||a.fa==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.fa;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Wc.prototype.ab=function(a){this.canvas=a;this.fa=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.fa=this.canvas.getContext(a[b],{alpha:false});if(this.fa!=null)break}catch(c){}}catch(d){}if(this.fa==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){ha(p.ma,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){ha(p.ma,"Error: canvas array types for webgl not found.")}a=this.fa;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.fa;this.Zh=false;var g=b=W(this,this.pf,this.gf),i=W(this,this.pf,this.hl),j=W(this,this.pf,this.Io),m=W(this,this.pf,this.gf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),
o=W(this,this.pf,this.Um,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),q=W(this,this.pf,this.gf,true,a.ONE,a.ONE_MINUS_SRC_COLOR),h=W(this,this.Gn,this.hl),x=W(this,this.Gn,this.hl,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),t=W(this,this.rp,this.gf),G=W(this,this.qp,this.Jo),B=W(this,this.pf,this.Vm);this.am=W(this,this.pp,this.Lo);this.bm=W(this,this.Fn,this.Ko);this.Ek=W(this,this.Fn,this.Ho);this.db[0]=g;this.db[1]=g;this.db[2]=i;this.db[3]=i;this.db[4]=i;this.db[5]=j;this.db[yc]=q;this.db[zc]=m;this.db[Ac]=
o;this.db[11]=h;this.db[Bc]=x;this.db[17]=G;this.db[25]=B;this.db[23]=t;g=W(this,this.ji,this.gf);m=W(this,this.ji,this.gf,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);o=W(this,this.ji,this.Um,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);q=W(this,this.ji,this.gf,true,a.ONE,a.ONE_MINUS_SRC_COLOR);h=W(this,this.Hn,this.Tm);x=W(this,this.Hn,this.Tm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);B=W(this,this.ji,this.Vm);this.lb[0]=g;this.lb[1]=g;this.lb[2]=i;this.lb[3]=i;this.lb[4]=i;this.lb[5]=j;this.lb[yc]=q;this.lb[zc]=
m;this.lb[Ac]=o;this.lb[11]=h;this.lb[Bc]=x;this.lb[17]=G;this.lb[25]=B;this.Zh=true;for(i=0;i<this.fh;++i){if(this.db[i]==null)this.db[i]=b;if(this.lb[i]==null)this.lb[i]=b}a.useProgram(g);this.Hc=g;a.clearColor(0,0,1,1);a.clearDepth(1E4);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);jd(this)}return true};
function kd(a,b,c){var d=a.fa,e=d.createShader(b);if(e==null)return null;d.shaderSource(e,c);d.compileShader(e);if(!d.getShaderParameter(e,d.COMPILE_STATUS)){if(a.Zh)ha(p.ma,"Error loading "+(b==d.VERTEX_SHADER?"vertex":"fragment")+" shader: "+d.getShaderInfoLog(e));return null}return e}function ld(a,b,c,d,e,f){b=W(a,b,c,d,e,f);if(!b)return-1;a.fh+=1;a.db[a.fh]=b;a.lb[a.fh]=b;return a.fh}
function W(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var i=a.fa,j=b,m=c;if(j.indexOf("precision ")==-1)j="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(m.indexOf("precision ")==-1)m="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=kd(a,i.VERTEX_SHADER,j);c=kd(a,i.FRAGMENT_SHADER,m);if(!b||!c){a.Zh&&p.ma.print("Could not create shader program");
g=null}else{m=i.createProgram();i.attachShader(m,b);i.attachShader(m,c);i.bindAttribLocation(m,0,"vPosition");i.bindAttribLocation(m,1,"vTexCoord1");i.bindAttribLocation(m,2,"vTexCoord2");i.bindAttribLocation(m,3,"vNormal");i.bindAttribLocation(m,4,"vColor");if(g){i.bindAttribLocation(m,5,"vBinormal");i.bindAttribLocation(m,6,"vTangent")}i.linkProgram(m);if(i.getProgramParameter(m,i.LINK_STATUS)){i.useProgram(m);i.uniform1i(i.getUniformLocation(m,"texture1"),0);i.uniform1i(i.getUniformLocation(m,
"texture2"),1)}else a.Zh&&p.ma.print("Could not link program:"+i.getProgramInfoLog(m));g=m}if(g){g.Mm=d?d:false;g.Nm=e;g.Lm=f;a=a.fa;g.cn=a.getUniformLocation(g,"worldviewproj");g.bn=a.getUniformLocation(g,"normaltransform");g.$m=a.getUniformLocation(g,"modelviewtransform");g.an=a.getUniformLocation(g,"worldtransform");g.Zm=a.getUniformLocation(g,"arrLightPositions");g.Qo=a.getUniformLocation(g,"arrLightColors");g.Xm=a.getUniformLocation(g,"vecDirLight");g.Ym=a.getUniformLocation(g,"colorDirLight")}return g}
Wc.prototype.Zc=function(a){a&&a.Ca(this.ka)};function bd(a,b){return new WebGLFloatArray([b.o,b.r,b.s,b.B,b.t,b.p,b.u,b.C,b.v,b.w,b.q,b.D,b.F,b.G,b.H,b.I])}Wc.prototype.deleteTexture=function(a){if(a!=null){this.fa.deleteTexture(a.Ua);a.Ua=null;a.nc=false}};
function vc(a,b,c,d){var e=a.fa;b=b.Ua;e.bindTexture(e.TEXTURE_2D,b);var f=c.width,g=c.height;if(c.videoWidth)f=c.videoWidth;if(c.videoHeight)g=c.videoHeight;if((f&f-1)!=0||(g&g-1)!=0){var i=document.createElement("canvas");i.width=Qc(a,f);i.height=Qc(a,g);var j=i.getContext("2d");j.fillStyle="rgba(0, 255, 255, 1)";j.fillRect(0,0,i.width,i.height);d?j.drawImage(c,0,0,f,g,0,0,f,g):j.drawImage(c,0,0,f,g,0,0,i.width,i.height);c=i}Rc(a,b,c);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)}
function uc(a,b,c){var d=a.fa,e=d.createTexture();d.bindTexture(d.TEXTURE_2D,e);var f=b.width,g=b.height;if(b.videoWidth)f=b.videoWidth;if(b.videoHeight)g=b.videoHeight;var i=f,j=g;if((f&f-1)!=0||(g&g-1)!=0){j=document.createElement("canvas");j.width=Qc(a,f);j.height=Qc(a,g);i=j.getContext("2d");c?i.drawImage(b,0,0,f,g,0,0,f,g):i.drawImage(b,0,0,f,g,0,0,j.width,j.height);b=j;i=j.width;j=j.height}Rc(a,e,b);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,
d.NEAREST);d.generateMipmap(d.TEXTURE_2D);d.bindTexture(d.TEXTURE_2D,null);a=new qb;a.l="";a.Ua=e;a.md=null;a.nc=true;a.sf=i;a.rf=j;a.ph=f;a.oh=g;return a}function Qc(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function Rc(a,b,c){b=a.fa;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){if(d.code!=null&&DOMException!=null&&DOMException.SECURITY_ERR!=null&&d.code==DOMException.SECURITY_ERR){a.Sm==false&&ha(p.ma,"<i>A security setting in the browser prevented loading a texture.<br/>Workaround: run this from a webserver, change security settings, or allow the specific domain.</i>",true);a.Sm=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(e){}}}
function md(a){if(a.qj==null){var b=null;b=new Cc;var c=new K(true),d=new K(true),e=new K(true),f=new K(true),g=b.ba;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.k;g.push(c);g.push(d);g.push(e);g.push(f);c.za.c=1;c.za.b=1;c.f.set(1,-1,0);d.za.c=1;d.za.b=0;d.f.set(1,1,0);e.za.c=0;e.za.b=0;e.f.set(-1,1,0);f.za.c=0;f.za.b=1;f.f.set(-1,-1,0);a.qj=b}}n=Wc.prototype;n.pp="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Fn="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";n.Lo="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Ho="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.pf="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.ji="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\tv_color.a = vColor.a;\t// preserve vertex alpha \n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.rp="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Gn="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.Hn="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\tuniform vec3 vecDirLight; \t\t\t\t\t\t\t\t\t\n\tuniform vec4 colorDirLight; \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0.0, 0.0, 0.0, 1.0);\t \t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// directional light\t\t\t\t\t\t\t\t\t\n\t\tfloat dirlight = max(0.0, dot(n, vecDirLight));\t\t\tcurrentLight = currentLight + vec4(colorDirLight.x*dirlight, colorDirLight.y*dirlight, colorDirLight.z*dirlight, 1.0);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// ambient light\t\t\t\t\t\t\t\t\t\t\n\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\t//v_color = currentLight;\t\t\t\t\t\t\t\t\n\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.qp="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.Ko="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.gf="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Um="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.hl="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Io="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Tm="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Jo="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.Vm="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\t\tvec4 color1 = texture2D(texture1, texCoord);\t\t\t\t\tvec4 color2 = texture2D(texture2, texCoord);\t\t\t\t\tcolor1 = ((1.0 - v_color.w) * color1) + (v_color.w * color2);\t// interpolate texture colors based on vertex alpha\t \n\t\tgl_FragColor = color1 * v_color;\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";function nd(){this.Sk=[];this.Wb=[];this.Od=1}function od(a,b){for(var c=0;c<a.Sk.length;++c){var d=a.Sk[c];if(d.l==b)return d}return null}function pd(a,b,c){if(b==null||b=="")return null;var d=od(a,b);if(d!=null)return d;if(c){b=d=new qd(b);if(b!=null){od(a,b.l)!=null&&p.ma&&p.ma.print("ERROR! Cannot add the sound multiple times: "+b.l);a.Sk.push(b)}return d}return null}
function ec(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?pd(a,b,true):b;if(e==null||e.$b==null)return null;rd(a);for(b=0;b<a.Wb.length;)if(a.Wb[b].src===e){a.Wb[b].src.$b.pause();a.Wb.splice(b,1)}else++b;try{e.$b.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.$b.volume=d*a.Od;e.$b.play();var g=new sd(e);g.kn=d;a.Wb.push(g);e.nl&&e.$b.removeEventListener("ended",e.nl,false);e.$b.nl=null;if(c){g.dn=true;a=function(){if(!g.Ej){try{this.currentTime=0}catch(i){}this.play()}};
e.$b.addEventListener("ended",a,false);e.$b.nl=a}return g}nd.prototype.stop=function(a){if(a){a.src.$b.pause();a.Ej=true;rd(this)}};function td(a,b){a.Od=b;if(a.Od<0)a.Od=0;if(a.Od>1)a.Od=1;try{for(b=0;b<a.Wb.length;++b){var c=a.Wb[b];c.src.$b.volume=c.kn*a.Od}}catch(d){}}function rd(a){for(var b=0;b<a.Wb.length;)if(ud(a.Wb[b]))a.Wb.splice(b,1);else++b}p.hf=new nd;function qd(a){this.l=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.$b=b}
function sd(a){this.src=a;this.dn=this.Ej=false;this.kn=1;this.startTime=(new Date).getTime()}function ud(a){if(a.Ej)return true;if(a.dn)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function vd(a,b,c,d,e,f){if((b==null||b==true)&&p.ma==null)p.ma=new da(a,d);this.Pn=a;this.oc=document.getElementById(this.Pn);this.wa=new wd;this.Q=null;this.Sn=false;this.Nf=null;this.$a=new Mc;this.$d=new p.Xn;this.Oh=this.Yg=false;this.Vl=0;this.mc=60;this.zk=this.wk=this.xk=this.Vb=null;this.Yh=this.tn=false;this.rg=[];this.Yn=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':f;this.Rf=
[];this.hj=[];this.ih=false;this.hh=this.gh=this.Tb=this.Sb=0;this.jh=true;this.ik=0;this.Ti=null;e!=null&&xd(this,true,e);yd(this);if(c)this.mc=c;var g=this;setInterval(function(){g.Ti!=null&&zd(g);if(p.ma){++g.Vl;var i=0,j=0;if(g.$a){i=g.$a;for(var m=j=0;m<i.Va.length;++m)i.Va[m].nc==false&&++j;i=j;j=g.$a.Va.length}if(g.Oh&&i==0){g.Oh=false;Ad(g)}if(g.Yg||i){m="Loading";if(i>0)m="Textures loaded: "+(j-i)+"/"+j;switch(g.Vl%4){case 0:m+="   ";break;case 1:m+=".  ";break;case 2:m+=".. ";break;case 3:m+=
"...";break}ga(p.ma,m)}else ga(p.ma,null)}},500);Bd(X(),this)}function Cd(a){if(a.wa==null)return null;return a.wa.og()}
function Dd(a){document.onkeydown=function(f){Ed(a,f)};document.onkeyup=function(f){Fd(a,f)};var b=a.oc;if(b!=null){b.onmousemove=function(f){Gd(a,f)};b.onmousedown=function(f){Hd(a,f)};b.onmouseup=function(f){Id(a,f)};b.onmouseover=function(){a.jh=true};b.onmouseout=function(){a.jh=false};Jd(a);try{var c=function(f){(f=f)||(f=event);if(f){f=f.detail<0||f.wheelDelta>0?1:-1;var g=Cd(a);if(g!=null){var i=g.ha;i!=null&&i.of(f);for(i=0;i<g.yc.length;++i)g.yc[i].of(f)}}};b.addEventListener("mousewheel",
c,false);b.addEventListener("DOMMouseScroll",c,false)}catch(d){}try{c=function(f){Id(a,f.changedTouches[0])&&Kd(a,f,true)};b.addEventListener("touchstart",function(f){Hd(a,f.changedTouches[0])&&Kd(a,f,true)},false);b.addEventListener("touchend",c,false);b.addEventListener("touchcancel",c,false);b.addEventListener("touchleave",c,false);b.addEventListener("touchmove",function(f){Gd(a,f.changedTouches[0])&&Kd(a,f,true)},false)}catch(e){}}}
vd.prototype.load=function(a){if(!Ld(this)){xd(this,false,this.Yn);return false}var b=this;this.Yg=true;(new ja(a)).load(function(c){b.rl(c,a)});return true};
function Ld(a){if(a.Q!=null)return true;var b=a.oc;if(b==null)return false;var c=p.Lk!=null&&p.Lk.Jp;a.Q=new Wc;if(c||a.Q.ab(b)==false)if(p.Lk!=null){a.Q=new p.Lk;if(a.Q.ab(b)==false)return false}else return false;if(a.$a)a.$a.Q=a.Q;Dd(a);setInterval(function(){Md(a);if(p.ma!=null){a.wa.og();var d=p.ma;if(d.Ml!=null){d.frames+=1;var e=(new Date).getTime();if(e-d.ol>1E3){var f="FPS: "+(d.frames/(e-d.ol)*1E3).toFixed(2);d.Ml.nodeValue=f;d.ol=e;d.frames=0}}}},1E3/a.mc);return true}
vd.prototype.rl=function(a,b){this.Yg=false;var c=new Nd;a=c.Oo(a,b,this.$a,this.$d,this);if(a!=null){this.wa=a;if(c.Ul){this.Rl=c.wm;this.Un=b}if(a.Bm)this.Oh=true;else Ad(this)}};function Ad(a){a.Bj(a.wa.og());Md(a);a.zk!=null&&a.zk()}
function Md(a){if(!(a.wa==null||a.Q==null))if(!(a.Yg||a.Oh)){yd(a);Od(a);var b=a.wa.og();if(!a.Sn&&b){for(var c=false,d=0;d<a.rg.length;++d){var e=a.rg[d];e.mp();if(e.No()){if(e.Cj!=null&&!e.ml){var f=Cd(a);e.Cj.execute(f.Ha,f);e.Cj=null}if(e.Dj!=null&&e.ml){f=Cd(a);e.Dj.execute(f.Ha,f);e.Dj=null}a.rg.splice(d,1);--d}else c=true}c&&Pd(b);a.Vb&&a.Vb();d=a.Q;b.Xg=d;if(b.Ia==0)b.Ia=r();b.uo=null;c=false;if(b.Lg.length==0)e=false;else{e=r();f=false;for(var g=0;g<b.Lg.length;){var i=b.Lg[g];if(i.kp<e){i.ge.mb&&
i.ge.mb.removeChild(i.ge);b.Lg.splice(g,1);f=true;b.fd&&i.ge.Ya&&Qd(b.fd,i.ge.Ya)}else++g}e=f}if(e)c=true;if(b.Ha.Vb(b,r()))c=true;if(b.ha){e=new F(false);b.ha.yb.Ca(e);e=I(e,b.ha.bf);e=!e.M(b.Ri)}else e=true;d=d?Xc(d):false;if(b.$j||b.gj==0&&(e||d)||b.gj==1&&(e||c||d)||b.gj==2||Rd(X())){b.$j=false;c=true}else c=false;if(c){d=a.Q;c=b.Fl;if(d.fa!=null){jd(d);d=d.fa;d.depthMask(true);d.clearColor(p.nf(c)/255,p.mf(c)/255,p.lf(c)/255,1);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}a.xk&&a.xk();Sd(b,
a.Q);a.wk&&a.wk();b=p.Pa;b!=null&&Td(b,a.Q);b=a.Q;b.fa!=null&&b.fa.flush()}}Od(a)}}vd.prototype.Gm=function(a){if(this.wa){this.wa.qc.push(a);this.wa.qc.length==1&&this.wa.wn(a)}};function Ib(a,b,c){if(!a.wa)return false;var d=a.wa.qc;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].l;if(c)f=f.toLowerCase();if(b==f){a.Bj(d[e]);return true}}return false}
vd.prototype.Bj=function(a){if(!a)return false;var b=a.Aj()=="panorama",c=a.Aj()=="free",d=null;this.wa.wn(a);if(!a.Cm){a.Cm=true;var e=false,f=Ud(a,"camera");if(f)for(var g=0;g<f.length;++g){var i=f[g];if(i&&i.Dl){d=i;e=true;Vd(d,this.Q.width,this.Q.height);break}}if(!e){e=4/3;if(this.Q.width&&this.Q.height)e=this.Q.width/this.Q.height;d=new Wd;Xd(d,e);O(a.Ha,d);e=null;if(!b){e=new Yd(d,this);yb(d,e)}if(c){if(a.Vj!=null)d.f=a.Vj.e();if(a.Bi!=null)e!=null?Nb(e,a.Bi):Mb(d,a.Bi)}e&&Zd(e,!b)}a.ha=d;
a.fd=$d(a,true);ae(this,a.Ha,a.fd)}X().lc=a;a.gj=this.wa.wo;Pd(a);return true};function Od(a){if(a.Nf!=null){var b=a.wa.og();if(b!=null)if(a.Nf.K===b){a.Q&&Vd(a.Nf,a.Q.ec(),a.Q.cc());b.ha=a.Nf;a.Nf=null}}}function Ed(a,b){var c=Cd(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ha;if(c!=null)d=c.he(b);for(c=0;c<a.Rf.length;++c)if(a.hj[c].he(b))d=true;return Kd(a,b,d)}
function Fd(a,b){var c=Cd(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.ha;if(c!=null)d=c.ie(b);for(c=0;c<a.Rf.length;++c)if(a.Rf[c].ie(b))d=true;return Kd(a,b,d)}function Kd(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function yd(a){for(var b=0,c=0,d=a.oc;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.Hl=b;a.Il=c}function be(a,b){return b.pageX?b.pageX-a.Hl:b.clientX-a.oc.offsetLeft+document.body.scrollLeft}
function ce(a,b){return b.pageY?b.pageY-a.Il:b.clientY-a.oc.offsetTop+document.body.scrollTop}function Hd(a,b){if(b==null)b=window.event;a.ih=true;a.jh=true;if(b){a.gh=be(a,b);a.hh=ce(a,b)}var c=Cd(a);if(c==null)return false;var d=c.ha;d!=null&&d.Cd(b);d=b;for(var e=0;e<c.yc.length;++e)c.yc[e].Cd(d);return Kd(a,b,true)}function de(a){if(a.Yh){a.Sb=0;a.Tb=0;a.gh=0;a.hh=0}else{a.gh=a.Sb;a.hh=a.Tb}}
function Id(a,b){if(b==null)b=window.event;a.ih=false;var c=Cd(a);if(c==null)return false;var d=c.ha;d!=null&&d.Yc(b);d=b;for(var e=0;e<c.yc.length;++e)c.yc[e].Yc(d);return Kd(a,b,true)}
function Gd(a,b){if(b==null)b=window.event;if(b){a.Sb=be(a,b);a.Tb=ce(a,b)}if(a.Yh){var c=b.movementY||b.mozMovementY||b.webkitMovementY||0;a.Sb=b.movementX||b.mozMovementX||b.webkitMovementX||0;a.Tb=c}c=Cd(a);if(c==null)return false;var d=c.ha;d!=null&&d.je(b);d=b;for(var e=0;e<c.yc.length;++e)c.yc[e].je(d);return Kd(a,b,true)}vd.prototype.Vb=null;vd.prototype.wk=null;vd.prototype.xk=null;vd.prototype.zk=null;
function ee(a,b,c){a=a.Q;if(a==null)return null;var d=a.yb,e=a.Ad;if(d==null||e==null)return null;d=I(d,e);var f=new kb;f.Lj(d);d=mb(f);e=nb(f).substract(d);f=pb(f).substract(d);var g=a.ec();a=a.cc();c=c/a;return d.add(w(e,b/g)).add(w(f,c))}
function fe(a,b){var c=new F(false),d=a.Q;if(!d.yb)return null;d.yb.Ca(c);c=I(c,d.Ad);a=d.ec()/2;d=d.cc()/2;if(d==0||a==0)return null;b=new s(b.c,b.b,b.d);b.W=1;c=c;var e=b.e();e.ua=b.W;b.c=e.c*c.o+e.b*c.t+e.d*c.v+e.ua*c.F;b.b=e.c*c.r+e.b*c.p+e.d*c.w+e.ua*c.G;b.d=e.c*c.s+e.b*c.u+e.d*c.q+e.ua*c.H;b.W=e.c*c.B+e.b*c.C+e.d*c.D+e.ua*c.I;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Ca;e.c=a*b.c*c+a;e.b=d-d*b.b*c;return e}function Kb(a,b){if(b!=null)a.Nf=b}
function ae(a,b,c){if(b){for(var d=0;d<b.ia.length;++d){var e=b.ia[d];if(e)if(e.j()=="collisionresponse")e.Zc(c);else if(e.j()=="onclick"||e.j()=="onmove")e.ka=c;else if(e.j()=="gameai")e.ka=c;else if(e.j()=="3rdpersoncamera")e.ka=c}for(d=0;d<b.U.length;++d)(e=b.U[d])&&ae(a,e,c)}}
vd.prototype.tl=function(a){if(!a||!this.wa)return false;if(this.Rl==null)return false;for(var b=null,c=-1,d=0;d<this.wa.qc.length;++d)if(a==this.wa.qc[d].l){c=d;b=this.wa.qc[d];break}if(c==-1)return false;a=(new Nd).tl(this.Rl,b,c,this.Un,this.$a,this.$d,this);if(a!=null){b=this.wa.og()==b;this.wa.qc[c]=a;b&&this.Bj(a)}return true};function zd(a){if(!a.Yg&&!a.Oh){a.Ti.style.display="none";a.Ti=null}}
function xd(a,b,c){if(a.oc!=null){var d=document.createElement("div");a.oc.parentNode.appendChild(d);var e=document.createElement("div");yd(a);var f=b?23:100,g=b?30:0,i=a.Hl+(a.oc.width-200)/2,j=a.Il+a.oc.height/2;b||(j+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+i+"px; top:"+j+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.Ti=d}}
function Jd(a){function b(){var d=a.oc;if(a.tn){d.hp=d.requestPointerLock||d.mozRequestPointerLock||d.webkitRequestPointerLock;d.hp()}}function c(){var d=a.oc;a.Yh=document.PointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d?true:false}document.addEventListener("fullscreenchange",b,false);document.addEventListener("mozfullscreenchange",b,false);document.addEventListener("webkitfullscreenchange",b,false);document.addEventListener("pointerlockchange",c,
false);document.addEventListener("mozpointerlockchange",c,false);document.addEventListener("webkitpointerlockchange",c,false)}function ge(a,b,c){if(c==null)c=a.oc;a.tn=b;c.requestFullscreen=c.requestFullscreen||c.Mp||c.mozRequestFullScreen||c.msRequestFullscreen||c.webkitRequestFullscreen;c.requestFullscreen()};function Y(){this.i=-1;this.f=new s;this.T=new s;this.la=new s(1,1,1);this.X=true;this.l="";this.jb=0;this.Ea=-1;this.mb=null;this.U=[];this.ia=[];this.aa=new F;this.Ya=this.K=null}n=Y.prototype;n.ab=function(){this.f=new s;this.T=new s;this.la=new s(1,1,1);this.U=[];this.ia=[];this.aa=new F};n.f=null;n.T=null;n.la=null;n.X=true;n.l="";n.Ea=-1;n.Ya=null;n.mb=null;n.j=l("none");n.nb=function(){return new z};
function M(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c];if(d.j()==b)return d}return null}function he(a,b){for(var c=0;c<a.ia.length;++c){var d=a.ia[c].ff(b);if(d!=null)return d}return null}function Z(a){var b=a.nb().e();eb(a.aa,b);return b}
function ie(a,b,c,d,e){b.l=new String(a.l);b.X=a.X;b.jb=a.jb;b.f=a.f.e();b.T=a.T.e();b.la=a.la.e();b.i=a.i;b.K=a.K;c&&O(c,b);for(var f=0;f<a.U.length;++f){var g=a.U[f];if(g){var i=-1;if(c&&c.K)i=qc(c.K);g=g.h(b,g.Ea,i);if(g!=null){g.Ea=i;O(b,g)}}}for(f=0;f<a.ia.length;++f)yb(b,a.ia[f].h(a,a.K,d,e));if(a.aa)b.aa=a.aa.e()}Y.prototype.h=l(null);function yb(a,b){b!=null&&a.ia.push(b)}function je(a,b){if(b!=null){var c;for(c=0;c<a.ia.length;++c)if(a.ia[c]===b){a.ia.splice(c,1);return}}}
function O(a,b){if(b){b.K=a.K;b.mb&&b.mb.removeChild(b);b.mb=a;a.U.push(b)}}Y.prototype.removeChild=function(a){for(var b=0;b<this.U.length;++b)if(this.U[b]===a){a.mb=null;this.U.splice(b,1);return}};Y.prototype.Sa=function(a){if(this.X)for(var b=0;b<this.U.length;++b)this.U[b].Sa(a)};Y.prototype.Vb=function(a,b){var c=false;if(this.X){var d,e=this.ia.length;for(d=0;d<e;){c=this.ia[d].eb(this,b)||c;var f=e;e=this.ia.length;f>=e&&++d}P(this);for(d=0;d<this.U.length;++d)c=this.U[d].Vb(a,b)||c}return c};
Y.prototype.ll=function(){var a=new F;ab(a,this.T);cb(a,this.f);if(this.la.c!=1||this.la.b!=1||this.la.d!=1){var b=new F;db(b,this.la);a=I(a,b)}return a};function P(a){a.aa=a.mb!=null?I(a.mb.aa,a.ll()):a.ll()}Y.prototype.xb=ba();function N(a){return new s(a.aa.F,a.aa.G,a.aa.H)}Y.prototype.Ic=l(0);Y.prototype.dc=l(null);function ke(a){for(a=a;a;){if(!a.X)return false;a=a.mb}return true}Y.prototype.jn=ba();Y.prototype.ai=ba();function Wd(){this.ab();this.g=new z;this.Dl=this.Pc=false;this.ga=new s(0,0,10);this.Zb=new s(0,1,0);this.yb=new F;this.bf=new F;this.Rc=p.PI/2.5;this.tc=4/3;this.mg=0.1;this.lg=3E3;this.ri=this.to=true;$a(this.yb,this.Rc,this.tc,this.mg,this.lg)}Wd.prototype=new Y;function le(a){$a(a.yb,a.Rc,a.tc,a.mg,a.lg)}Wd.prototype.j=l("camera");function Xd(a,b){if(!p.M(a.tc,b)){a.ri=false;a.tc=b;le(a)}}function me(a,b){if(!p.M(a.Rc,b))if(!isNaN(b)){a.Rc=b;le(a)}}
function Mb(a,b){if(b){a.ga=b.e();if(a.to){P(a);a.T=xa(b.substract(N(a)))}}}Wd.prototype.Vb=function(a,b){a=Y.prototype.Vb.call(this,a,b);ne(this);return a};function ne(a){var b=N(a),c=a.ga.e();if(b.M(c))c.c+=1;var d=a.bf;a=a.Zb;c=c.substract(b);c.normalize();a=wa(a,c);a.normalize();var e=wa(c,a);d.o=a.c;d.r=e.c;d.s=c.c;d.B=0;d.t=a.b;d.p=e.b;d.u=c.b;d.C=0;d.v=a.d;d.w=e.d;d.q=c.d;d.D=0;d.F=-a.ea(b);d.G=-e.ea(b);d.H=-c.ea(b);d.I=1;d.Ka=false}n=Wd.prototype;
n.Sa=function(a){if(a.ha===this){oe(a,this,2);Y.prototype.Sa.call(this,a)}};n.xb=function(a){ne(this);if(this.tc==0||this.ri){Vd(this,a.width,a.height);this.tc==0&&Xd(this,0.75)}this.yb.Ca(a.yb);this.bf.Ca(a.Ad)};n.Cd=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Cd(a)};n.of=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].of(a)};n.Yc=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].Yc(a)};n.je=function(a){for(var b=0;b<this.ia.length;++b)this.ia[b].je(a)};
n.he=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].he(a))b=true;return b};n.ie=function(a){for(var b=false,c=0;c<this.ia.length;++c)if(this.ia[c].ie(a))b=true;return b};n.h=function(a,b,c){var d=new Wd;ie(this,d,a,b,c);if(this.ga)d.ga=this.ga.e();if(this.Zb)d.Zb=this.Zb.e();if(this.yb)d.yb=this.yb.e();if(this.bf)d.bf=this.bf.e();d.Rc=this.Rc;d.tc=this.tc;d.mg=this.mg;d.lg=this.lg;if(this.g)d.g=this.g.e();return d};
function Vd(a,b,c){if(!(b==0||c==0))if(p.M(a.tc,0)||a.ri){Xd(a,b/c);a.ri=true}};function pe(){this.ab();this.g=new z;this.Pc=false;this.ca=null;this.Cp=true;this.Ya=null}pe.prototype=new Y;n=pe.prototype;n.nb=function(){if(this.ca)return this.ca.g;return this.g};n.Mo=k("ca");n.xn=ca("ca");n.j=l("mesh");n.Sa=function(a){var b=this.ca;if(this.X&&b){for(var c=false,d=false,e=0;e<b.Fa.length;++e)if(xc(b.Fa[e].ja))c=true;else d=true;c&&oe(a,this,qe);d&&oe(a,this,re);Y.prototype.Sa.call(this,a)}};
n.xb=function(a){a.Zc(this.aa);for(var b=0;b<this.ca.Fa.length;++b){var c=this.ca.Fa[b];if(xc(c.ja)==(this.K.Kd==qe)){Yc(a,c.ja);Zc(a,c)}}};n.Ic=function(){if(this.ca)return this.ca.Fa.length;return 0};n.dc=function(a){if(this.ca!=null)if(a>=0&&a<this.ca.Fa.length)return this.ca.Fa[a].ja;return null};n.h=function(a,b,c){var d=new pe;ie(this,d,a,b,c);if(this.ca)d.ca=this.ca.h();d.Ik=this.Ik;d.Pc=this.Pc;if(this.g)d.g=this.g.e();return d};function se(){this.ca=new Ec;var a=[0,1,2,0,2,3],b=new Cc;this.ca.ad(b);b.ja.Bb=true;b.ba=a;b.k.push(this.La(-1,-1,-1,0,0,1,1,1));b.k.push(this.La(1,-1,-1,0,0,1,0,1));b.k.push(this.La(1,1,-1,0,0,1,0,0));b.k.push(this.La(-1,1,-1,0,0,1,1,0));b=new Cc;this.ca.ad(b);b.ja.Bb=true;b.ba=a;b.k.push(this.La(1,-1,-1,-1,0,0,1,1));b.k.push(this.La(1,-1,1,-1,0,0,0,1));b.k.push(this.La(1,1,1,-1,0,0,0,0));b.k.push(this.La(1,1,-1,-1,0,0,1,0));b=new Cc;this.ca.ad(b);b.ja.Bb=true;b.ba=a;b.k.push(this.La(-1,-1,1,1,
0,0,1,1));b.k.push(this.La(-1,-1,-1,1,0,0,0,1));b.k.push(this.La(-1,1,-1,1,0,0,0,0));b.k.push(this.La(-1,1,1,1,0,0,1,0));b=new Cc;this.ca.ad(b);b.ja.Bb=true;b.ba=a;b.k.push(this.La(1,-1,1,0,0,-1,1,1));b.k.push(this.La(-1,-1,1,0,0,-1,0,1));b.k.push(this.La(-1,1,1,0,0,-1,0,0));b.k.push(this.La(1,1,1,0,0,-1,1,0));b=new Cc;this.ca.ad(b);b.ja.Bb=true;b.ba=a;b.k.push(this.La(1,1,-1,0,-1,0,1,1));b.k.push(this.La(1,1,1,0,-1,0,0,1));b.k.push(this.La(-1,1,1,0,-1,0,0,0));b.k.push(this.La(-1,1,-1,0,-1,0,1,0));
b=new Cc;this.ca.ad(b);b.ja.Bb=true;b.ba=a;b.k.push(this.La(1,-1,1,0,1,0,1,1));b.k.push(this.La(1,-1,-1,0,1,0,0,1));b.k.push(this.La(-1,-1,-1,0,1,0,0,0));b.k.push(this.La(-1,-1,1,0,1,0,1,0))}se.prototype=new pe;n=se.prototype;n.j=l("sky");n.La=function(a,b,c,d,e,f,g,i){d=new K(true);d.f.c=a;d.f.b=b;d.f.d=c;d.za.c=g;d.za.b=i;return d};n.Sa=function(a){if(this.X){oe(a,this,1);Y.prototype.Sa.call(this,a)}};
n.xb=function(a){var b=this.K.ha;if(b&&this.ca){var c=new F(false);this.aa.Ca(c);cb(c,N(b));b=(b.mg+b.lg)*0.5;var d=new F;db(d,new s(b,b,b));a.Zc(I(c,d));c=this.ca;if(c!=null)for(b=0;b<c.Fa.length;++b){d=c.Fa[b];Yc(a,d.ja);Zc(a,d)}}};n.h=function(a,b,c){var d=new se;ie(this,d,a,b,c);if(this.ca)d.ca=this.ca.e();d.Ik=this.Ik;d.Pc=this.Pc;if(this.g)d.g=this.g.e();return d};new pe;function te(){this.ab();this.g=new z;this.cg=this.Ch=10;this.Vg=false;this.pc=new Cc;this.sg=new K(true);this.tg=new K(true);this.ug=new K(true);this.vg=new K(true);var a=this.pc.ba;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.pc.k;a.push(this.sg);a.push(this.tg);a.push(this.ug);a.push(this.vg);this.sg.za.c=1;this.sg.za.b=1;this.tg.za.c=1;this.tg.za.b=0;this.ug.za.c=0;this.ug.za.b=0;this.vg.za.c=0;this.vg.za.b=1;for(var b=0;b<4;++b)A(this.g,a[b].f)}te.prototype=new Y;n=te.prototype;
n.nb=k("g");n.j=l("billboard");n.Sa=function(a){if(this.X){oe(a,this,xc(this.pc.ja)?qe:re);Y.prototype.Sa.call(this,a)}};
n.xb=function(a){var b=this.K.ha;if(b)if(this.Vg){e=N(this);var c=N(b),d=b.Zb;b=b.ga.substract(c);b.normalize();c=wa(d,b);ra(c)==0&&c.set(d.b,d.c,d.d);c.normalize();y(c,0.5*this.Ch);d=wa(c,b);d.normalize();y(d,0.5*this.cg);this.Vg&&d.set(0,-0.5*this.cg,0);y(b,1);oa(this.sg.f,e);this.sg.f.va(c);this.sg.f.va(d);oa(this.tg.f,e);this.tg.f.va(c);ma(this.tg.f,d);oa(this.ug.f,e);ma(this.ug.f,c);ma(this.ug.f,d);oa(this.vg.f,e);ma(this.vg.f,c);this.vg.f.va(d);this.pc.update(true);e=new F(true);a.Zc(e);Yc(a,
this.pc.ja);Zc(a,this.pc)}else{var e=N(this);a.qj==null&&md(a);d=a.qj;b=new F(true);db(b,new s(this.Ch*0.5,this.cg*0.5,0));c=a.Ad.e();cb(c,new s(0,0,0));var f=new F(true);Wa(c,f);cb(f,e);b=I(f,b);a.Zc(b);Yc(a,this.pc.ja);Zc(a,d)}};n.Ic=l(1);n.dc=function(){return this.pc.ja};n.h=function(a,b,c){var d=new te;ie(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Ch=this.Ch;d.cg=this.cg;d.Vg=this.Vg;d.pc.ja=this.pc.ja.e();return d};function ue(){this.ab();this.g=new z;this.sa=new Cc;this.Ra=new s(0,-0.03,0);this.Cb=new s(0,0,0);this.uj=this.Pi=0;this.Xa=[]}ue.prototype=new Y;n=ue.prototype;n.Ra=null;n.Tc=10;n.Cb=null;n.De=1E3;n.bh=2E3;n.dh=200;n.Jf=10;n.Vi=20;n.Yi=4278190080;n.Wi=4294967295;n.Kf=5;n.Lf=5;n.Hf=7;n.eh=7;n.Pg=false;n.Af=500;n.Af=0;n.Bf=false;n.Ki=500;n.kd=null;n.Uf=false;n.lj=20;n.mj=20;
n.h=function(a,b,c){var d=new ue;ie(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Ra=this.Ra.e();d.Tc=this.Tc;d.Cb=this.Cb.e();d.De=this.De;d.bh=this.bh;d.dh=this.dh;d.Jf=this.Jf;d.Vi=this.Vi;d.Yi=this.Yi;d.Wi=this.Wi;d.Kf=this.Kf;d.Lf=this.Lf;d.Hf=this.Hf;d.eh=this.eh;d.Pg=true;d.Af=this.Af;d.Yj=this.Yj;d.Bf=this.Bf;d.Ki=this.Ki;d.kd=this.kd;d.Uf=this.Uf;d.lj=this.lj;d.mj=this.mj;d.sa.ja=this.sa.ja.e();return d};n.nb=k("g");n.j=l("particlesystem");
n.Sa=function(a){if(this.X){oe(a,this,xc(this.sa.ja)?qe:re);Y.prototype.Sa.call(this,a)}};n.xb=ba();n.Ic=l(1);n.dc=function(){return this.sa.ja};
n.Vb=function(a,b){var c=false;if(this.X)if(this.Pi==0){this.Pi=b;c=false}else{c=b-this.Pi;this.Pi=b;if(this.X){var d=false;d=this.Vi-this.Jf;var e=1E3/(d?this.Jf+Math.random()*d:this.Jf);d=this.Xa.length;this.uj+=c;if(this.uj<=e)d=false;else{e=this.uj/e+0.5;this.uj=0;if(d+e>this.dh)e-=d+e-this.dh;if(e<=0)d=false;else{var f=this.Ra.e();Ra(this.aa,f);for(var g=Qa(this.aa).c,i=pa(this.Cb),j=d;j<d+e;++j){var m=new ve;m.Jc=new s(0,0,0);if(!i){if(this.Cb.c!=0)m.Jc.c=Math.random()*this.Cb.c-this.Cb.c*0.5;
if(this.Cb.b!=0)m.Jc.b=Math.random()*this.Cb.b-this.Cb.b*0.5;if(this.Cb.d!=0)m.Jc.d=Math.random()*this.Cb.d-this.Cb.d*0.5}m.startTime=b;m.hi=f.e();if(this.Tc){var o=f.e(),q=Math.random()*this.Tc*2-this.Tc;q*=p.hd;var h=Math.cos(q);q=Math.sin(q);o.c=o.c*h-o.b*q;o.b=o.c*q+o.b*h;q=Math.random()*this.Tc*2-this.Tc;q*=p.hd;h=Math.cos(q);q=Math.sin(q);o.b=o.b*h-o.d*q;o.d=o.b*q+o.d*h;ya(o,Math.random()*this.Tc*2-this.Tc);m.hi=o}m.Rh=this.bh-this.De==0?b+this.De:b+this.De+Math.random()*(this.bh-this.De);m.color=
p.Wm(this.Yi,this.Wi,Math.random()*100/100);m.zn=m.color;m.An=m.hi.e();if(this.Kf==this.Hf&&this.Lf==this.eh){m.di=this.Kf;m.ei=this.Lf}else{o=Math.random()*100/100;h=1-o;m.di=this.Kf*o+this.Hf*h;m.ei=this.Lf*o+this.eh*h}m.di*=g;m.ei*=g;m.xl=m.di;m.yl=m.ei;Ua(this.aa,m.Jc);this.Xa.unshift(m)}d=true}}if(!this.Pg&&!this.Bf&&!this.Uf)e=false;else{e=0;f=null;if(this.Pg)for(e=0;e<this.Xa.length;++e){f=this.Xa[e];if(f.Rh-b<this.Af)f.color=p.Wm(f.zn,this.Yj,(f.Rh-b)/this.Af)}if(this.Bf){g=ua(this.kd,Qa(this.aa));
for(e=0;e<this.Xa.length;++e){f=this.Xa[e];i=(b-f.startTime)/this.Ki;i=p.ac(i,0,1);i=1-i;f.hi=za(f.An,g,i)}}if(this.Uf){g=Qa(this.aa).c;for(e=0;e<this.Xa.length;++e){f=this.Xa[e];i=(b-f.startTime)/(f.Rh-f.startTime);f.xl=f.di+this.lj*i*g;f.yl=f.ei+this.mj*i*g}}e=true}d=e||d;e=new s(this.aa.F,this.aa.G,this.aa.H);this.sa.g.reset(e.c,e.b,e.d);if(this.Xa.length!=0)d=true;for(e=0;e<this.Xa.length;){f=this.Xa[e];if(b>f.Rh)this.Xa.splice(e,1);else{f.Jc.va(w(f.hi,c));A(this.sa.g,f.Jc);++e}}c=this.Hf*0.5;
this.sa.g.L.c+=c;this.sa.g.L.b+=c;this.sa.g.L.d+=c;this.sa.g.J.c-=c;this.sa.g.J.b-=c;this.sa.g.J.d-=c;c=new F(false);Wa(this.aa,c);eb(c,this.sa.g);c=d}else c=false}return Y.prototype.Vb.call(this,a,b)||c};n.Sa=function(a){if(this.X){if(this.Xa.length!=0)oe(a,this,xc(this.sa.ja)?qe:re);Y.prototype.Sa.call(this,a)}};
n.xb=function(a){if(this.K.ha)if(this.Xa.length!=0){if(this.Xa.length*4>this.sa.k.length||this.Xa.length*6>this.sa.ba.length){for(var b=this.sa.k.length,c=this.sa.k;this.sa.k.length<this.Xa.length*4;){var d=null;d=new K(true);d.za.set(0,0);c.push(d);d=new K(true);d.za.set(0,1);c.push(d);d=new K(true);d.za.set(1,1);c.push(d);d=new K(true);d.za.set(1,0);c.push(d)}b=b;c=this.Xa.length*6;d=this.sa.ba;for(var e=this.sa.ba.length;e<c;e+=6){d.push(0+b);d.push(2+b);d.push(1+b);d.push(0+b);d.push(3+b);d.push(2+
b);b+=4}}b=a.Ad;c=new s(-b.s,-b.u,-b.q);d=0;var f=null;for(e=0;e<this.Xa.length;++e){var g=this.Xa[e];f=0.5*g.xl;var i=new s(b.o*f,b.t*f,b.v*f);f=-0.5*g.yl;var j=new s(b.r*f,b.p*f,b.w*f);f=this.sa.k[0+d];f.f=g.Jc.add(i).add(j);f.Aa=g.color;f.m=c;f=this.sa.k[1+d];f.f=g.Jc.add(i).substract(j);f.Aa=g.color;f.m=c;f=this.sa.k[2+d];f.f=g.Jc.substract(i).substract(j);f.Aa=g.color;f.m=c;f=this.sa.k[3+d];f.f=g.Jc.substract(i).add(j);f.Aa=g.color;f.m=c;d+=4}b=new F(true);a.Zc(b);this.sa.update(false,true);
Yc(a,this.sa.ja);Zc(a,this.sa,this.Xa.length*2*3)}};function ve(){this.hi=this.Jc=null;this.zn=this.color=this.Rh=this.startTime=0;this.An=null;this.ei=this.di=this.yl=this.xl=0};function la(){this.uh=new s(0,0,0);this.Aa=new ka;this.Ba=100;this.Eg=0.01;this.Ra=null;this.Tg=false}n=la.prototype;n.e=function(){var a=new la;a.uh=this.uh.e();a.Aa=this.Aa.e();a.Ba=this.Ba;a.Eg=this.Eg;a.Tg=this.Tg;a.Ra=this.Ra!=null?this.Ra.e():null;return a};n.uh=null;n.Aa=null;n.Eg=null;n.Ba=null;n.Ra=null;n.Tg=false;function we(){this.Fb=new la;this.g=new z;this.ab()}we.prototype=new Y;n=we.prototype;n.j=l("light");n.Fb=null;
n.h=function(a,b,c){var d=new we;ie(this,d,a,b,c);d.Fb=this.Fb.e();d.g=this.g.e();return d};n.Sa=function(a){this.X&&oe(a,this,xe);Y.prototype.Sa.call(this,a);this.Fb.uh=N(this)};n.nb=k("g");n.xb=function(a){this.Fb.Tg?id(a,this.Fb):hd(a,this.Fb)};function ye(){this.ab();this.g=new z;this.jg=0;this.we=false;this.ub=[]}ye.prototype=new Y;n=ye.prototype;n.jg=0;n.we=false;n.ub=[];n.nb=k("g");n.j=l("path");n.h=function(a,b,c){var d=new ye;ie(this,d,a,b,c);if(this.g)d.g=this.g.e();d.jg=this.jg;d.we=this.we;d.ub=[];for(a=0;a<this.ub.length;++a)d.ub.push(this.ub[a].e());return d};function ze(a,b){if(b<0||b>=a.ub.length)return new s(0,0,0);a.aa||P(a);b=a.ub[b];b=b.e();Ua(a.aa,b);return b}
function Ae(a,b,c){if(a.we)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function Be(a,b,c){var d=a.ub.length;if(a.we)b*=d;else{b=p.ac(b,0,1);b*=d-1}var e=new s;if(d==0)return e;if(d==1)return e;b=b;var f=p.Go(b),g=Math.floor(b)%d,i=a.ub[Ae(a,g-1,d)];e=a.ub[Ae(a,g+0,d)];b=a.ub[Ae(a,g+1,d)];var j=a.ub[Ae(a,g+2,d)],m=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;i=b.substract(i);y(i,a.jg);j=j.substract(e);y(j,a.jg);e=w(e,m);e.va(w(b,d));e.va(w(i,g));e.va(w(j,f));if(!c){a.aa||P(a);Ua(a.aa,e)}return e};function Ce(){this.ab();this.g=new z;this.Yl=this.ah=this.Rd=0;this.On=false;this.kg=this.nk=this.Wl=0;this.Pf=false;this.xc=null;this.ro=false;this.Zl=this.Xk=0}Ce.prototype=new Y;Ce.prototype.nb=k("g");Ce.prototype.j=l("sound");Ce.prototype.Sa=function(a){if(this.X){oe(a,this,re);Y.prototype.Sa.call(this,a)}};
function De(a,b,c,d){var e=a.kg;if(d)if(b)if(d=d.ha){var f=N(d);d.ga.substract(f);c=f.wb(c);if(!(c<a.Rd)){c-=a.Rd;d=a.ah-a.Rd;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.Rd/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.$b.volume=e}catch(g){}}}function Ee(a,b){if(!a.xc&&a.Wc){a.ro=false;a.xc=ec(p.hf,a.Wc,b);if(!a.Pf){b=N(a);De(a,a.xc,b,a.K)}}}
Ce.prototype.Vb=function(a,b){try{var c=N(this);this.xc&&!this.Pf&&De(this,this.xc,c,a);switch(this.Yl){case 0:break;case 1:if(this.xc&&ud(this.xc)){this.xc=null;var d=this.Wl-this.nk;if(d<2)d=2;this.Xk=b+Math.random()*d+this.nk}else if(!this.xc&&(!this.Xk||b>this.Xk))this.Wc&&Ee(this,false);break;case 2:this.xc||this.Wc&&Ee(this,true);break;case 3:if(!this.Zl)if(this.Wc){Ee(this,true);++this.Zl}break}}catch(e){}return false};
Ce.prototype.h=function(a,b,c){var d=new Ce;ie(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function Fe(a){this.ab();this.Ma=a;this.g=new z;this.Ge=this.Fe=100;this.Se=this.Te=50;this.Ie=this.He=0.5;this.Ve=1/6;this.Ue=1/6;this.bg=this.td=true;this.uc=0;this.Zd=this.Ua=null;this.Tf=true;this.te=false;this.fg=1;this.Qc=this.Za="";this.We=0;this.mh=this.Sg=this.nh=this.Li=this.yk=this.Bg=false;this.Fh=this.Gh=null;this.Jl=this.Kl="";this.xi=0}Fe.prototype=new Y;n=Fe.prototype;n.Qc="";n.We=0;n.fg=1;n.Om=l(false);n.nb=k("g");n.j=l("2doverlay");
n.wl=function(a){this.Za=a;this.te=this.Za!=null&&this.Za!="";if(this.Qc=="")this.Qc="12;default;arial;normal;bold;true"};n.Sa=function(a){if(this.X){oe(a,this,Ge);Y.prototype.Sa.call(this,a)}};
n.xb=function(a){var b=He(this,true,a),c=false;if(this.Ma!=null&&this.Bg){c=this.Ma.Sb;var d=this.Ma.Tb;c=b.x<=c&&b.y<=d&&b.x+b.Qa>=c&&b.y+b.Na>=d}if(c&&this.nh)dd(a,b.x,b.y,b.Qa,b.Na,this.Sg,true);else this.bg&&dd(a,b.x,b.y,b.Qa,b.Na,this.uc,true);d=this.Ua;if(c&&this.Zd&&this.mh)d=this.Zd;if(d!=null&&d.nc){var e=d.ec(),f=d.cc();if(this.Tf){if(e&&f&&b.Na&&b.Qa){var g=b.Qa;e=g*(f/e);if(e>b.Na){f=b.Na/e;g*=f;e*=f}b.Qa=g;b.Na=e;ed(a,b.x,b.y,b.Qa,b.Na,d,true)}}else ed(a,b.x,b.y,b.Qa,b.Na,d,true)}if(this.te&&
this.Qc&&this.Za!=""){a:{e=b.Qa;(d=this.Gh==null||false)||(d=this.Kl!=this.Za||this.Jl!=this.Qc);if(d){Ie(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(i){break a}var j=this.Qc;f=12;var m="Arial",o=false,q=false;if(j.indexOf("#fnt_")==0)j=j.substr(5);j=j.split(";");for(var h=0;h<j.length;++h){var x=j[h],t=x.toLowerCase();if(h==0)f=parseInt(t);else if(h==2)m=x;else if(h==3){if(t.indexOf("italic")!=-1)o=true}else if(h==
4)if(t.indexOf("bold")!=-1)q=true}j="";if(o)j+="italic ";if(q)j+="bold ";this.xi=f*96/72;j+=this.xi+"px ";j+=m;f=j;g.font=f;if(this.fg==2){m=[];o=this.Za;q=g;x=h=j="";t=o.length;for(var G=0,B=e-6,u="c",C=0;C<t;++C){u=o.charAt(C);var E=false;if(u=="\r"){E=true;u=" ";if(o.charAt(C+1)=="\n"){o=o.substr(0,C).concat(o.substr(C+2));--t}}else if(u=="\n"){E=true;u=" "}if(u==" "||u==0||C==t-1){if(h.length){var H=q.measureText(x).width,U=q.measureText(h).width;if(G+U+H>B){G=U;m.push(j);j=h}else{j=j.concat(x);
j=j.concat(h);G+=H+U}x=h=""}x=x.concat(u);if(E){j=j.concat(x);j=j.concat(h);m.push(j);x=h=j="";G=0}}else h=h.concat(u)}j=j.concat(x);j=j.concat(h);m.push(j);o=this.xi*1.2;j=m.length;q=0;d.width=e;d.height=Math.max(1,j*o);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<m.length;++e){g.fillText(m[e],0,q);q+=o}}else{e=g.measureText(this.Za);d.width=e.width;d.height=this.xi*1.2;g.fillStyle="rgba(0, 0, 0, 1)";
g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.Za,0,0)}this.Fh=this.Gh=d=uc(a,d,true);this.Kl=this.Za;this.Jl=this.Qc}}}d=this.Gh;g=this.We;if(c){if(this.Fh)d=this.Fh;g=this.Li}if(d){c=d.ph;e=d.oh;this.fg==1?fd(a,b.x+(b.Qa-c)/2,b.y+(b.Na-e)/2,c,e,d,g):fd(a,b.x,b.y,c,e,d,g)}}else Ie(this,a)};function Ie(a,b){b.deleteTexture(a.Gh);b.deleteTexture(a.Fh);a.Gh=null;a.Fh=null}Fe.prototype.Ic=l(0);
function He(a,b,c){b=c.ec();c=c.cc();var d={};if(a.td){d.x=a.Fe;d.y=a.Ge;d.Qa=a.Te;d.Na=a.Se}else{d.x=a.He*b;d.y=a.Ie*c;d.Qa=a.Ve*b;d.Na=a.Ue*c}return d}
Fe.prototype.h=function(a,b,c){var d=new Fe;ie(this,d,a,b,c);d.Fe=this.Fe;d.Ge=this.Ge;d.Te=this.Te;d.Se=this.Se;d.He=this.He;d.Ie=this.Ie;d.Ve=this.Ve;d.Ue=this.Ue;d.td=this.td;d.bg=this.bg;d.uc=this.uc;d.Ua=this.Ua;d.Zd=this.Zd;d.Tf=this.Tf;d.te=this.te;d.fg=this.fg;d.Za=this.Za;d.Qc=this.Qc;d.We=this.We;d.Bg=this.Bg;d.yk=this.yk;d.Li=this.Li;d.nh=this.nh;d.Sg=this.Sg;d.mh=this.mh;return d};function Je(a,b){Fe.call(this,a);this.xf=null;this.Pb=this.Ob=0;this.Zi=false;this.wc=this.Mi=this.jm=this.im=this.Jk=this.Kk=0;yb(this,new Ke(a,b,this))}Je.prototype=new Fe;Je.prototype.j=l("mobile2dinput");Je.prototype.Om=l(true);
Je.prototype.xb=function(a){var b=He(this,true,a),c=false;if(this.Ma!=null){var d=this.Ma.Sb,e=this.Ma.Tb;this.Zi=b.x<=d&&b.y<=e&&b.x+b.Qa>=d&&b.y+b.Na>=e;if(this.Bg)c=this.Zi}if(c&&this.nh)dd(a,b.x,b.y,b.Qa,b.Na,this.Sg,true);else this.bg&&dd(a,b.x,b.y,b.Qa,b.Na,this.uc,true);d=this.Ua;if(c&&this.Zd&&this.mh)d=this.Zd;e=c=0;if(d!=null&&d.nc){var f=d.ec(),g=d.cc();if(this.Tf){if(f&&g&&b.Na&&b.Qa){c=b.Qa;e=c*(g/f);if(e>b.Na){f=b.Na/e;c*=f;e*=f}b.Qa=c;b.Na=e;ed(a,b.x,b.y,b.Qa,b.Na,d,true);c=b.Qa;e=
b.Na}}else{ed(a,b.x,b.y,b.Qa,b.Na,d,true);c=b.Qa;e=b.Na}}this.Kk=c;this.Jk=e;this.im=b.x;this.jm=b.y;if(this.Mi==0&&this.xf!=null&&this.xf.nc&&d!=null&&d.nc){f=this.Ob*Math.sqrt(1-0.5*this.Pb*this.Pb);g=this.Pb*Math.sqrt(1-0.5*this.Ob*this.Ob);f=(f+1)*0.5;g=(g+1)*0.5;var i=1/(d.ec()/Number(this.xf.ec()));d=1/(d.cc()/Number(this.xf.cc()));i=i*c;d=d*e;ed(a,b.x+f*c-i*0.5,b.y+g*e-d*0.5,i,d,this.xf,true)}};function Le(){this.ab();this.g=new z;this.Pc=false;this.Ya=this.Da=null;this.Wg=0;this.sb=[];this.rb=0.25;this.qe=r();this.kb=this.Oa=this.ak=0;this.Hb=false;this.kc=0;this.Nc=250;this.Jd=true;this.zi=false;this.Ef=[];this.si=0;this.Dm=false;this.ok=20;this.qb=[]}Le.prototype=new Y;p.mm=function(){this.ta=null;this.aj=this.Df=-1};Le.prototype.nb=k("g");Le.prototype.Lb=function(a){if(!this.Da)return false;a=Lc(this.Da,a);if(!a)return false;Me(this,a.dd,a.O);this.rb=a.mc;return true};
function Gb(a,b,c){if(!a.Da)return false;var d=a.Da;if(!d)return false;var e=Lc(d,b);if(e){Me(a,e.dd,e.O);e.mc!=0&&Ne(a,e.mc);a.Hb=c}else if(b){b=b.toLowerCase();if(b=="all"){Me(a,0,Math.floor(d.Mc));d.Wj!=0&&Ne(a,d.Wj);a.Hb=c}else if(b=="none"){Me(a,0,0);a.Hb=c}}return true}n=Le.prototype;n.xn=function(a){if(a){this.Da=a;this.g=a.nb();Me(this,0,Math.floor(a.Mc))}};n.j=l("animatedmesh");
n.Sa=function(a){if(this.X&&this.Da){var b=this.sb,c=false,d=false;if(b!=null)for(var e=0;e<b.length;++e)if(xc(b[e]))c=true;else d=true;c&&oe(a,this,qe);d&&oe(a,this,re);Y.prototype.Sa.call(this,a)}};n.Ic=function(){if(this.sb!=null)return this.sb.length;if(this.ca)return this.ca.Fa.length;return 0};n.dc=function(a){if(this.sb)if(a>=0&&a<this.sb.length)return this.sb[a];else if(this.Da&&this.Da.bd&&a>=0&&this.sb.length==a&&a<256){a=new wc;this.sb.push(a);return a}return null};
n.h=function(a,b,c){var d=new Le;ie(this,d,a,b,c);d.Da=this.Da;if(this.g)d.g=this.g.e();d.Pc=this.Pc;d.Ya=this.Ya;d.Wg=this.Wg;d.sb=[];for(a=0;a<this.sb.length;++a)d.sb.push(this.sb[a].e());d.rb=this.rb;d.qe=this.qe;d.ak=this.ak;d.Oa=this.Oa;d.kb=this.kb;d.Hb=this.Hb;d.kc=this.kc;d.ok=this.ok;d.Nc=this.Nc;d.Jd=this.Jd;d.zi=false;d.Ef=[];for(a=d.si=0;a<this.qb.length;++a){b=new p.mm;b.ta=this.qb[a].ta;b.Df=this.qb[a].Df;b.aj=this.qb[a].aj;d.qb.push(b)}return d};function Ne(a,b){a.rb=b}
function Oe(a,b){a.Hb=b}function Me(a,b,c){if(!a.Da)return false;var d=Math.floor(a.Da.Mc)-1,e=a.Oa,f=a.kb;if(c<b){a.Oa=p.ac(c,0,d);a.kb=p.ac(b,a.Oa,d)}else{a.Oa=p.ac(b,0,d);a.kb=p.ac(c,a.Oa,d)}if(e!=a.Oa||f!=a.kb){b=a.kc;a.kc=p.ac(a.Oa,a.Oa,a.kb);a.qe=r()-Math.floor((a.kc-a.Oa)/a.rb);a.Jd&&a.Nc&&Pe(a,b)}return true}
function Qe(a){var b=a.Da;if(b){var c=false;if((c=Re(a,a.kc))||b.zl){a:{for(c=0;c<a.sb.length;++c)if(a.sb[c].Sc){c=true;break a}c=false}if(b.ld){b.zl=false;Jc(b,null,null);var d=0,e=0,f;for(d=0;d<b.ra.length;++d){var g=b.ra[d];for(e=0;e<g.Cg.length;++e){f=b.cb[g.Cg[e]];f.be=g.ue.e()}}for(d=0;d<b.cb.length;++d){f=b.wj[d];for(e=0;e<f.length;++e)f[e]=false}for(d=0;d<b.Le.length;++d)Kc(b,b.Le[d],null,c)}b.ib.J.set(0,0,0);b.ib.L.set(0,0,0);if(b.cb.length){c=b.cb[0];Dc(c);b.ib.J=c.g.J.e();b.ib.L=c.g.L.e();
for(d=1;d<b.cb.length;++d){c=b.cb[d];Dc(c);if(c.be==null){A(b.ib,c.g.J);A(b.ib,c.g.L)}else{e=c.g.e();eb(c.be,e);A(b.ib,e.J);A(b.ib,e.L)}}}a.g=b.nb().e();for(c=0;c<b.cb.length;++c)b.cb[c].update(true)}a.ak=a.kc}}
Le.prototype.Vb=function(a,b){var c=r();if(this.Wg==0||c-this.Wg>this.ok){var d;d=0;if(this.Oa==this.kb)d=this.Oa;else if(this.rb==0)d=this.Oa;else{d=0;if(this.Hb){var e=false;d=Math.abs(Math.floor((this.kb-this.Oa)/this.rb));if(this.rb>0){d=this.Oa+(b-this.qe)%d*this.rb;e=d<this.kc}else{d=this.kb-(b-this.qe)%d*-this.rb;e=d>this.kc}e&&this.Jd&&Pe(this,this.kc)}else if(this.rb>0){d=(b-this.qe)*this.rb;d=this.Oa+d;if(d>this.kb)d=this.kb}else{d=(b-this.qe)*-this.rb;d=this.kb-d;if(d<this.Oa)d=this.Oa}d=
d}this.kc=d;this.Wg=c}a=Y.prototype.Vb.call(this,a,b);this.qb.length!=0&&Se(this);return a};
Le.prototype.xb=function(a){var b=this.K.Sj;if(b){a:{var c=Z(this);c=Fa(c);for(var d=0;d<6;++d){for(var e=false,f=0;f<8;++f){var g;g=b.Wa[d];g=g.m.ea(c[f])+g.bb;g=g<-1.0E-6?1:g>1.0E-6?0:2;if(g!=0){e=true;break}}if(!e){b=false;break a}}b=true}if(!b)return}if(b=this.Da){a.Zc(this.aa);!b.ld||Qe(this);this.Dm=true;for(c=0;c<b.cb.length;++c){d=b.cb[c];if(c<this.sb.length)d.ja=this.sb[c];if(xc(d.ja)==(this.K.Kd==qe)){d.be!=null&&a.Zc(I(this.aa,d.be));Yc(a,d.ja);Zc(a,d);d.be!=null&&a.Zc(this.aa)}}}};
function Te(a,b){b=b.length;if(b>a.Ef.length)for(;a.Ef.length<b;){var c={};c.hc=new s(0,0,0);c.Ab=new s(1,1,1);c.ic=new J;a.Ef.push(c)}}function Pe(a,b){if(a.Dm){var c=a.Da;if(c){Re(a,b);a.si=r();a.zi=true;Te(a,c.ra);for(b=0;b<c.ra.length;++b){var d=a.Ef[b],e=c.ra[b];d.hc=e.hc.e();d.Ab=e.Ab.e();d.ic=e.ic.e()}}}}
function Re(a,b){var c=a.Da;if(c){var d=1;if(a.zi){var e=r();if(e-a.si>a.Nc)a.zi=false;else{d=(e-a.si)/a.Nc;Te(a,c.ra);for(e=0;e<c.ra.length;++e){var f=a.Ef[e],g=c.ra[e];g.hc=f.hc.e();g.Ab=f.Ab.e();g.ic=f.ic.e()}}}a=d;if(!c.ld||p.M(c.gk,b)&&a==1)c=false;else{c.gk=b;if(a<0)c=false;else{if(p.M(a,1))for(d=0;d<c.ra.length;++d){e=c.ra[d];f=e.hc.e();g=e.Ab.e();var i=e.ic.e();Ic(c,b,e,f,e.mn,g,e.vn,i,e.un);e.hc=f.e();e.Ab=g.e();e.ic=i.e()}else for(d=0;d<c.ra.length;++d){e=c.ra[d];var j=e.hc.e(),m=e.Ab.e(),
o=e.ic.e();f=j.e();g=m.e();i=o.e();Ic(c,b,e,f,e.mn,g,e.vn,i,e.un);e.hc=za(j,f,a);e.Ab=za(m,g,a);gb(e.ic,o,i,a)}for(b=0;b<c.ra.length;++b){a=c.ra[b];if(a.Je.length||a.Xd.length||a.Ne.length){if(!a.ic)a.ic=new J;if(!a.hc)a.hc=new s;a.Gf=hb(a.ic);d=a.Gf;e=a.hc;d.o+=e.c*d.B;d.r+=e.b*d.B;d.s+=e.d*d.B;d.t+=e.c*d.C;d.p+=e.b*d.C;d.u+=e.d*d.C;d.v+=e.c*d.D;d.w+=e.b*d.D;d.q+=e.d*d.D;d.F+=e.c*d.I;d.G+=e.b*d.I;d.H+=e.d*d.I;d.Ka=false;a.Ol=false;if(a.Xd.length&&a.Ab&&!(p.M(a.Ab.c,1)&&p.M(a.Ab.b,1)&&p.M(a.Ab.d,
1))){e=a.Ab;d.o*=e.c;d.r*=e.c;d.s*=e.c;d.B*=e.c;d.t*=e.b;d.p*=e.b;d.u*=e.b;d.C*=e.b;d.v*=e.d;d.w*=e.d;d.q*=e.d;d.D*=e.d}}else a.Gf=a.$g.e()}c=c.zl=true}}return c}}Le.prototype.jn=function(){if(this.K!=null)for(var a=0;a<this.qb.length;){var b=0,c=this.qb[a].aj;if(c!=-1)b=Ue(this.K,this,c);if(b&&b.j()=="dummytrans"){this.qb[a].ta=b;++a}else this.qb.splice(a,1)}};
function Se(a){var b=a.Da;if(b&&b.ld){Re(a,a.kc);Jc(b,null,null);b=b.ra;for(var c=0;c<a.qb.length;++c){var d=a.qb[c];if(d.Df>=0&&d.Df<b.length&&d.ta!=null){var e=b[d.Df];if(e)d.ta.Sf=e.ue.e()}}}}Le.prototype.ai=function(a,b){for(var c=0;c<this.qb.length;++c)if(this.qb[c].ta==a)this.qb[c].ta=b&&b.j()=="dummytrans"?b:null};function Ve(){this.g=new z;this.Rn=this.yo=0}Ve.prototype=new Y;function We(){this.ab();this.g=new z;this.Sf=new F}We.prototype=new Y;We.prototype.h=function(a,b,c){var d=new We;ie(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.Sf)d.Sf=this.Sf;return d};We.prototype.ll=k("Sf");We.prototype.j=l("dummytrans");function Xe(){this.ab();this.g=new z}Xe.prototype=new Y;Xe.prototype.j=l("terrain");function Ye(){this.ab()}Ye.prototype.ab=function(){this.Ha=new Y;this.Ha.K=this;this.l="";this.Fl=0;this.fd=null;this.Nb=new ka;this.Nb.rd=0;this.Nb.jd=0;this.Nb.cd=0;this.kd=1;this.Xg=null;this.Ia=0;this.ha=null;this.$j=false;this.Ri=new F;this.uo=null;this.gj=2;this.Kd=0;this.nj=[];this.ag=[];this.Ce=[];this.qh=[];this.yc=[];this.po=this.Zn=0;this.xo=false;this.Sj=null;this.Cm=false;this.Lg=[];this.hk=new s};Ye.prototype.Aj=l("unknown");
function Sd(a,b){a.nj=[];a.ag=[];a.Ce=[];a.qh=[];a.Ha.Sa(a);a.Sj=null;a.po=0;a.Kd=Ze;var c=null;if(a.ha){c=N(a.ha);a.ha.xb(b)}a.Kd=$e;a.rm&&a.rm.xb(b);gd(b);b.Nb=a.Nb.e();var d,e=0;c!=null&&a.Ce.length>0&&a.Ce.sort(function(j,m){j=qa(c,N(j));m=qa(c,N(m));if(j>m)return 1;if(j<m)return-1;return 0});a.Kd=xe;for(d=0;d<a.Ce.length;++d)a.Ce[d].xb(b);e+=a.Ce.length;var f=null;d=null;var g=b.yb,i=b.Ad;if(g!=null&&i!=null&&c!=null){d=new kb;d.Lj(I(g,i));if(a.xo)f=d.nb(c)}a.Sj=d;a.Kd=re;for(d=0;d<a.nj.length;++d){g=
a.nj[d];if(f==null||Ha(f,Z(g))){g.xb(b);e+=1}}a.Kd=qe;c!=null&&a.ag.length>0&&a.ag.sort(function(j,m){j=qa(c,N(j));m=qa(c,N(m));if(j<m)return 1;if(j>m)return-1;return 0});for(d=0;d<a.ag.length;++d){g=a.ag[d];if(f==null||Ha(f,Z(g))){g.xb(b);e+=1}}a.Kd=Ge;for(d=0;d<a.qh.length;++d)a.qh[d].xb(b);e+=a.qh.length;a.Zn=e;af(a)}function af(a){if(a.ha){a.ha.yb.Ca(a.Ri);a.Ri=I(a.Ri,a.ha.bf)}}Ye.prototype.getName=k("l");Ye.prototype.vl=ca("l");function bf(a,b){a.ha=b}function Pd(a){a.$j=true}
function oe(a,b,c){if(c==null)c=re;switch(c){case $e:a.rm=b;break;case re:a.nj.push(b);break;case xe:a.Ce.push(b);break;case Ze:break;case qe:a.ag.push(b);break;case Ge:a.qh.push(b);break}}function Ud(a,b){if(a.Ha==null)return null;var c=[];cf(a,a.Ha,b,c);return c}function cf(a,b,c,d){b.j()==c&&d.push(b);for(var e=0;e<b.U.length;++e)cf(a,b.U[e],c,d)}function Pb(a,b){if(a.Ha==null)return null;var c=[];df(a,a.Ha,b,c);return c}
function df(a,b,c,d){M(b,c)!=null&&d.push(b);for(var e=0;e<b.U.length;++e)df(a,b.U[e],c,d)}function ef(a,b){if(a.Ha==null)return null;return ff(a,a.Ha,b)}function ff(a,b,c){if(b.l==c)return b;for(var d=0;d<b.U.length;++d){var e=ff(a,b.U[d],c);if(e)return e}return null}function L(a,b){if(a.Ha==null)return null;return Ue(a,a.Ha,b)}function Ue(a,b,c){if(b.Ea==c)return b;for(var d=0;d<b.U.length;++d){var e=Ue(a,b.U[d],c);if(e)return e}return null}
function gf(a,b){if(b!=null){for(var c=0;c<a.yc.length;++c)if(a.yc[c]===b)return;a.yc.push(b)}}
function $d(a,b,c){var d=Ud(a,"mesh");if(d==null)return null;var e=null;if(c){c.clear();e=c}else e=new hf;for(c=0;c<d.length;++c){var f=d[c];if(f&&f.Pc){var g=null;if(f.Ya)g=f.Ya;else{g=null;if(f.mb&&f.mb.j()=="terrain")g=Ac;g=f.ca&&Fc(f.ca)>100?new jf(f.ca,f,64,g):new kf(f.ca,f,g)}if(b&&f.Ya==null)f.Ya=g;rc(e,g)}}d=Ud(a,"animatedmesh");for(c=0;c<d.length;++c)if((a=d[c])&&a.Da&&!a.Da.ld&&a.Da.Eh&&!a.Da.Eh.L.M(a.Da.Eh.J)){g=a.Ya?a.Ya:new lf(a.Da.Eh,a);if(b&&a.Ya==null)a.Ya=g;rc(e,g)}return e}
function oc(a,b,c){var d={};d.ge=b;d.kp=c+r();a.Lg.push(d)}function mf(a,b,c,d,e){if(b&&b.X&&(b.j()=="2doverlay"||b.j()=="mobile2dinput"))if(!e||e&&b.Om()){var f=He(b,true,a.Xg);if(f.x<=c&&f.y<=d&&f.x+f.Qa>=c&&f.y+f.Na>=d)return b}for(f=0;f<b.U.length;++f){var g=mf(a,b.U[f],c,d,e);if(g)return g}return null}function qc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(L(a,c)==null)return c}return-1}
Ye.prototype.ai=function(a,b){if(a&&b){for(var c=0;c<a.U.length&&c<b.U.length;++c){var d=a.U[c],e=b.U[c];d&&e&&d.j()==e.j()&&b.ai(d,e)}return-1}};var $e=1,re=0,xe=2,Ze=3,qe=4,Ge=5;function nf(){this.ab()}nf.prototype=new Ye;nf.prototype.Aj=l("panorama");function of(){this.ab();this.Vj=new s;this.Bi=new s}of.prototype=new Ye;of.prototype.Aj=l("free");function Nd(){this.a=this.wa=null;this.Zj="";this.tb=0;this.N=this.$a=null;this.ej="";this.wm=this.$d=null;this.Ul=false;this.Oo=function(a,b,c,d,e){this.Zj=b;this.$a=c;this.N=e;this.$d=d;if(this.$a!=null)X().$a=c;if(a.length==0){ha(p.ma,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=-1&&ha(p.ma,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser.<br/>Or use Firefox instead. Or run it from a web server. Or from CopperCube.</i>",
true);return null}if(b.indexOf(".ccbjs"))a=p.Bo(a);this.wa=b=new wd;this.yn();this.a=new Sc(a);if(!this.rl())return null;this.wm=a;return b};this.yn=function(){var a=this.Zj,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.ej=a};this.rl=function(){if(T(this.a)!=1701014630)return false;T(this.a);Vc(this.a,4);for(var a=0;R(this.a)>0;){var b=this.hb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.So();break;case 12:this.To();break;default:this.ya()}}return true};this.ya=function(){this.a.Ja=
0+this.tb};this.hb=function(){var a=0;a=Vc(this.a,2);var b=0;this.yi=b=Vc(this.a,4);this.tb=this.a.Ja+b;return a};this.em=function(){var a=new F(false);this.eo(a);return a};this.eo=function(a){for(var b=0;b<16;++b)Za(a,b,V(this.a))};this.ho=function(){var a=new J;a.ua=V(this.a);a.c=V(this.a);a.b=V(this.a);a.d=V(this.a);return a};this.rn=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Vc(this.a,1));for(;b<a;){f=0;var g=this.lp[e[b]];if(b+g>=a)return c.join("");
for(var i=g;i>=0;--i){f+=e[b];++b;if(i!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.Fo(f));else return c.join("")}return c.join("")};this.P=function(){var a=Vc(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.rn(a)};this.lp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5];this.Fo=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.So=function(){for(var a=this.tb;R(this.a)>0&&this.a.Ja<a;)switch(this.hb()){case 1004:this.wa.Ig=T(this.a);
break;case 20:this.ep();break;case 2:var b=null;switch(T(this.a)){case 0:b=new of;this.pn(b);break;case 1:b=new nf;this.qn(b);break;default:this.ya()}this.wa.Gm(b);break;default:this.ya()}};this.tl=function(a,b,c,d,e,f,g){this.Zj=d;this.$a=e;this.N=g;this.$d=f;this.a=new Sc(a);this.yn();T(this.a);T(this.a);Vc(this.a,4);a=-1;d=this.hb();if(d!=1)return null;for(b=this.tb;R(this.a)>0&&this.a.Ja<b;){d=this.hb();switch(d){case 2:d=T(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new of;this.pn(c);break;
case 1:c=new nf;this.qn(c);break;default:this.ya()}return c}else this.ya();default:this.ya()}}return null};this.ep=function(){T(this.a);this.wa.Jn=this.P();for(var a=this.tb;R(this.a)>0&&this.a.Ja<a;)switch(this.hb()){case 35:T(this.a);T(this.a);T(this.a);T(this.a);var b=T(this.a);if((b&1)!=0)this.wa.Bm=true;this.ya();break;case 37:b=T(this.a);T(this.a);if((b&1)!=0)if(p.ma==null)p.ma=new da(elementIdOfCanvas,showFPSCounter);else ea(p.ma);if((b&2)!=0){T(this.a);this.P()}break;default:this.ya()}};this.pn=
function(a){var b=this.tb;for(this.fp(a);R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 1007:a.Vj=this.S();a.Bi=this.S();break;case 8:this.io(a);break;case 1008:a.kd=V(this.a);break;default:this.ya()}};this.qn=function(){this.ya()};this.S=function(){var a=new s;a.c=V(this.a);a.b=V(this.a);a.d=V(this.a);return a};this.Gk=function(){var a=new ka;a.rd=V(this.a);a.jd=V(this.a);a.cd=V(this.a);a.ki=V(this.a);return a};this.Bp=function(){var a=V(this.a),b=V(this.a),c=V(this.a),d=V(this.a);if(a>1)a=1;if(b>
1)b=1;if(c>1)c=1;if(d>1)d=1;return p.Qm(d*255,a*255,b*255,c*255)};this.xh=function(){var a=new Ca;a.c=V(this.a);a.b=V(this.a);return a};this.Yb=function(){var a=new z;a.J=this.S();a.L=this.S();return a};this.fp=function(a){if(this.hb()==26){a.l=this.P();a.Fl=T(this.a)}else this.Tn()};this.Tn=function(){this.a.position-=10};this.io=function(a){for(var b=this.tb;R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 9:this.gm(a,a.Ha,0);break;default:this.ya()}};this.gm=function(a,b,c){if(b!=null){var d=this.tb,
e=T(this.a),f=T(this.a),g=this.P(),i=this.S(),j=this.S(),m=this.S(),o=S(this.a),q=T(this.a),h=null,x=0;if(c==0){b.X=o;b.l=g;b.jb=q}for(;R(this.a)>0&&this.a.Ja<d;)switch(this.hb()){case 9:this.gm(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new se;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.on(h);O(b,h);h=h;P(h);break;case 1752395110:h=new pe;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.on(h);O(b,h);h=h;P(h);break;case 1835950438:h=new Le;h.i=e;h.f=i;h.T=
j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.Xo(h);O(b,h);h=h;P(h);break;case 1953526632:h=new Ve(this.N,null);h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.$o(h);O(b,h);h=h;P(h);break;case 1819042406:h=new te;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.Yo(h);O(b,h);h=h;P(h);break;case 1835098982:h=new Wd;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.K=a;h.Ea=f;this.Zo(h);O(b,h);h=h;P(h);break;case 1751608422:h=new we;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;
h.Ea=f;h.K=a;this.ap(h);O(b,h);h=h;P(h);break;case 1935946598:h=new Ce;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.Wo(h);O(b,h);h=h;P(h);break;case 1752461414:h=new ye;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.bp(h);O(b,h);h=h;P(h);break;case 1954112614:h=new We;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;h.g=this.Yb();for(var t=0;t<16;++t)Za(h.Sf,t,V(this.a));O(b,h);h=h;P(h);break;case 1868837478:h=new Fe(this.N);h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=
g;h.jb=q;h.Ea=f;h.K=a;this.Vo(h);O(b,h);h=h;P(h);break;case 1668575334:h=new ue;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.dp(h);O(b,h);h=h;P(h);break;case 1835283046:h=new Je(this.N,a);h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;this.Uo(h);O(b,h);h=h;P(h);break;case 1920103526:h=new Xe;h.i=e;h.f=i;h.T=j;h.la=m;h.X=o;h.l=g;h.jb=q;h.Ea=f;h.K=a;h.g=this.Yb();O(b,h);h=h;P(h);this.ya();break;default:if(c==0)a.Nb=this.Gk();this.ya();break}break;case 11:t=this.dm();h&&h.dc(x)&&
h.dc(x).Lj(t);++x;break;case 25:t=h;if(t==null&&c==0)t=a.Ha;this.co(t,a);break;default:this.ya()}h&&h.jn()}};this.on=function(a){var b=this.tb;a.g=this.Yb();S(this.a);S(this.a);a.Pc=S(this.a);for(S(this.a);R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 14:var c=this.fo();a.ca=c;break;default:this.ya()}};this.fo=function(){var a=new Ec;a.g=this.Yb();for(var b=this.tb;R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 15:var c=this.fm();c!=null&&a.ad(c);break;default:this.ya()}return a};this.fm=function(){var a=
new Cc;a.g=this.Yb();for(var b=this.tb;R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 11:a.ja=this.dm();break;case 16:for(var c=Math.floor(this.yi/2),d=0;d<c;++d)a.ba.push(Vc(this.a,2));break;case 17:c=Math.floor(this.yi/36);for(d=0;d<c;++d){var e=new K;e.f=this.S();e.m=this.S();e.Aa=T(this.a);e.za=this.xh();e.eg=new Ca;a.k.push(e)}break;case 18:c=Math.floor(this.yi/44);for(d=0;d<c;++d){e=new K;e.f=this.S();e.m=this.S();e.Aa=T(this.a);e.za=this.xh();e.eg=this.xh();a.k.push(e)}break;case 19:c=this.yi/
60;a.xd=[];a.ed=[];for(d=0;d<c;++d){e=new K;e.f=this.S();e.m=this.S();e.Aa=T(this.a);e.za=this.xh();e.eg=new Ca;a.xd.push(this.S());a.ed.push(this.S());a.k.push(e)}break;default:this.ya()}return a};this.dm=function(){var a=new wc;a.i=T(this.a);T(this.a);T(this.a);T(this.a);T(this.a);V(this.a);T(this.a);T(this.a);S(this.a);S(this.a);a.Sc=S(this.a);a.df=S(this.a);Uc(this.a,1);a.pe=S(this.a);S(this.a);S(this.a);S(this.a);for(var b=0;b<4;++b){var c=this.Uc();switch(b){case 0:a.gb=c;break;case 1:a.sc=
c;break}S(this.a);S(this.a);S(this.a);if(Vc(this.a,2)!=0)switch(b){case 0:a.Bb=true;break;case 1:break}}return a};this.Hk=function(){return this.P()};this.hm=function(){var a=this.ej+this.Hk();return pd(p.hf,a,true)};this.Uc=function(){var a=this.Hk(),b=this.ej+a;if(this.$a!=null&&a!="")return Nc(this.$a,b,true);return null};this.$o=function(a){var b=this.tb;a.g=this.Yb();a.yo=T(this.a);for(a.Rn=T(this.a);R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 3:this.cp(a);break;default:this.ya()}};this.cp=
function(a){var b=this.tb;a.caption=this.P();a.hg=this.Uc();this.xh();T(this.a);a.Ip=this.P();for(a.Qp=S(this.a);R(this.a)>0&&this.a.Ja<b;)switch(this.hb()){case 6:a.Fp=true;a.Kp=this.P();break;case 4:a.Gp=true;a.Bj=this.P();break;case 5:a.Hp=true;a.Rp=this.P();a.Sp=this.P();break;default:this.ya()}};this.Zo=function(a){a.g=this.Yb();a.ga=this.S();a.Zb=this.S();a.Rc=V(this.a);a.tc=V(this.a);a.mg=V(this.a);a.lg=V(this.a);a.Dl=S(this.a);le(a)};this.ap=function(a){a.g=this.Yb();if(T(this.a)==2)a.Fb.Tg=
true;a.Fb.Aa=this.Gk();this.Gk();S(this.a);a.Fb.Ra=this.S();var b=V(this.a);a.Fb.Ba=b;if(b!=0)a.Fb.Eg=1/b};this.Yo=function(a){a.pc.g=this.Yb();a.g=a.pc.g;a.Ch=V(this.a);a.cg=V(this.a);var b=Uc(this.a,1);a.Vg=(b&2)!=0};this.Wo=function(a){a.g=this.Yb();a.Wc=this.hm();a.Rd=V(this.a);a.ah=V(this.a);a.Yl=T(this.a);a.On=S(this.a);a.Wl=T(this.a);a.nk=T(this.a);a.kg=V(this.a);a.Pf=S(this.a);T(this.a)};this.bp=function(a){a.g=this.Yb();a.jg=V(this.a);a.we=S(this.a);T(this.a);for(var b=T(this.a),c=0;c<b;++c)a.ub.push(this.S())};
this.dp=function(a){a.Ra=this.S();a.Tc=T(this.a);a.Cb=this.S();a.De=T(this.a);a.bh=T(this.a);a.dh=T(this.a);a.Jf=T(this.a);a.Vi=T(this.a);a.Yi=T(this.a);a.Wi=T(this.a);a.Kf=V(this.a);a.Lf=V(this.a);a.Hf=V(this.a);a.eh=V(this.a);var b=T(this.a);if(b&1){a.Pg=true;a.Af=T(this.a);a.Yj=T(this.a)}else a.Pg=false;if(b&2){a.Bf=true;a.Ki=T(this.a);a.kd=this.S()}else a.Bf=false;if(b&4){a.Uf=true;a.lj=V(this.a);a.mj=V(this.a)}else a.Uf=false};this.Uo=function(a){T(this.a);a.td=S(this.a);if(a.td){a.Fe=T(this.a);
a.Ge=T(this.a);a.Te=T(this.a);a.Se=T(this.a)}else{a.He=V(this.a);a.Ie=V(this.a);a.Ve=V(this.a);a.Ue=V(this.a)}a.bg=S(this.a);a.uc=T(this.a);a.Ua=this.Uc();a.Zd=this.Uc();a.Tf=S(this.a);a.xf=this.Uc();a.Mi=T(this.a);if(a.Mi==1)a.wc=T(this.a)};this.Vo=function(a){T(this.a);a.td=S(this.a);if(a.td){a.Fe=T(this.a);a.Ge=T(this.a);a.Te=T(this.a);a.Se=T(this.a)}else{a.He=V(this.a);a.Ie=V(this.a);a.Ve=V(this.a);a.Ue=V(this.a)}a.bg=S(this.a);a.uc=T(this.a);a.Ua=this.Uc();a.Zd=this.Uc();a.Tf=S(this.a);a.te=
S(this.a);a.fg=Uc(this.a,1);a.Za=this.P();a.Qc=this.P();a.We=T(this.a);a.Bg=S(this.a);a.yk=S(this.a);a.Li=T(this.a);a.nh=S(this.a);a.Sg=T(this.a);a.mh=S(this.a)};this.co=function(a,b){if(a){var c=null;switch(T(this.a)){case 100:b=new Ab;b.Me=this.S();c=b;break;case 101:b=new wb;b.V=this.S();b.O=this.S();b.Xc=T(this.a);b.Gb=S(this.a);xb(b);c=b;break;case 102:b=new pf;b.Gg=this.S();b.Ra=this.S();b.Ba=V(this.a);b.Dh=V(this.a);b.ab();c=b;break;case 103:b=new qf;b.Ba=this.S();V(this.a);b.oi=!p.M(V(this.a),
0);V(this.a);b.Ze=this.S();c=T(this.a);T(this.a);T(this.a);if(c&1)b.vj=true;b.vb=V(this.a);c=b;break;case 104:b=new Yd(a,this.N);b.If=V(this.a);b.Ib=V(this.a);b.Jb=V(this.a);b.Pd=V(this.a);b.Td=S(this.a);c=T(this.a);if(c&1){b.Ij=false;b.qg=true}else{b.Ij=true;b.qg=false}if(a){b.Bn=p.$h(a.Rc);b.pl=b.Bn+10;b.sp=(b.pl-b.en)/50}c=b;break;case 105:b=new rf(a,this.N);b.Ba=V(this.a);b.Jb=V(this.a);b.Td=S(this.a);c=T(this.a);if(c&2){b.sm=true;b.vb=V(this.a)}if(c&4){b.El=true;b.Sd=V(this.a);b.Qd=V(this.a);
b.Ph=V(this.a)}c=b;break;case 106:var d=new sf(b);d.Lh=T(this.a);d.Ui=S(this.a);d.sh=this.P();d.bj=S(this.a);d.ne=this.S();d.zf=Uc(this.a,1);d.Fg=this.P();c=T(this.a);if(c&1)d.Jh=T(this.a);if(d.zf==3||d.zf==4)d.n=this.fb(b);c=d;break;case 107:c=new Ub(b,this.N);c.re=S(this.a);c.jc=S(this.a);T(this.a);c.n=this.fb(b);c=c;break;case 108:c=new tf(b);c.Ng=T(this.a);c.fj=T(this.a);c.wh=V(this.a);c.$f=T(this.a);T(this.a);c.n=this.fb(b);c=c;break;case 109:b=new uf;b.Vc=T(this.a);b.Ye=T(this.a);b.gg=T(this.a);
b.Gb=S(this.a);c=T(this.a);b.Va=[];for(d=0;d<c;++d)b.Va.push(this.Uc());c=b;break;case 110:c=new vf(b,this.N);c.re=S(this.a);c.jc=S(this.a);T(this.a);c.Id=this.fb(b);c.Gd=this.fb(b);c=c;break;case 111:c=new wf(b);c.ig=T(this.a);T(this.a);c.n=this.fb(b);c=c;break;case 112:c=new xf(b,this.N);c.Ff=T(this.a);c.wc=T(this.a);c.xp=S(this.a);T(this.a);c.n=this.fb(b);c=c;break;case 113:d=new yf(b);d.Kc=T(this.a);d.od=V(this.a);d.yg=V(this.a);d.uf=S(this.a);d.Db=T(this.a);d.sj=this.P();d.Dg=this.P();d.th=V(this.a);
d.yh=T(this.a);d.pb=this.S();d.wd=this.P();d.Bd=this.P();d.Di=this.P();d.qi=this.P();if(d.Kc==3)d.rh=T(this.a);c=T(this.a);if(c&1)d.Of=T(this.a);else{d.Of=1E4;if(d.od!=0)d.Of=d.th/(d.od/1E3)}d.Lc=this.fb(b);d.Ed=this.fb(b);d.Hd=this.fb(b);d.Fd=this.fb(b);c=d;break;case 114:b=new zf;b.zh=T(this.a);b.pb=this.S();b.Ii=T(this.a);b.Nd=V(this.a);b.tj=V(this.a);c=T(this.a);b.jc=c&1?true:false;c=b;break;case 115:b=new Af(b,this.N);T(this.a);b.kj=V(this.a);b.Ib=V(this.a);b.Jb=V(this.a);b.Pd=V(this.a);b.pb=
this.S();b.wd=this.P();b.Bd=this.P();b.Oi=this.P();b.jj=this.P();c=T(this.a);if(c&1)b.Fi=true;if(c&2){b.Mh=true;b.li=V(this.a);b.yf=V(this.a)}if(c&4)b.Ck=true;c=b;break;case 116:c=new Bf(b);c.In=S(this.a);T(this.a);c.n=this.fb(b);c=c;break;case 117:c=new p.oe(b);c.Eb=this.P();T(this.a);this.cm(c.Xb,b);c=c;break;default:this.ya();return}c&&yb(a,c)}else this.ya()};this.cm=function(a,b){for(var c=T(this.a),d=0;d<c;++d){var e=new Cf;e.i=T(this.a);e.l=this.P();switch(e.i){case 1:e.Qb=V(this.a);break;case 2:e.Dc=
this.P();break;case 6:e.af=this.S();break;case 7:e.Hh=this.Uc();break;case 9:e.xg=this.fb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.Rb=T(this.a);break}a.push(e)}};this.fb=function(a){if(T(this.a)){var b=new jc(a);this.ao(b,a);return b}return null};this.ao=function(a,b){var c=this.hb();if(c!=29)this.ya();else for(var d=this.tb;R(this.a)>0&&this.a.Ja<d;){c=this.hb();if(c==30)(c=this.$n(T(this.a),b))&&kc(a,c);else this.ya()}};this.To=function(){for(var a=this.tb;R(this.a)>0&&this.a.Ja<a;)switch(this.hb()){case 13:var b=
T(this.a),c=this.P(),d=T(this.a);if(b&4)(b=Gc(this.$d,c))&&this.gp(b,d);else if(b&8){b=null;try{b=this.rn(d)}catch(e){ha(p.ma,"error reading script: "+e)}if(b!=null){d=X();Df(d,b)}}this.ya();break;default:this.ya()}};this.Xo=function(a){a.g=this.Yb();S(this.a);T(this.a);var b=T(this.a),c=T(this.a);a.rb=V(this.a);Uc(this.a,1);a.Hb=S(this.a);var d=T(this.a);if(d==0){a.Nc=250;a.Jd=true}else if(d&1){a.Nc=T(this.a);a.Jd=a.Nc>0}a.xn(this.bo(a));a.Oa=b;a.kb=c;if(d&2){b=T(this.a);for(c=0;c<b;++c){d=new p.mm;
d.aj=T(this.a);d.Df=T(this.a);a.qb.push(d)}}};this.bo=function(a){var b=this.Hk(),c=Gc(this.$d,b);if(c==null){c=new p.Rk;c.l=b;c!=null&&this.$d.mk.push(c);c=c}if(a!=null&&c!=null){if(c.bd==null)c.bd=[];c.bd.push(a)}return c};this.gp=function(a,b){if(a!=null){var c=T(this.a);a.Wj=V(this.a);if(c&1)a.Eh=this.Yb();c=this.tb;b=this.a.Ja+b;for(var d=[],e=0;R(this.a)>0&&this.a.Ja<c&&this.a.Ja<b;){var f=this.hb();if(f==33){f=new p.ko;f.l=this.P();f.$g=this.em();f.Rg=this.em();a.ra.push(f);e=T(this.a);d.push(f);
e>=0&&e<d.length&&d[e].U.push(f);e=T(this.a);for(var g=0;g<e;++g)f.Cg.push(T(this.a));g=T(this.a);for(e=0;e<g;++e){var i=new p.lo;i.frame=V(this.a);i.position=this.S();f.Je.push(i)}g=T(this.a);for(e=0;e<g;++e){i=new p.no;i.frame=V(this.a);i.scale=this.S();f.Xd.push(i)}g=T(this.a);for(e=0;e<g;++e){i=new p.mo;i.frame=V(this.a);i.rotation=this.ho();f.Ne.push(i)}g=T(this.a);for(e=0;e<g;++e){i=new p.oo;i.Qh=Vc(this.a,2);i.ii=T(this.a);i.fi=V(this.a);f.cf.push(i)}}else if(f==15){f=this.fm();f!=null&&a.ad(f)}else if(f==
34){f=new p.kh;f.l=this.P();f.dd=V(this.a);f.O=V(this.a);f.mc=V(this.a);a.qk.push(f)}else this.ya()}try{a.gk=-1;a.Vn=-1;b=c=0;var j,m;for(d=0;d<a.ra.length;++d){f=false;for(c=0;c<a.ra.length;++c){m=a.ra[c];for(e=0;e<m.U.length;++e)if(m.U[e]===a.ra[d])f=true}f||a.Le.push(a.ra[d])}for(c=0;c<a.cb.length;++c){d=[];a.wj.push(d);j=a.cb[c];var o=j.k.length;for(f=0;f<o;++f)d.push(false)}a.ld=false;d=o=0;var q,h;for(o=0;o<a.ra.length;++o){h=a.ra[o];if(h.Je.length||h.Xd.length||h.Ne.length||h.cf.length){a.ld=
true;break}}if(a.ld)for(o=a.Mc=0;o<a.ra.length;++o){h=a.ra[o];if(h.Je.length){var x=h.Je[h.Je.length-1];if(x.frame>a.Mc)a.Mc=x.frame}if(h.Xd.length){var t=h.Xd[h.Xd.length-1];if(t.frame>a.Mc)a.Mc=t.frame}if(h.Ne.length){var G=h.Ne[h.Ne.length-1];if(G.frame>a.Mc)a.Mc=G.frame}}if(a.ld&&!a.$l){a.$l=true;for(o=0;o<a.ra.length;++o){h=a.ra[o];for(d=0;d<h.cf.length;++d){var B=h.cf[d],u=B.ii;q=a.cb[B.Qh];var C=q.k[u];B.vm=C.f.e();B.um=C.m.e()}}}Hc(a,null,null);for(c=0;c<a.ra.length;++c){m=a.ra[c];for(b=0;b<
m.Cg.length;++b){j=a.cb[m.Cg[b]];j.be=m.ue.e()}}if(a.cb.length==0){a.ib.J.set(0,0,0);a.ib.L.set(0,0,0)}else{j=a.cb[0];a.ib.J=j.g.J.e();a.ib.L=j.g.L.e();for(c=1;c<a.cb.length;++c){j=a.cb[c];if(j.be==null){A(a.ib,j.g.J);A(a.ib,j.g.L)}else{var E=j.g.e();eb(j.be,E);A(a.ib,E.J);A(a.ib,E.L)}}}}catch(H){ha(p.ma,"error finalizing skinned mesh: "+H)}if(a.bd&&a.bd.length){for(e=0;e<a.bd.length;++e)(j=a.bd[e])&&Me(j,j.Oa,j.kb);a.bd=null}}};this.$n=function(a,b){var c=0;switch(a){case 0:c=new ub;c.Ni=T(this.a);
c.Pe=T(this.a);c.Y=S(this.a);T(this.a);return c;case 1:b=new vb;b.Ud=T(this.a);b.Ac=T(this.a);b.Y=S(this.a);b.da=this.S();if(b.Ud==4)b.pi=this.S();b.Ke=S(this.a);b.zc=T(this.a);c=T(this.a);if(c&1){b.yd=true;b.Ec=T(this.a)}return b;case 2:b=new zb;b.Nk=T(this.a);b.Wf=T(this.a);b.Y=S(this.a);b.da=this.S();b.ij=false;c=T(this.a);if(c&1){b.ij=true;b.Yk=T(this.a)}return b;case 3:c=new Bb;c.Pk=T(this.a);c.Xf=T(this.a);c.Y=S(this.a);c.da=this.S();T(this.a);return c;case 4:c=new Cb;c.Vc=T(this.a);c.Kb=T(this.a);
c.Y=S(this.a);c.hg=this.Uc();if(c.Vc==1)c.bk=T(this.a);T(this.a);return c;case 5:b=new dc;c=T(this.a);b.Ee=(c&1)!=0;b.Wc=this.hm();b.Rd=V(this.a);b.ah=V(this.a);b.kg=V(this.a);b.Pf=S(this.a);b.Bc=T(this.a);b.Qf=S(this.a);b.Dk=this.S();return b;case 6:c=new fc;c.tm=T(this.a);return c;case 7:c=new Db;T(this.a);c.ek=this.P();return c;case 8:c=new Eb;T(this.a);c.al=this.P();c.ga=this.P();return c;case 9:c=new Fb;c.Vf=T(this.a);c.Y=S(this.a);c.Gb=S(this.a);c.Pj=this.P();T(this.a);return c;case 10:c=new Hb(this.N);
c.Oe=this.P();T(this.a);return c;case 11:c=new Jb(this.N);c.tf=T(this.a);T(this.a);return c;case 12:b=new Lb;b.Ud=T(this.a);b.Ac=T(this.a);b.Y=S(this.a);b.da=this.S();b.Ke=S(this.a);b.zc=T(this.a);c=T(this.a);if(c&1){b.yd=true;b.Ec=T(this.a)}return b;case 13:a=new Ob;a.Bh=T(this.a);a.Ld=T(this.a);a.ui=V(this.a);a.Re=T(this.a);a.Fc=V(this.a);c=T(this.a);if(c&1){a.Qe=T(this.a);a.pj=S(this.a);a.zg=this.S()}if(c&2)a.wg=this.fb(b);if(c&4)a.oj=this.S();return a;case 14:this.ya();return null;case 15:c=new rb;
T(this.a);c.Kb=T(this.a);c.Y=S(this.a);c.Za=this.P();return c;case 16:c=new Wb;T(this.a);c.zb=this.P();c.Ak=T(this.a);c.$e=T(this.a);c.zd=this.P();return c;case 17:a=new bc;c=T(this.a);a.zb=this.P();a.wi=T(this.a);a.$e=T(this.a);a.zd=this.P();a.n=this.fb(b);if(c&1)a.Ih=this.fb(b);return a;case 18:c=new cc;c.Ah=T(this.a);c.Y=S(this.a);T(this.a);return c;case 19:c=new gc;T(this.a);c.zb=this.P();c.Si=S(this.a);return c;case 20:c=new mc(this.N);T(this.a);c.Oe=this.P();this.Ul=true;return c;case 22:c=
new pc;c.Yf=T(this.a);c.Rj=S(this.a);T(this.a);c.n=this.fb(b);return c;case 23:c=new nc;c.Zf=T(this.a);c.Xj=S(this.a);c.Uk=T(this.a);T(this.a);return c;case 24:c=new Ef;c.Eb=this.P();T(this.a);this.cm(c.Xb,b);return c;case 25:a=new sc(this.N);c=T(this.a);a.Ee=(c&1)!=0;a.vi=T(this.a);a.Zk=this.P();T(this.a);a.Bc=T(this.a);a.Qf=S(this.a);a.lk=T(this.a);a.ni=this.fb(b);a.mi=this.fb(b);return a;default:this.ya()}return null}};function $(){this.i=-1}n=$.prototype;n.j=l("none");n.eb=l(false);n.Cd=ba();n.of=ba();n.Yc=ba();n.je=ba();n.he=l(false);n.ie=l(false);n.reset=ba();n.ff=l(null);n.h=l(null);function Yd(a,b){this.i=-1;this.fc=0;this.Td=false;this.qg=true;this.Vh=this.de=this.le=this.ke=this.fe=this.ql=this.Ij=false;this.sl=this.Dd=0;this.en=20;this.pl=100;this.sp=(this.pl-this.en)/50;this.Bn=90;this.fc=r();this.oa=a;this.N=b;a&&Nb(this,a.ga)}Yd.prototype=new $;n=Yd.prototype;n.j=l("camerafps");n.If=88;n.Ib=0.06;n.Jb=200;n.Pd=0;n.Td=false;n.Xi=true;function Zd(a,b){a.Xi=b}function Nb(a,b){if(a.oa!=null){b=b.substract(a.oa.f);b=xa(b);a.Dd=b.c;a.sl=b.b;if(a.Dd>a.If)a.Dd-=360}}n=Yd.prototype;
n.eb=function(a){if(this.oa==null)return false;if(this.oa.K.ha!==this.oa)return false;var b=r(),c=b-this.fc;if(c>250)c=250;this.fc=b;var d=this.oa.f.e();if(this.Xi&&(this.le||this.de)){var e=this.oa.f.substract(this.oa.ga);if(this.Td)e.b=0;e.normalize();this.le&&d.va(w(e,this.Ib*-c));this.de&&d.va(w(e,this.Ib*c))}if(this.Xi&&(this.fe||this.ke)){e=wa(this.oa.f.substract(this.oa.ga),this.oa.Zb);e.normalize();if(this.fe){e=w(e,this.Ib*-c);d.va(e);Mb(this.oa,this.oa.ga.add(e))}if(this.ke){e=w(e,this.Ib*
c);d.va(e);Mb(this.oa,this.oa.ga.add(e))}}this.oa.f=d;d=new s(0,0,1);e=new F;ab(e,new s(this.Dd,this.sl,0));Ua(e,d);e=false;if(this.N!=null)e=this.N.Yh;var f=0,g=2.0E-5,i=2.0E-5,j=false;if(this.N!=null&&a.K!=null&&!e){j=a.K;j=j.Ha==null||j.Xg==null?null:mf(j,j.Ha,this.N.Sb,this.N.Tb,true);j=j!=null}if(this.qg){g*=3;i*=3}if(!j)if(e)f=this.N.Tb;else if(this.Ij){var m=this.N.Q.cc(),o=this.N.Tb;if(m>0&&o>0&&this.N.jh)f=Math.sin((o-m/2)/m)*100*0.5}else if(this.qg||this.ql)if(this.N.ih){f=this.N.Tb-this.N.hh;
if(f!=0)this.N.ik=b}f+=0;if(f>300)f=300;if(f<-300)f=-300;this.Dd+=f*c*this.Jb*i;if(this.Dd<-this.If)this.Dd=-this.If;if(this.Dd>this.If)this.Dd=this.If;f=0;if(!j)if(e)f=this.N.Sb;else if(this.Ij){b=this.N.Q.ec();i=this.N.Sb;if(b>0&&i>0&&this.N.jh)f=Math.sin((i-b/2)/b)*100*0.5}else if(this.qg||this.ql)if(this.N.ih){f=this.N.Sb-this.N.gh;if(f!=0)this.N.ik=b}f+=0;if(f>300)f=300;if(f<-300)f=-300;this.sl+=f*c*this.Jb*g;if(e||this.qg||this.ql)de(this.N);if(this.Xi&&this.Vh)(a=M(a,"collisionresponse"))&&
!a.Md&&Ff(a,this.Pd);Mb(this.oa,this.oa.f.add(d));return false};n.Cd=function(a){$.prototype.Cd.call(this,a)};n.of=ba();n.Yc=function(a){$.prototype.Yc.call(this,a)};n.je=function(a){$.prototype.je.call(this,a)};n.bi=function(a,b){if(b==37||b==65){if(this.fe=a)this.ke=false;return true}if(b==39||b==68){if(this.ke=a)this.fe=false;return true}if(b==38||b==87){if(this.le=a)this.de=false;return true}if(b==40||b==83){if(this.de=a)this.le=false;return true}if(b==32){this.Vh=a;return true}return false};
n.he=function(a){return this.bi(true,a.keyCode)};n.ie=function(a){return this.bi(false,a.keyCode)};function rf(a,b){this.i=-1;this.Jb=1E4;this.Ba=100;this.Td=false;this.fc=r();this.oa=a;this.N=b;this.sm=false;this.vd=this.ud=this.vb=0;this.El=false;this.Ph=this.Qd=this.Sd=0;this.rc=90;this.uk=-66666}rf.prototype=new $;n=rf.prototype;n.j=l("cameramodelviewer");n.Jb=0.06;n.Ba=100;n.Td=false;
n.eb=function(){if(this.oa==null)return false;if(this.oa.K.ha!==this.oa)return false;var a=r(),b=a-this.fc;if(b>250)b=250;this.fc=a;a=this.oa.f.e();var c=this.oa.ga.e(),d=c.substract(N(this.oa)),e=0,f=0;if(this.N.ih){e=(this.N.Sb-this.N.gh)*this.Jb/5E4;f=(this.N.Tb-this.N.hh)*this.Jb/5E4}if(this.sm&&this.vb!=0){if(p.na(e)){e=this.ud;this.ud*=0.9;if(this.ud>0)this.ud=Math.max(0,this.ud-b/this.vb);else if(this.ud<0)this.ud=Math.min(0,this.ud+b/this.vb)}else this.ud=e*(this.vb/1E3);if(p.na(f)){f=this.vd;
this.vd*=0.9;if(this.vd>0)this.vd=Math.max(0,this.vd-b/this.vb);else if(this.vd<0)this.vd=Math.min(0,this.vd+b/this.vb)}else this.vd=f*(this.vb/1E3)}d=wa(d,this.oa.Zb);d.b=0;d.normalize();if(!p.na(e)){y(d,b*e);a.va(d)}if(!this.Td&&!p.na(f)){e=this.oa.Zb.e();e.normalize();b=a.add(w(e,b*f));f=b.e();f.b=c.b;e=this.Ba/10;if(f.wb(c)>e)a=b}if(this.Td){if(p.M(this.uk,-66666))this.uk=a.b;a.b=this.uk}de(this.N);if(this.El){b=p.$h(this.oa.Rc);if(this.rc<this.Sd)this.rc=this.Sd;if(this.rc>this.Qd)this.rc=this.Qd;
f=this.Ph;f=Math.abs(this.rc-b)/8;if(f<this.Ph)f=this.Ph;if(b<this.Qd-f&&b<this.rc){b+=f;if(b>this.Qd)b=this.Qd}if(b>this.Sd+f&&b>this.rc){b-=f;if(b<this.Sd)b=this.Sd}me(this.oa,p.Rm(b))}d=a.substract(c);v(d,this.Ba);a=c.add(d);this.oa.f=a;return false};n.of=function(a){this.rc+=a*this.Ph;if(this.rc<this.Sd)this.rc=this.Sd;if(this.rc>this.Qd)this.rc=this.Qd};function sf(a){this.Lh=5E3;this.Ui=this.ck=this.zm=false;this.bj=true;this.Jh=0;this.kk=true;this.zf=Gf;this.rj=false;this.nd=a;this.Ia=0;this.zm=false;this.qd=this.Qi=null;this.rj=false;this.sh=null;this.Jh=0;this.Fg=this.ne=null;this.Sl=0;this.Im=false}sf.prototype=new $;var Gf=0;sf.prototype.j=l("followpath");
sf.prototype.h=function(a,b,c,d){a=new sf;a.Lh=this.Lh;a.Ui=this.Ui;a.bj=this.bj;a.sh=this.sh;a.Jh=this.Jh;a.ne=this.ne?this.ne.e():null;a.zf=this.zf;a.Fg=this.Fg;a.n=this.n?this.n.h(c,d):null;return a};
sf.prototype.eb=function(a,b){if(a==null||!this.nd||!this.Lh)return false;if(a!==this.Qi){if(this.Qi=a)this.ck=this.Qi.j()=="camera";return false}if(!this.qd)if(!this.zm)if(this.sh.length)if(this.nd){var c=ef(this.nd,this.sh);c&&c.j()=="path"&&Hf(this,c)}if(this.qd==null)return false;c=false;var d=null;if(this.ck&&this.bj){c=!this.kk;d=a;if(this.nd.ha!==d){if(this.qd.ub.length)d.f=ze(this.qd,0);this.kk=true;return false}else this.kk=false;if(!this.Ia||!c)this.Ia=b}if(!this.Ia)this.Ia=this.nd.Ia;d=
(b-this.Ia+this.Jh)/this.Lh;if(d>1&&!this.qd.we)switch(this.zf){case Gf:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.rj){if(this.nd)if(this.Fg.length)if((c=ef(this.nd,this.Fg))&&c.j()=="camera"){(b=this.nd.Xg)&&Vd(c,b.ec(),b.cc());this.nd.ha=c}this.rj=true}break;case 3:if(d>this.Sl+1&&this.n!=null){this.n.execute(a);this.Sl=d}d%=1;break;case 4:d=1;if(!this.Im&&this.n!=null){this.n.execute(a);this.Im=true}break}else this.rj=false;b=Be(this.qd,d);c=!b.M(a.f);a.f=b;if(this.Ui&&this.qd.ub.length){d=
Be(this.qd,d+0.0010);if(!p.na(d.wb(b))){var e=d.substract(b);v(e,100);if(this.ck){d=a;a=b.add(e);c=c||!a.M(d.ga);Mb(d,a)}else{if(!this.ne||pa(this.ne))d=xa(e);else{d=new F;ab(d,xa(e));b=new F;ab(b,this.ne);d=I(d,b);d=bb(d)}c=c||!d.M(a.T);a.T=d}}}return c};function Hf(a,b){a.qd=b}sf.prototype.ff=function(a){if(this.n)return lc(this.n,a);return null};function wb(a,b,c,d,e,f){this.V=new s(0,0,0);this.O=new s(40,40,40);this.Ia=r();this.Xc=3E3;this.xm=this.Ag=this.Kg=this.Gb=false;this.qm=null;this.pm=0;this.qf=this.Ci=false;this.Og=0;if(a)this.V=a.e();if(b)this.O=b.e();if(c)this.Xc=c;if(d)this.Gb=d;xb(this);if(e)this.Kg=e;if(f)this.Ag=f}wb.prototype=new $;wb.prototype.j=l("flystraight");
wb.prototype.h=function(a,b,c,d){a=new wb;a.V=this.V.e();a.O=this.O.e();a.da=this.da.e();a.$k=this.$k;a.Vk=this.Vk;a.Xc=this.Xc;a.Gb=this.Gb;a.Ag=this.Ag;a.Ci=this.Ci;a.qf=this.qf?this.qf.h(c,d):null;a.Og=this.Og;return a};
wb.prototype.eb=function(a,b){var c=b-this.Ia,d=false;if(c!=0){var e=this.V.e();if(!this.Gb&&c>=this.Xc){e=this.O.e();d=true}else e.va(w(this.da,c%this.Xc*this.Vk));if(this.Ag){if(a.j()=="camera"){Mb(a,e);var f=M(a,"camerafps");f!=null&&Nb(f,e)}}else a.f=e;if(this.xm&&this.Ia!=b){if(a){P(a);b=Z(a);e=false;f=Pb(a.K,"gameai");for(var g=0;g<f.length;++g)if(f[g]!==this.qm){var i=M(f[g],"gameai");if(!(i&&!(i.Db>0)))if(Ha(b,Z(f[g]))){Sb(i,this.pm,f[g]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.K)a.K.hk=
a.f.e();if(this.qf){d=true;if(this.Og>0&&c>this.Og)d=false;d&&this.qf.execute(a)}this.Kg&&je(a,this);this.Ci&&a.K&&oc(a.K,a,0)}return true}return false};function xb(a){a.da=a.O.substract(a.V);a.$k=a.da.getLength();a.da.normalize();a.Vk=a.$k/a.Xc};function pf(a,b,c,d){this.Gg=new s;this.Ra=new s(0,1,0);this.Nh=new s;this.ce=new s;this.Ia=r();this.Dh=0.01;this.Ba=100;if(a)this.Gg=a.e();if(b)this.Ba=b;if(c)this.Ra=c.e();if(d)this.Dh=d;this.ab()}pf.prototype=new $;pf.prototype.j=l("flycircle");pf.prototype.h=function(){var a=new pf;a.Gg=this.Gg.e();a.Ra=this.Ra.e();a.Nh=this.Nh.e();a.ce=this.ce.e();a.Dh=this.Dh;a.Ba=this.Ba;return a};
pf.prototype.eb=function(a,b){b=b-this.Ia;if(b!=0){b=b*this.Dh;b=w(this.Nh,Math.cos(b)).add(w(this.ce,Math.sin(b)));y(b,this.Ba);a.f=this.Gg.add(b);return true}return false};pf.prototype.ab=function(){this.Ra.normalize();this.ce=this.Ra.b!=0?new s(50,0,0):new s(0,50,0);this.ce=wa(this.ce,this.Ra);this.ce.normalize();this.Nh=wa(this.ce,this.Ra);this.Nh.normalize()};function Ab(a){this.Me=new s;if(a)this.Me=a.e();this.Ia=r();this.km=false;this.Mk=0;this.Gl=null}Ab.prototype=new $;Ab.prototype.j=l("rotation");Ab.prototype.h=function(){var a=new Ab(this.qa,this.Ma);a.Me=this.Me.e();a.Ia=this.Ia;return a};
Ab.prototype.eb=function(a,b){var c=b-this.Ia;if(this.km){if(this.Mk-this.Ia==0)return false;b=(b-this.Ia)/(this.Mk-this.Ia);if(b>1)je(a,this);else{c=new J;var d=w(this.Me,p.hd);jb(c,d.c,d.b,d.d);var e=new J;d=w(this.Gl,p.hd);jb(e,d.c,d.b,d.d);gb(e,e,c,b);d=new s;ib(e,d);y(d,p.Vd);a.T=d;return true}}else if(c!=0){a.T.va(w(this.Me,c/10));this.Ia=b;return true}return false};function uf(a,b,c){this.Va=[];this.Gb=true;this.Ye=20;this.pk=this.gg=this.Vc=0;if(a)this.Va=a;if(b)this.Ye=b;if(c==true)this.loop=false}uf.prototype=new $;uf.prototype.j=l("animatetexture");uf.prototype.h=function(){var a=new uf;a.Va=this.Va;a.Gb=this.Gb;a.Ye=this.Ye;a.Vc=this.Vc;a.gg=this.gg;return a};
uf.prototype.eb=function(a,b){if(a==null||this.Va==null)return false;var c=false,d=null;if(this.Va.length){var e=this.pk==0?a.K.Ia:this.pk;d=b-e;var f=e+this.Ye*this.Va.length;e=0;e=!this.Gb&&b>=f?this.Va.length-1:this.Ye>0?Math.floor(d/this.Ye%this.Va.length):0;if(e<this.Va.length)if(this.Vc==1){if(this.gg>=0&&this.gg<a.Ic())if((d=a.dc(this.gg))&&d.gb!==this.Va[e]){d.gb=this.Va[e];c=true}}else{b=a.Ic();for(f=0;f<b;++f)if((d=a.dc(f))&&d.gb!==this.Va[e]){d.gb=this.Va[e];c=true}}}return c};
uf.prototype.reset=function(){this.pk=r()};function Ub(a,b,c,d){this.Ma=b;this.vo=0;this.jo=false;this.yp=null;this.qa=a;this.Qg=c;this.Ae=false;this.re=true;this.jc=false;this.ae=this.ka=this.n=null;d!=true&&gf(a,this)}Ub.prototype=new $;n=Ub.prototype;n.j=l("onclick");n.h=function(a,b,c,d){a=new Ub(this.qa,this.Ma);a.re=this.re;a.jc=this.jc;a.n=this.n?this.n.h(c,d):null;a.ka=this.ka;return a};n.eb=function(a){this.ae=a;a=this.Ae;this.Ae=false;return a};
n.Yc=function(a){var b=this.ae;if(!b)return false;if(b.K!==this.qa)return false;if(r()-this.Ma.ik<250)return false;var c=be(this.Ma,a);a=ce(this.Ma,a);if(this.Ma.Yh){a=this.qa.Xg;if(!a)return false;c=a.ec()/2;a=a.cc()/2}if(this.ae.mb==null){this.ae=null;return false}if(ke(b)&&If(this,b,c,a)){this.Ae=true;this.Qg&&this.Qg();this.Hj(b);Pd(this.qa);return true}};n.Hj=function(a){this.n&&this.n.execute(a)};
function If(a,b,c,d){if(b==null)return false;if(b.j()=="2doverlay"){var e=He(b,false,a.Ma.Q);if(e.x<=c&&e.y<=d&&e.x+e.Qa>=c&&e.y+e.Na>=d)return true}c=ee(a.Ma,c,d);if(c==null)return false;d=a.qa.ha;if(d==null)return false;d=N(d);e=new Aa;e.V=d;e.O=c;return Vb(a,a.qa,b,e,a.re,a.jc,a.ka,null)}function Tb(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.ng(c,d,true,null,f))return c.wb(a);return 999999999999}
function Vb(a,b,c,d,e,f,g,i){var j=c.nb(),m=0;m=new F(false);if(Wa(c.aa,m))if(Ga(j,Ta(m,d.V),Ta(m,d.O))){m=null;if(c.Mo&&c.ca)m=c;e=m==null||e;if(!e){j=m.Ya;if(j==null){j=m.ca&&Fc(m.ca)>100?new jf(m.ca,m,0):new kf(m.ca,m);m.Ya=j}if(j){j=j.ng(d.V,d.O,true,null,true);if(j!=null)if(f){m=Tb(a,b,d.V,j,g,true);a=j.wb(d.V);if(m+p.so<a)return false;else{if(i!=null)i.Ga=j.wb(d.V);return true}}else{if(i!=null)i.Ga=d.V.wb(Da(Z(c)));return true}}else e=true}if(e)if(f){d=d.V.e();j=Z(c);m=Ea(j);y(m,0.5);f=p.Ro(m.c,
m.b,m.d);f=Math.sqrt(f*f+f*f);c=Da(Z(c));m=Tb(a,b,d,c,g,true);a=c.wb(d)-f;if(m<a)return false;else{if(i!=null)i.Ga=a;return true}}else{if(i!=null)i.Ga=d.V.wb(Da(Z(c)));return true}}return false}Ub.prototype.ff=function(a){if(this.n)return lc(this.n,a);return null};function vf(a,b){this.Ma=b;this.qa=a;this.Id=this.Gd=null;this.dl=this.Wk=0}vf.prototype=new Ub(null,null,null,true);vf.prototype.j=l("onmove");vf.prototype.h=function(a,b,c,d){a=new vf(this.qa,this.Ma);a.re=this.re;a.jc=this.jc;a.n=this.n?this.n.h(c,d):null;a.ka=this.ka;a.Gd=this.Gd?this.Gd.h(c,d):null;a.Id=this.Id?this.Id.h(c,d):null;return a};
vf.prototype.eb=function(a){var b=this.Wk==0,c=r();if(b||c-this.Wk>100){this.Wk=c;c=If(this,a,this.Ma.Sb,this.Ma.Tb);if(b)this.dl=c;else if(c!=this.dl){if((this.dl=c)&&this.Gd)this.Gd.execute(a);else!c&&this.Id&&this.Id.execute(a);return true}}return false};vf.prototype.ff=function(a){var b=null;if(this.Id)if(b=lc(this.Id,a))return b;if(this.Gd)if(b=lc(this.Gd,a))return b;return null};function tf(a,b,c,d,e){this.vo=0;this.Kj=a;this.$f=this.wh=this.fj=this.Ng=0;this.n=null;this.Qg=d;if(b)this.wh=b;if(c)this.$f=c;if(e)this.Ng=1;this.dk=false}tf.prototype=new $;n=tf.prototype;n.j=l("oncollide");n.h=function(a,b,c,d){a=new tf(this.Kj);a.Ng=this.Ng;a.fj=this.fj;a.wh=this.wh;a.$f=this.$f;a.n=this.n?this.n.h(c,d):null;return a};
n.eb=function(a){if(a==null||this.Kj==null)return false;var b=false,c=null;if(this.fj==0)c=this.Kj.ha;else if(this.$f!=-1)c=L(this.Kj,this.$f);if(c){if(a===c)return false;var d=N(c),e=N(a);d=d.wb(e)<this.wh;switch(this.Ng){case 0:if(d&&!this.dk){this.Hj(c,a);b=true}break;case 1:if(!d&&this.dk){this.Hj(c,a);b=true}break}this.dk=d}return b};n.Hj=function(a,b){this.Qg&&this.Qg.call(a,b);this.n&&this.n.execute(a)};n.ff=function(a){if(this.n)return lc(this.n,a);return null};function qf(a,b,c,d){this.Ba=a;this.oi=true;this.Ze=b;this.ka=c;this.vb=d;this.Am=false;this.ye=this.ta=null;this.ze=new s(0,0,0);this.Md=false;this.xe=this.Nl=0;this.vj=false;if(this.Ba==null)this.Ba=new s(30,50,30);if(this.Ze==null)this.Ze=new s(0,0,0);if(this.vb==null)this.vb=5.0E-4;this.reset()}qf.prototype=new $;n=qf.prototype;n.j=l("collisionresponse");n.h=function(){var a=new qf;a.Ba=this.Ba.e();a.oi=this.oi;a.Ze=this.Ze.e();a.ze=this.ze.e();a.vj=this.vj;a.ka=this.ka;return a};
n.reset=function(){this.ta=null;this.ye=r()};n.Zc=ca("ka");
n.eb=function(a,b){var c=b-this.ye;if(!this.ka)return false;if(c>150)c=150;this.ye=b;if(this.ta!==a){this.ta=a;this.ze=a.f.e()}var d=a.f.e(),e=a.f.substract(this.ze),f=new s(0,-0.1*a.K.kd,0);if(!this.oi)f.b=0;d=w(f,c);if(this.Md){f=(b-this.Nl)/1E3;if(f>5)f=5;y(d,f)}else y(d,0.0010);if(this.xe>0){e.b+=this.xe*0.0010*c;this.xe-=c;if(this.xe<0)this.xe=0}c=e.add(d);if(!pa(c)){if(!this.Am)this.vb=this.Ba.getLength()*1.0E-6;c=null;if(a&&a.j()=="camera")c=a;var g;if(c)g=c.ga.substract(c.f);f=new D;var i=
{};i.Ga=0;this.ka.ci(a);var j=this.ka,m=this.ze.substract(this.Ze),o=this.Ba,q=this.vb;if(!j||o.c==0||o.b==0||o.d==0)d=m;else{var h={};h.vh=m.e();h.Fk=e.e();h.bc=o.e();h.Wh=9.99999999E7;h.ip=j;h.jp=q;h.Mj=0;h.Sh=new s;j=va(h.vh,h.bc);e=va(h.Fk,h.bc);j=Jf(this,0,h,j,e);i.Ga=0;if(!pa(d)){h.vh=ua(j,h.bc);h.Fk=d.e();h.Mj=0;e=va(d,h.bc);j=Jf(this,0,h,j,e);i.Ga=h.Mj==0?1:0;if(i.Ga<0.5&&h.Th){d=Na(h.Th);d.normalize();if(!(Math.abs(d.b)>Math.abs(d.c)&&Math.abs(d.b)>Math.abs(d.d)))i.Ga=1}}if(h.Mj&&f!=null){f.R=
h.Th.R.e();f.Z=h.Th.Z.e();f.$=h.Th.$.e();ta(f.R,h.bc);ta(f.Z,h.bc);ta(f.$,h.bc)}ta(j,h.bc);d=j}this.ka.ci(null);d.va(this.Ze);if(i.Ga<0.5)this.Md=false;else{if(!this.Md)this.Nl=b;this.Md=true}if(a.f.M(d))return false;a.f=d.e();if(this.vj)if(!this.Md)if(!(pa(f.R)&&pa(f.Z)&&pa(f.$))){b=a.T.b;d=f.R.add(f.Z).add(f.$);y(d,1/3);f.R.c-=d.c;f.R.d-=d.d;f.Z.c-=d.c;f.Z.d-=d.d;f.$.c-=d.c;f.$.d-=d.d;ya(f.R,b);ya(f.Z,b);ya(f.$,b);f.R.c+=d.c;f.R.d+=d.d;f.Z.c+=d.c;f.Z.d+=d.d;f.$.c+=d.c;f.$.d+=d.d;b=Na(f);f=new s;
f.c=Math.atan2(b.d,b.b)*p.Vd;f.b=a.T.b;f.d=-Math.atan2(b.c,b.b)*p.Vd;a.T=f}if(c&&g){b=true;for(f=0;f<a.ia.length;++f)if((d=a.ia[f])&&d.j()=="cameramodelviewer"){b=false;break}if(b)c.ga=a.f.add(g)}}this.ze.M(a.f);this.ze=a.f.e();return false};
function Jf(a,b,c,d,e){var f=c.jp;if(b>5){a=e.e();v(a,f);return d.add(a)}c.Nj=e.e();c.hn=e.e();c.hn.normalize();c.xj=d.e();c.gl=false;c.Wh=9.99999999E7;var g=new z;c.vh.Ca(g.J);c.vh.Ca(g.L);A(g,c.vh.add(c.Fk));ma(g.J,c.bc);g.L.va(c.bc);var i=[],j=new F,m=1/c.bc.b,o=1/c.bc.d;j.o=1/c.bc.c;j.p=m;j.q=o;j.Ka=false;c.ip.pg(g,j,i);for(g=0;g<i.length;++g)a:{j=i[g];var q=La(j);if(Ka(q,c.hn)){var h=m=0,x=false,t=0;m=q.wb(c.xj);o=q.m.ea(c.Nj);if(p.na(o))if(Math.abs(m)>=1)break a;else{x=true;h=0}else{o=1/o;h=
(-1-m)*o;m=(1-m)*o;if(h>m){o=m;m=h;h=o}if(h>1||m<0)break a;h=p.ac(h,0,1);p.ac(m,0,1)}m=new s;o=false;var G=1;if(!x){q=c.xj.substract(q.m).add(w(c.Nj,h));t=j.Z.substract(j.R);var B=j.$.substract(j.R);x=t.ea(t);var u=t.ea(B),C=B.ea(B),E=q.substract(j.R);t=E.ea(t);E=E.ea(B);B=t*C-E*u;t=E*x-t*u;if(B+t-(x*C-u*u)<0&&!(B<0||t<0)){o=true;G=h;m=q.e()}}if(!o){h=c.Nj.e();q=c.xj.e();x=ra(h);var H=B=t=0;u={};u.Ga=0;t=x;B=2*h.ea(q.substract(j.R));H=ra(j.R.substract(q))-1;if(Kf(a,t,B,H,G,u)){G=u.Ga;o=true;m=j.R.e()}if(!o){B=
2*h.ea(q.substract(j.Z));H=ra(j.Z.substract(q))-1;if(Kf(a,t,B,H,G,u)){G=u.Ga;o=true;m=j.Z.e()}}if(!o){B=2*h.ea(q.substract(j.$));H=ra(j.$.substract(q))-1;if(Kf(a,t,B,H,G,u)){G=u.Ga;o=true;m=j.$.e()}}C=j.Z.substract(j.R);H=j.R.substract(q);E=ra(C);var U=C.ea(h),aa=C.ea(H);t=E*-x+U*U;B=E*2*h.ea(H)-2*U*aa;H=E*(1-ra(H))+aa*aa;if(Kf(a,t,B,H,G,u)){t=(U*u.Ga-aa)/E;if(t>=0&&t<=1){G=u.Ga;o=true;m=j.R.add(w(C,t))}}C=j.$.substract(j.Z);H=j.Z.substract(q);E=ra(C);U=C.ea(h);aa=C.ea(H);t=E*-x+U*U;B=E*2*h.ea(H)-
2*U*aa;H=E*(1-ra(H))+aa*aa;if(Kf(a,t,B,H,G,u)){t=(U*u.Ga-aa)/E;if(t>=0&&t<=1){G=u.Ga;o=true;m=j.Z.add(w(C,t))}}C=j.R.substract(j.$);H=j.$.substract(q);E=ra(C);U=C.ea(h);aa=C.ea(H);t=E*-x+U*U;B=E*2*h.ea(H)-2*U*aa;H=E*(1-ra(H))+aa*aa;if(Kf(a,t,B,H,G,u)){t=(U*u.Ga-aa)/E;if(t>=0&&t<=1){G=u.Ga;o=true;m=j.$.add(w(C,t))}}}if(o){o=G*c.Nj.getLength();if(!c.gl||o<c.Wh){c.Wh=o;c.Sh=m.e();c.gl=true;c.Th=j;++c.Mj}}}}if(!c.gl)return d.add(e);i=d.add(e);d=d.e();if(c.Wh>=f){e=e.e();v(e,c.Wh-f);d=c.xj.add(e);e.normalize();
ma(c.Sh,w(e,f))}e=c.Sh.e();g=d.substract(c.Sh);g.normalize();j=new Ia;j.m=g.e();j.bb=-e.ea(j.m);e=i.substract(w(g,j.wb(i))).substract(c.Sh);if(e.getLength()<f)return d;return Jf(a,b+1,c,d,e)}function Kf(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.Ga=a;return true}if(b>0&&b<e){f.Ga=b;return true}return false}function Ff(a,b){if(a.xe==0)a.xe=b*100};function wf(a){this.Kh=0;this.qa=a;this.n=null;this.ig=0;this.Kh=r()}wf.prototype=new $;wf.prototype.j=l("timer");wf.prototype.h=function(a,b,c,d){a=new wf(this.qa);a.n=this.n?this.n.h(c,d):null;a.Kh=this.Kh;a.ig=this.ig;return a};wf.prototype.eb=function(a){if(a==null)return false;if(this.ig>0){var b=r();if(b-this.Kh>this.ig){this.Kh=b;this.n&&this.n.execute(a);return true}}return false};
function xf(a,b){this.qa=a;this.xa=b;this.n=null;this.ig=0;this.pd=null;this.Ae=false;this!=null&&b.Rf.push(this);this!=null&&b.hj.push(this);gf(a,this)}xf.prototype=new $;n=xf.prototype;n.j=l("keypress");n.h=function(a,b,c,d){a=new xf(this.qa,this.xa);a.Ff=this.Ff;a.wc=this.wc;a.n=this.n?this.n.h(c,d):null;return a};n.eb=function(a){this.pd=a;a=this.Ae;this.Ae=false;return a};n.he=function(a){if(this.Ff==0&&a.keyCode==this.wc){Lf(this);return true}return false};
n.ie=function(a){if(this.Ff==1&&a.keyCode==this.wc){Lf(this);return true}return false};n.Yc=function(a){if(this.Ff==1)if(a.button>1&&this.wc==2)Lf(this);else a.button<=1&&this.wc==1&&Lf(this)};n.Cd=function(a){if(this.Ff==0)if(a.button>1&&this.wc==2)Lf(this);else a.button<=1&&this.wc==1&&Lf(this)};n.ff=function(a){if(this.n)return lc(this.n,a);return null};
function Lf(a){if(a.pd&&a.pd.K===a.qa&&ke(a.pd)&&Cd(a.xa)===a.pd.K){if(a.pd.mb==null&&a.pd.i!=-1){a.pd=null;return}a.Ae=true;a.n&&a.n.execute(a.pd);Pd(a.qa);return true}return null}
function yf(a){this.yg=this.od=this.Kc=0;this.uf=false;this.Db=100;this.Of=3E3;this.rh=-1;this.Dg=this.sj="";this.th=100;this.yh=0;this.pb=new s;this.qi=this.Di=this.Bd=this.wd="";this.Fd=this.Hd=this.Ed=this.Lc=null;this.jk=this.tk=this.vc=0;this.wf=null;this.ti=this.se=this.gd=this.Hg=0;this.Qn=null;this.Tj=this.Cl=this.Qj=false;this.Uj=new Aa;this.$i=0;this.ae=this.ka=null;this.Xe=a;this.Tl=0;this.Tk=new s;this.rk=null;this.sk=0}yf.prototype=new $;yf.prototype.j=l("gameai");
yf.prototype.h=function(a,b,c,d){a=new yf(this.Xe);a.Kc=this.Kc;a.od=this.od;a.yg=this.yg;a.uf=this.uf;a.Db=this.Db;a.sj=this.sj;a.Dg=this.Dg;a.th=this.th;a.yh=this.yh;a.rh=this.rh;a.Of=this.Of;a.pb=this.pb?this.pb.e():null;a.wd=this.wd;a.Bd=this.Bd;a.Di=this.Di;a.qi=this.qi;a.Lc=this.Lc?this.Lc.h(c,d):null;a.Ed=this.Ed?this.Ed.h(c,d):null;a.Hd=this.Hd?this.Hd.h(c,d):null;a.Fd=this.Fd?this.Fd.h(c,d):null;return a};
yf.prototype.eb=function(a,b){if(a==null||this.Xe==null)return false;var c=b-this.Tl;if(c>150)c=150;this.Tl=b;var d=0,e=false;if(this.ae!==a){this.ae=a;P(a);this.Tk=N(a)}var f=N(a);if(this.vc!=3)if(this.vc==1){d=Mf(this,a);if(this.wf.substract(f).getLength()<d){this.vc=0;this.Lb(a,0);e=true}else{e=false;if(this.gd>2){d=this.gd*(this.od/1E3);if(this.ti.substract(f).getLength()*1.2<d){this.vc=0;this.Lb(a,0);e=true}}if(!e){this.gd+=c;e=this.wf.substract(f);v(e,this.od/1E3*c);if(!this.uf)e.b=0;a.f.va(e)}e=
Nf(this,a,b-this.Hg,this.wf.substract(f),this.yh)}}else if(this.vc==2){this.gd+=c;if(!this.Qj&&this.gd>this.se/2){this.Tj=true;this.Lc&&this.Lc.execute(a);this.Tj=false;e=this.Qj=true}if(this.gd>this.se)this.vc=0;else e=Nf(this,a,b-this.Hg,this.wf.substract(f),Math.min(this.yh,this.se))}else if(this.vc==0)if(this.Kc==1||this.Kc==2||this.Kc==3){if(this.yg<=0||!this.ae||this.Dg.length==0||!this.Xe)c=null;else if(!this.tk||b>this.tk){this.sk=this.yg;this.rk=null;Of(this,this.Xe.Ha,f,this.Dg);this.tk=
b+500+Math.random()*1E3;c=this.rk}else c=null;if(c!=null){e=1E3;if(this.Lc)if(d=lc(this.Lc,"Shoot"))e=d.Fc;d=e;!this.Cl&&this.Ed&&this.Ed.execute(a);e=this.Cl=true;if(N(c).wb(f)<d)if(!c||!a?false:Pf(this,Da(Z(c)),Da(Z(a)))){this.Uj.V=Da(Z(a));this.Uj.O=Da(Z(c));Qf(this,a,c,N(c),f,b)}else Rf(this,a,N(c),f,b);else Rf(this,a,N(c),f,b)}else if(this.Kc==2||this.Kc==3)if(!this.jk||b>this.jk+this.Of){d=Mf(this,a);c=null;if(this.Kc==3){var g=null;if(this.rh!=-1&&this.Xe!=null)g=L(this.Xe,this.rh);if(g!=null&&
g.j()=="path"){if(this.$i>=g.ub.length)this.$i=0;c=ze(g,this.$i)}++this.$i}else{c=this.th;this.jk=b;c=new s((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.va(this.Tk);if(!this.uf)c.b=this.Tk.b}if(!(c.substract(f).getLength()<d)){Rf(this,a,c,f,b);e=true}}}return e};
function Nf(a,b,c,d,e){if(!b)return false;if(b.j()=="camera")return false;if(!a.uf)d.b=0;var f=new F;ab(f,xa(d));d=new F;ab(d,a.pb);f=I(f,d);a=bb(f);f=b.T.e();c=Math.min(c,e)/e;c=p.ac(c,0,1);y(a,p.hd);y(f,p.hd);e=new J;jb(e,a.c,a.b,a.d);d=new J;jb(d,f.c,f.b,f.d);gb(d,d,e,c);ib(d,a);y(a,p.Vd);if(b.T.M(a))return false;b.T=a;return true}function Rf(a,b,c,d,e){a.vc=1;a.wf=c;a.Hg=e;a.ti=d;a.gd=0;a.se=0;a.Lb(b,1)}
function Qf(a,b,c,d,e,f){a.vc=2;a.wf=d;a.Hg=f;a.Qn=c;a.ti=e;a.gd=0;a.se=500;a.Qj=false;b=a.Lb(b,2);if(b!=0)a.se=b}function Pf(a,b,c){if(!a.ka||!a.Xe)return true;if(a.ka.ng(b,c,true,null,true)!=null)return false;return true}function Of(a,b,c,d){if(b&&b.X){var e=false,f=c.wb(N(b));if(f<a.sk){var g=M(b,"gameai");if(g&&d!=""&&g!==a&&g.Db>0)e=g.sj.indexOf(d)!=-1}if(e){a.sk=f;a.rk=b}for(e=0;e<b.U.length;++e)Of(a,b.U[e],c,d)}}function Mf(a,b){if(b!=null)return 10;a=Ea(Z(b));a.b=0;return a.getLength()}
yf.prototype.jl=function(a){switch(a){case 0:return this.wd;case 1:return this.Bd;case 2:return this.qi;case 3:return this.Di}return""};yf.prototype.Lb=function(a,b){if(!a||a.j()!="animatedmesh")return 0;var c=a.Da;if(!c)return 0;if(c=Lc(c,this.jl(b))){Me(a,c.dd,c.O);c.mc!=0&&Ne(a,c.mc);a.Hb=b==1||b==0;return(c.O-c.dd)*c.mc*1E3}else{Me(a,1,1);a.Hb=false}return 0};
function Sb(a,b,c){if(c)if(a.Db!=0){a.Db-=b;if(a.Db<0)a.Db=0;if(a.Db==0){a.Fd!=null&&a.Fd.execute(c);b=N(c);a.vc=3;a.Hg=0;a.ti=b;a.gd=0;a.se=500;a.Lb(c,3)}else a.Hd!=null&&a.Hd.execute(c)}}yf.prototype.ff=function(a){var b=null;if(this.Lc)if(b=lc(this.Lc,a))return b;if(this.Ed)if(b=lc(this.Ed,a))return b;if(this.Hd)if(b=lc(this.Hd,a))return b;if(this.Fd)if(b=lc(this.Fd,a))return b;return null};p.Ln=[];function Xb(){this.Dc=this.l="";this.Qb=this.Rb=this.Mb=0}
function sb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=p.Ln,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=Sf(a,c);if(f==null)c=null;else{c=new Xb;c.vl(a);$b(c,0);d=f.ge;if(f.Gc=="health"&&d!=null){d=M(d,"gameai");d!=null&&$b(c,d.Db)}else if(f.Gc=="movementspeed"&&d!=null){f=M(d,"gameai");g=M(d,"keyboardcontrolled");if(d=M(d,"camerafps"))Zb(c,d.Ib);else if(g)Zb(c,g.Ib);else f&&Zb(c,f.od)}else if(f.Gc=="damage"&&d!=null)(d=he(d,"Shoot"))&&$b(c,d.Ld);
else if(f.Gc=="colsmalldistance"&&d!=null){d=M(d,"collisionresponse");d!=null&&Zb(c,d.vb)}else f.Gc=="soundvolume"&&Zb(c,p.hf.Od*100);c=c}if(c)return c;if(b==true){b=new Xb;b.vl(a);e.push(b);return b}return null}
function ac(a,b){var c=Sf(a.l,b);if(c!=null){b=c.ge;if(c.Gc=="health"&&b!=null){c=M(b,"gameai");if(c!=null){var d=c.Db;a=Tf(a);d=d-a;if(d>0)Sb(c,d,b);else c.Db=a}}else if(c.Gc=="movementspeed"&&b!=null){c=M(b,"gameai");d=M(b,"keyboardcontrolled");if(b=M(b,"camerafps"))b.Ib=Q(a);else if(d)d.Ib=Q(a);else if(c)c.od=Q(a)}else if(c.Gc=="damage"&&b!=null){if(b=he(b,"Shoot"))b.Ld=Tf(a)}else if(c.Gc=="damage"&&b!=null){if(b=he(b,"Shoot"))b.Ld=Tf(a)}else if(c.Gc=="colsmalldistance"&&b!=null){b=M(b,"collisionresponse");
if(b!=null){b.vb=Tf(a);b.Am=true}}else c.Gc=="soundvolume"&&td(p.hf,Q(a)/100)}}function Sf(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=ef(b,c);if(a==null)return null}b={};b.ge=a;b.Gc=d;return b}Xb.prototype.getName=k("l");Xb.prototype.vl=ca("l");
function tb(a){switch(a.Mb){case 1:return String(a.Rb);case 2:return a.Qb%1==0?String(a.Qb):a.Qb.toFixed(6)}return a.Dc}function Tf(a){switch(a.Mb){case 0:return Math.floor(a.Dc);case 1:return a.Rb;case 2:return a.Qb}return 0}function Q(a){switch(a.Mb){case 0:return Number(a.Dc);case 1:return a.Rb;case 2:return a.Qb}return 0}function Yb(a,b){a.Mb=0;a.Dc=b}function $b(a,b){a.Mb=1;a.Rb=b}function Zb(a,b){a.Mb=2;a.Qb=b}
function Af(a,b){this.fc=0;this.qa=a;this.Pd=this.Jb=this.kj=this.Ib=0;this.Mh=this.Ck=false;this.yf=this.li=0;this.Nd=15;this.pb=new s;this.jj=this.Oi=this.Bd=this.wd="";this.Ql=this.ye=r();this.Vh=this.de=this.le=this.ke=this.fe=this.jo=this.Qk=this.Em=false;this.gc=0;this.Oj=false;this.yj=true;this.Fi=false;this.xa=b;this!=null&&b.Rf.push(this);this!=null&&b.hj.push(this)}Af.prototype=new $;n=Af.prototype;n.j=l("keyboardcontrolled");
n.h=function(){var a=new Af(this.qa,this.xa);a.Ib=this.Ib;a.kj=this.kj;a.Jb=this.Jb;a.Pd=this.Pd;a.Nd=this.Nd;a.pb=this.pb?this.pb.e():null;a.wd=this.wd;a.Bd=this.Bd;a.Oi=this.Oi;a.jj=this.jj;a.Mh=this.Mh;a.li=this.li;a.yf=this.yf;a.Fi=this.Fi;return a};
n.bi=function(a,b){if(b==37||b==65){if(this.fe=a)this.ke=false;return true}if(b==39||b==68){if(this.ke=a)this.fe=false;return true}if(b==38||b==87){if(this.le=a)this.de=false;return true}if(b==40||b==83){if(this.de=a)this.le=false;return true}if(b==32){this.Vh=a;return true}return false};n.he=function(a){this.Qk=a.shiftKey==1;return this.bi(true,a.keyCode)};n.ie=function(a){this.Qk=a.shiftKey==1;return this.bi(false,a.keyCode)};
n.eb=function(a,b){var c=b-this.fc;if(c>250)c=250;this.fc=b;var d=false;this.ye=b;if(this.Fi){var e=a.K.ha;if(e!=null){e=M(e,"3rdpersoncamera");if(e!=null){if(e.Ub!==a)return false}else return false}}e=a.T;if(this.fe){e.b-=c*this.Jb*0.0010;d=true}if(this.ke){e.b+=c*this.Jb*0.0010;d=true}var f=new F;ab(f,e);e=new s(0,0,1);var g=new F;ab(g,this.pb);f=I(f,g);Ra(f,e);f=this.Qk;var i=(f?this.kj:this.Ib)*c,j=0;g=this.de;var m=this.le;if(this.Mh&&c)if(m||g){if(this.Oj!=m)if(this.yf==0)this.gc*=-1;else this.gc=
0;this.Oj=!g;j=i/c;this.gc+=this.li*j*(c/1E3);if(this.gc>j)this.gc=j;i=this.gc*c}else if(this.yf==0)this.gc=0;else{j=i/Number(c);this.gc-=this.yf*j*(c/1E3);if(this.gc<0)this.gc=0;i=this.gc*c}v(e,i);if(m||g||this.Mh&&this.gc!=0){d=e.e();if(g||!(m||g)&&!this.Oj)y(d,-1);a.f.va(d);this.Em=d=true}if(m||g){this.Lb(a,f?3:1,g);d=this.Em=true}else{c=false;if(e=M(a,"collisionresponse"))c=e.Md;if(!c&&(this.Lb(a,1,false,true)||this.Lb(a,3,false,true)||this.Lb(a,2,false,true)))this.Lb(a,0,false)}if(this.Vh)if((c=
M(a,"collisionresponse"))&&!c.Md){e=0;if(this.qa&&this.qa.kd!=0)e=Math.floor(this.Pd*(1/this.qa.kd)*2E3);if(!this.Ck||this.Ck&&b-this.Ql>e){Ff(c,this.Pd);this.Lb(a,2,false);this.Ql=b;d=true}}return d};n.jl=function(a){switch(a){case 0:return this.wd;case 1:return this.Bd;case 2:return this.Oi;case 3:return this.jj}return""};
n.Lb=function(a,b,c,d){if(!a||a.j()!="animatedmesh")return false;var e=a.Da;if(!e)return false;if(e=Lc(e,this.jl(b))){var f=1*e.mc;if(c)f*=-1;if(d)return a.kb==e.O&&a.Oa==e.dd;if(!(a.kb==e.O&&a.Oa==e.dd&&p.M(a.rb,f))){Me(a,e.dd,e.O);f&&Ne(a,f);a.Hb=b==0||b==1||b==3}return false}else if(!d){Me(a,1,1);a.Hb=false}return false};
function zf(a){this.fc=0;this.qa=a;this.zh=-1;this.Nd=15;this.pb=new s;this.tj=this.Ii=0;this.jc=false;this.ye=this.ka=0;this.ve=new s;this.Mg=new s;this.Ub=null;this.ym=false;this.yj=true}zf.prototype=new $;zf.prototype.j=l("3rdpersoncamera");zf.prototype.h=function(){var a=new zf(this.qa);a.zh=this.zh;a.Nd=this.Nd;a.pb=this.pb.e();a.Ii=this.Ii;a.tj=this.tj;a.jc=this.jc;a.ka=this.ka;return a};
zf.prototype.eb=function(a,b){var c=b-this.fc;if(c>250)c=250;this.fc=b;var d=false;if(a==null)return false;d=a.K;if(!this.ym)if(this.zh!=-1)if(d!=null){if((d=L(d,this.zh))&&d!==this.Ub){this.Ub=d;this.yj=true}this.ym=true}if(!this.Ub)return false;d=false;var e=a.ga.e();a.ga=N(this.Ub);a.ga.va(this.Mg);a.ga.b+=this.tj;a.ga.M(e)||(d=true);if(this.yj){P(this.Ub);P(a);this.Mg=Ea(this.Ub.nb());this.Mg.b/=2;this.Mg.c=0;this.Mg.d=0;this.fc=b;this.yj=false}if(a.K.ha!==a)return false;if(pa(this.ve)){this.ve=
N(this.Ub).substract(N(a));b=new F;ab(b,this.Ub.T);e=this.ve;var f=e.e();e.c=f.c*b.o+f.b*b.r+f.d*b.s;e.b=f.c*b.t+f.b*b.p+f.d*b.u;e.d=f.c*b.v+f.b*b.w+f.d*b.q}b=this.Ub.T;e=new F;ab(e,b);b=new F;ab(b,this.pb);e=I(e,b);b=a.f.e();switch(this.Ii){case 0:break;case 2:b=N(this.Ub).substract(this.ve);break;case 1:b=this.ve.e();Ra(e,b);b=N(this.Ub).substract(b);e=N(a).wb(b);f=this.ve.getLength();f=e>f*2.2;if(p.M(this.Nd,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.Nd;if(c>e)c=e;b=b.substract(a.f);v(b,c);b.va(a.f);
b=b}break}if(this.jc&&this.ka!=null&&!a.f.M(b)){this.ka.ci(this.Ub);c=new Aa;c.V=a.ga.e();c.O=b.e();var g=Ba(c);e=g.getLength();f=this.ve.getLength()/10;v(g,f);c.O.va(g);g=new D;g=this.ka.ng(c.V,c.O,true,g,true);if(g!=null){b=g.substract(c.V);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;v(b,g);b=c.V.add(b)}this.ka.ci(null)}if(!a.f.M(b)){d=true;a.f=b}return d};function Bf(a){this.In=this.lm=false;this.qa=a;this.n=null}Bf.prototype=new $;Bf.prototype.j=l("onfirstframe");
Bf.prototype.eb=function(a){if(this.lm)return false;this.lm=true;if(this.n){this.n.execute(a);return true}return false};function Ke(a,b,c){this.qa=b;this.pa=c;this.Ma=a;this.Mf=false;gf(b,this);this.fk=[];for(a=0;a<255;++a)this.fk.push(false);this.vf=[];this.vf.push(new Ca(-1,0));this.vf.push(new Ca(0,-1));this.vf.push(new Ca(1,0));this.vf.push(new Ca(0,1))}Ke.prototype=new $;Ke.prototype.j=l("mobileinput");
Ke.prototype.eb=function(){var a=false;if(this.pa.Mi==1)Uf(this,this.Mf&&this.pa.Zi,this.pa.wc);else if(Math.sqrt(this.pa.Ob*this.pa.Ob+this.pa.Pb*this.pa.Pb)<0.3||!this.Mf){if(!this.Mf){a=this.pa.Ob!=0&&this.pa.Pb!=0;this.pa.Ob=0;this.pa.Pb=0}Uf(this,false,37);Uf(this,false,38);Uf(this,false,39);Uf(this,false,40)}else for(var b=0;b<4;++b){var c=this.vf[b].c-this.pa.Ob,d=this.vf[b].b-this.pa.Pb;c=Math.sqrt(c*c+d*d)<1;Uf(this,c,37+b)}return a};
function Uf(a,b,c){if(a.fk[c]!=b){a.fk[c]=b;var d={};d.keyCode=c;b?Ed(a.Ma,d):Fd(a.Ma,d)}}Ke.prototype.Yc=function(){this.Mf=false};Ke.prototype.Cd=function(){this.Mf=true};Ke.prototype.je=function(a){if(this.Mf&&this.pa.Zi&&this.pa.Kk!=0&&this.pa.Jk!=0){var b=be(this.Ma,a)-this.pa.im;a=ce(this.Ma,a)-this.pa.jm;this.pa.Ob=b/this.pa.Kk;this.pa.Pb=a/this.pa.Jk;this.pa.Ob=p.ac(this.pa.Ob,0,1);this.pa.Pb=p.ac(this.pa.Pb,0,1);this.pa.Ob=this.pa.Ob*2-1;this.pa.Pb=this.pa.Pb*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}n=vector3d.prototype;n.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};n.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};n.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};n.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
n.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};n.x=0;n.y=0;n.z=0;function Vf(){this.fn=-1;this.dg=[];this.Ug=false;this.xa=this.Q=this.$a=this.Ai=this.lc=null;this.ef=[];this.Pm=[];this.Pl=0;this.nm=false;this.Bk=null;this.om={};this.Ll=0}p.Pa=null;function X(){if(p.Pa==null)p.Pa=new Vf;return p.Pa}function Bd(a,b){a.xa=b}function Rd(a){return a.ef.length!=0}function Df(a,b){try{eval(b)}catch(c){ia(p.ma,c)}}function Wf(a){++a.fn;return a.fn}
function Td(a,b){a.Ug=true;if(a.ef.length!=null){a.Q=b;for(b=0;b<a.ef.length;++b)a.ef[b]();a.Q=null}a.Ug=false}
function Xf(a,b,c){switch(c){case "Position Mode":return b.td;case "Pos X (percent)":return b.He*100;case "Pos Y (percent)":return b.Ie*100;case "Width (percent)":return b.Te;case "Height (percent)":return b.Se;case "Pos X (pixels)":return b.Fe;case "Pos Y (pixels)":return b.Ge;case "Width (pixels)":return b.Ve*100;case "Height (pixels)":return b.Ue*100;case "Alpha":return p.kf(b.uc);case "Image":return b.Ua?b.Ua.l:null;case "Background Color":return b.uc;case "Draw Text":return b.te;case "TextColor":return b.We;
case "Text":return b.Za}return null}p.oe=function(a){this.Eb=null;this.Xb=[];this.cl=this.Hm=false;this.sd=-1;this.Jm=false;this.qa=a};p.oe.prototype=new $;function Yf(a,b,c){a.Hm=b;a.cl=c;if(!a.Jm&&a.qa){b=X().xa;if(c){a!=null&&b.Rf.push(a);a!=null&&b.hj.push(a)}gf(a.qa,a)}}p.oe.prototype.j=l("extensionscript");p.oe.prototype.h=function(a,b,c,d){a=new p.oe(b);a.Eb=this.Eb;for(b=0;b<this.Xb.length;++b){var e=this.Xb[b];e!=null?a.Xb.push(e.h(c,d)):a.Xb.push(null)}return a};
p.oe.prototype.eb=function(a,b){if(a==null)return false;if(this.Eb==null||this.Eb.length==0)return false;var c=X();c.Ai=this;this.sd==-1&&Zf(this,a,c);if(this.sd!=-1)try{_ccbScriptCache[this.sd].onAnimate(a,b)}catch(d){ia(p.ma,this.Eb+": "+d)}c.Ai=null;return true};
function Zf(a,b,c){var d="";a.sd=Wf(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.sd;d+="] = new ";d+=a.Eb;d+="();";Df(c,d);var e="_ccbScriptCache[";e+=a.sd;e+="].";d="try {";d+=$f(e,a.Xb);d+="} catch(e) { }";Df(c,d);d=false;if(b.j()=="camera")d=true;a.Jm=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";Df(c,d)}
function ag(a,b,c){a.Hm&&_ccbScriptCache[a.sd].onMouseEvent(b,c)}n=p.oe.prototype;n.Yc=function(){ag(this,2,0)};n.of=function(a){ag(this,1,a)};n.Cd=function(){ag(this,3,0)};n.je=function(){ag(this,0,0)};n.he=function(a){this.cl&&_ccbScriptCache[this.sd].onKeyEvent(a.keyCode,true)};n.ie=function(a){this.cl&&_ccbScriptCache[this.sd].onKeyEvent(a.keyCode,false)};function Cf(){this.i=-1;this.af=this.Dc=this.l=null;this.Rb=this.Qb=0;this.Hh=this.xg=null}
Cf.prototype.h=function(a,b){var c=new Cf;c.i=this.i;c.l=this.l;c.Dc=this.Dc;c.af=this.af?this.af.e():null;c.Qb=this.Qb;c.Rb=this.Rb;if(this.xg)c.xg=this.xg.h(a,b);c.Hh=this.Hh;return c};
function $f(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.l;c+=" = ";switch(e.i){case 1:c+=e.Qb;c+="; ";break;case 2:c+='"';var f=e.Dc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.Rb?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.af.c;c+=", ";c+=e.af.b;c+=", ";c+=e.af.d;c+="); ";break;case 7:c+='"';c+=e.Hh?e.Hh.l:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.Rb;c+="); ";break;case 9:a:{f=X();e=e.xg;for(var g=0;g<f.dg.length;++g)if(f.dg[g]===
e){f=g;break a}f.dg.push(e);f=f.dg.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.Rb;c+="; ";break}}}return c}function Ef(){this.i="ExtensionScript";this.Xb=[];this.Eb=null}Ef.prototype.h=function(a,b){var c=new Ef;c.Eb=this.Eb;for(var d=0;d<this.Xb.length;++d){var e=this.Xb[d];e!=null?c.Xb.push(e.h(a,b)):c.Xb.push(null)}return c};
Ef.prototype.execute=function(a){if(!(this.Eb==null||this.Eb.length==0||a==null)){var b=X(),c="";c="_ccbScriptTmp = new ";c+=this.Eb;c+="();";Df(b,c);c="try { ";c+=$f("_ccbScriptTmp.",this.Xb);c+="} catch(e) { }";Df(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Ea;c+=")); } catch(e) { }";Df(b,c)}};function bg(a){var b=p.Pa.lc;if(b==null)return null;return L(b,a)}
function cg(a){var b=p.Pa.lc;if(a==null)return null;var c=a.Ea,d=qc(b);c=a.h(a.mb,c,d);if(c!=null){c.Ea=d;b.ai(a,c)}if((a=a.Ya)&&b)if(a=a.h(c)){c.Ya=a;b.fd&&rc(b.fd,a)}return c}function dg(){var a=p.Pa.lc;if(a==null)return null;return a.ha}function eg(a){var b=p.Pa.lc;b!=null&&a!=null&&a.j()=="camera"&&bf(b,a)}function fg(a,b){if(a==null)return-1;if(b<0||b>=a.U.length)return null;return a.U[b]}function gg(){var a=p.Pa.lc;if(a==null)return null;return a.Ha}
function hg(a){if(a==null)return 0;return a.U.length}function ig(a){var b=p.Pa.lc;if(b==null)return null;return ef(b,a)}function jg(a){var b=p.Pa.lc;b!=null&&oc(b,a,0)}function kg(a){if(a==null)return 0;return a.Ic()}
function lg(a,b,c){if(a==null)return null;if(b<0||b>=a.Ic())return null;a=a.dc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.gb==null?"":a.gb.l;else if(c=="Texture2")return a.sc==null?"":a.sc.l;else if(c=="Lighting")return a.Sc;
else if(c=="Backfaceculling")return a.Kn;return null}function mg(){}
function ng(a,b,c,d){if(a!=null)if(!(b<0||b>=a.Ic())){a=a.dc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=X();if(c=="Type")if(b)switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else{c=parseInt(d);if(c!=NaN)a.i=c}else if(c=="Texture1"){if(b!=null&&e.$a!=null){e=Oc(e.$a,b);
if(e!=null)a.gb=e}}else if(c=="Texture2"){if(b!=null&&e.$a!=null){e=Oc(e.$a,b);if(e!=null)a.sc=e}}else if(c=="Lighting")a.Sc=d;else if(c=="Backfaceculling")a.Kn=d}}}
function og(a,b,c,d,e){if(a!=null){var f=0,g=0,i=0;if(d==null&&c!=null&&typeof c.x!="undefined"){f=c.x;g=c.y;i=c.z}if(d!=null&&e!=null){f=c;g=d;i=e}var j=e=null,m=null;d=null;var o=a.j();if(o=="camera")e=a;else if(o=="animatedmesh")j=a;else if(o=="light")m=a;else if(o=="2doverlay")d=a;if(b=="Visible")a.X=c;else if(b=="Position"){a.f.c=f;a.f.b=g;a.f.d=i}else if(b=="Rotation"){a.T.c=f;a.T.b=g;a.T.d=i}else if(b=="Scale"){a.la.c=f;a.la.b=g;a.la.d=i}else if(d!=null){a=X();f=d;switch(b){case "Position Mode":f.td=
c=="absolute (pixels)";break;case "Pos X (percent)":f.He=c/100;break;case "Pos Y (percent)":f.Ie=c/100;break;case "Width (percent)":f.Te=c;break;case "Height (percent)":f.Se=c;break;case "Pos X (pixels)":f.Fe=c;break;case "Pos Y (pixels)":f.Ge=c;break;case "Width (pixels)":f.Ve=c/100;break;case "Height (pixels)":f.Ue=c/100;break;case "Alpha":f.uc=(c&255)<<24|f.uc&16777215;break;case "Image":b=Oc(a.$a,c);f.Ua=b;break;case "Background Color":f.uc=c;break;case "Draw Text":f.te=c?true:false;break;case "TextColor":f.We=
c;break;case "Text":f.Za=c;break}}else if(b=="Target")e!=null&&Mb(e,new s(f,g,i));else if(b=="UpVector"){if(e!=null)e.Zb=new s(f,g,i)}else if(b=="FieldOfView_Degrees")e!=null&&me(e,p.Rm(c));else if(b=="AspectRatio")e!=null&&Xd(e,c);else if(b=="Animation")j!=null&&Gb(j,c,j.Hb);else if(b=="Looping")j!=null&&Oe(j,c);else if(b=="FramesPerSecond")j!=null&&Ne(j,c*0.0010);else if(b=="AnimationBlending"){if(j!=null)j.Jd=c}else if(b=="BlendTimeMs"){if(j!=null)j.Nc=c}else if(b=="Radius"){if(m!=null)m.Fb.Ba=
c}else if(b=="Name")a.l=c}}
function pg(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.j();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.X;else if(b=="Position")return new vector3d(a.f.c,a.f.b,a.f.d);else if(b=="Rotation")return new vector3d(a.T.c,a.T.b,a.T.d);else if(b=="Scale")return new vector3d(a.la.c,a.la.b,a.la.d);else if(f!=null)return Xf(X(),f,b);else if(b=="Target")return new vector3d(c.ga.c,c.ga.b,c.ga.d);else if(b=="UpVector"){if(c!=
null)return new vector3d(c.Zb.c,c.Zb.b,c.Zb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return p.$h(c.Rc)}else if(b=="AspectRatio"){if(c!=null)return c.tc}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Hb}else if(b=="FramesPerSecond"){if(d!=null)return d.rb*1E3}else if(b=="AnimationBlending"){if(d!=null)return d.Jd}else if(b=="BlendTimeMs"){if(d!=null)return d.Nc}else if(b=="Radius"){if(e!=null)return e.Fb.Ba}else if(b=="Name")return a.l;return null}
function qg(a,b,c,d){if(a!=null){a.f.c=b;a.f.b=c;a.f.d=d;for(b=0;b<a.ia.length;++b){c=a.ia[b];c!=null&&c.j()=="collisionresponse"&&c.reset()}}}function rg(a){X().ef.push(a)}function sg(a){var b=X();a=b.ef.indexOf(a);a!=-1&&b.ef.splice(a,1)}function tg(a,b,c,d,e){var f=X();!f.Ug||f.Q==null||dd(f.Q,b,c,d-b,e-c,a,true)}function ug(a,b,c,d,e){a=X();!a.Ug||a.Q==null||dd(a.Q,b,c,d-b,e-c,4278190080,true)}function vg(a,b,c,d,e){a=X();!a.Ug||a.Q==null||dd(a.Q,b,c,d-b,e-c,4278190080,true)}
function wg(a,b){var c=X().xa;a=ee(c,a,b);if(a!=null)return new vector3d(a.c,a.b,a.d);return null}function xg(a,b,c){var d=X().xa;a=fe(d,new s(a,b,c));return new vector3d(a.c,a.b,0)}function yg(a,b,c,d,e,f){var g=new Aa;g.V=new s(a,b,c);g.O=new s(d,e,f);a=p.Pa.lc;a=Tb(Ub.prototype,a,g.V,g.O,a.fd,true);if(a<999999999){b=Ba(g);v(b,a);g=g.V.add(b);return new vector3d(g.c,g.b,g.d)}return null}
function zg(a,b,c,d,e,f,g){if(a==null)return false;if(a.aa==null)return false;b=new s(b,c,d);e=new s(e,f,g);return Ga(Z(a),b,e)}function Ag(){window.close()}function Bg(){}function Cg(a){var b=X();a=Nc(b.$a,a,true);if(a!=null)return a.l;return null}function Dg(){var a=X().xa;if(a)return a.Sb;return 0}function Eg(){var a=X().xa;if(a)return a.Tb;return 0}function Fg(){var a=X().xa;if(a!=null&&a.Q)return a.Q.ec();return 0}function Gg(){var a=X().xa;if(a!=null&&a.Q)return a.Q.cc();return 0}
function Hg(){}function Ig(){}function Jg(a){var b=X().xa;if(b!=null)return Ib(b,a,true);return false}function Kg(a){var b=p.hf;a=od(b,a);a!=null&&ec(b,a,false,1)}function Lg(a){a=sb(a,true,p.Pa.lc);if(a==null)return null;if(a.Mb==0)return tb(a);if(a.Mb==1)return Tf(a);if(a.Mb==2)return Q(a);return null}function Mg(a,b){var c=p.Pa.lc;a=sb(a,true,c);if(a!=null){typeof b=="number"?Zb(a,b):Yb(a,b);ac(a,c)}}function Ng(a,b){var c=X().xa;c&&ge(c,a,b)}function Og(){return null}function Pg(){}
function Qg(){return"webgl"}function Rg(a,b){var c=p.Pa.lc;if(c!=null){if(b==null)b=c.Ha;if(a>=0&&a<p.Pa.dg.length){a=p.Pa.dg[a];a!=null&&a.execute(b)}}}function Sg(a){ia(p.ma,a)}function Tg(){}function Ug(a,b){p.Pa.Ai!=null&&Yf(p.Pa.Ai,a,b)}function Vg(a,b){++p.Pa.Pl;var c=p.Pa.Pl;a=new ja(a);var d=p.Pa.Pm,e={};e.Po=a;e.id=c;d.push(e);a.load(function(f){b&&b(f);for(f=0;f<d.length;++f)if(d[f].id==c){d.splice(f,1);break}});return c}
function Wg(a){for(var b=p.Pa.Pm,c=0;c<b.length;++c)if(b[c].id==a){b[c].Po.abort();b.splice(c,1);break}}function Xg(a,b,c,d){var e=X(),f=e.xa.Q;if(f==null)return-1;c=f.db[c];a=ld(f,a,b,c.Mm,c.Nm,c.Lm);if(a!=-1){if(d!=null)e.om["_"+a]=d;if(!e.nm){e.nm=true;e.Bk=f.lh;f.lh=function(g){e.Bk&&e.Bk();var i=e.om["_"+g];if(i!=null){e.Ll=g;i()}}}}return a}
function Yg(a,b,c,d,e,f){var g=X(),i=g.xa.Q;if(i!=null){a=i.fa;var j=null;try{j=i.db[g.Ll]}catch(m){}b=a.getUniformLocation(j,b);a.uniform4f(b,c,d,e,f)}}function Zg(a,b,c){if(a){var d=M(a,"gameai");if(d)if(b=="cancel"){d.vc=0;d.Lb(a,0)}else if(b=="moveto"){b=new s(0,0,0);if(c!=null&&typeof c.x!="undefined"){b.c=c.x;b.b=c.y;b.d=c.z}Rf(d,a,b,N(a),r())}else b=="attack"&&Qf(d,a,c,N(c),N(a),r())}};function wd(){this.Ig=-1;this.Jn="";this.qc=[];this.wo=2;this.Bm=false;this.vp=320;this.up=200;this.Gm=function(a){this.qc.push(a)};this.og=function(){if(this.Ig<0||this.Ig>=this.qc.length)return null;return this.qc[this.Ig]};this.wn=function(a){for(var b=0;b<this.qc.length;++b)if(this.qc[b]===a){this.Ig=b;return}}};p.Ao=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
p.Bo=function(a){var b,c,d,e,f,g=p.Ao;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function $g(){}n=$g.prototype;n.jf=ba();n.pg=function(a,b,c){this.jf(b,c)};
n.ng=function(a,b,c,d,e){if(!a||!b)return null;if(this.ta!=null&&e&&this.ta.X==false)return null;var f=new z;f.J=a.e();f.L=a.e();A(f,b);e=[];this.pg(f,null,e);f=b.substract(a);f.normalize();for(var g,i=9.999999999E8,j=ra(b.substract(a)),m=Math.min(a.c,b.c),o=Math.max(a.c,b.c),q=Math.min(a.b,b.b),h=Math.max(a.b,b.b),x=Math.min(a.d,b.d),t=Math.max(a.d,b.d),G=null,B=0;B<e.length;++B){var u=e[B];if(!(c&&!Ka(La(u),f)))if(!(m>u.R.c&&m>u.Z.c&&m>u.$.c))if(!(o<u.R.c&&o<u.Z.c&&o<u.$.c))if(!(q>u.R.b&&q>u.Z.b&&
q>u.$.b))if(!(h<u.R.b&&h<u.Z.b&&h<u.$.b))if(!(x>u.R.d&&x>u.Z.d&&x>u.$.d))if(!(t<u.R.d&&t<u.Z.d&&t<u.$.d))if(!(qa(a,u.R)>=i&&qa(a,u.Z)>=i&&qa(a,u.$)>=i))if(g=u.kl(a,f)){var C=qa(g,a),E=qa(g,b);if(C<j&&E<j&&C<i){i=C;d&&u.Ca(d);G=g}}}if(G)return G.e();return null};n.zj=l(null);n.ci=ba();n.h=l(null);
function kf(a,b,c){if(a){this.ta=b;this.A=[];if(a!=null)for(b=0;b<a.Fa.length;++b){var d=a.Fa[b];if(d)if(!(c!=null&&d.ja&&d.ja.i==c))for(var e=d.ba.length,f=0;f<e;f+=3)this.A.push(new D(d.k[d.ba[f]].f,d.k[d.ba[f+1]].f,d.k[d.ba[f+2]].f))}}}kf.prototype=new $g;
kf.prototype.jf=function(a,b){if(this.ta.aa){a=a?I(a,this.ta.aa):this.ta.aa;var c;if(Oa(a))for(c=0;c<this.A.length;++c)b.push(this.A[c]);else if(Pa(a))for(c=0;c<this.A.length;++c)b.push(new D(Va(a,this.A[c].R),Va(a,this.A[c].Z),Va(a,this.A[c].$)));else for(c=0;c<this.A.length;++c)b.push(new D(Ta(a,this.A[c].R),Ta(a,this.A[c].Z),Ta(a,this.A[c].$)))}};kf.prototype.pg=function(a,b,c){this.jf(b,c)};kf.prototype.zj=k("ta");kf.prototype.h=function(a){var b=new kf(null,a);b.ta=a;b.A=this.A;return b};
function lf(a,b){if(b){this.ta=b;this.A=[];if(a!=null){a=Fa(a);this.A.push(new D(a[3],a[0],a[2]));this.A.push(new D(a[3],a[1],a[0]));this.A.push(new D(a[3],a[2],a[7]));this.A.push(new D(a[7],a[2],a[6]));this.A.push(new D(a[7],a[6],a[4]));this.A.push(new D(a[5],a[7],a[4]));this.A.push(new D(a[5],a[4],a[0]));this.A.push(new D(a[5],a[0],a[1]));this.A.push(new D(a[1],a[3],a[7]));this.A.push(new D(a[1],a[7],a[5]));this.A.push(new D(a[0],a[6],a[2]));this.A.push(new D(a[0],a[4],a[6]))}}}lf.prototype=new kf;
lf.prototype.h=function(a){var b=new lf(null,a);b.ta=a;b.A=this.A;return b};function hf(){this.Cc=[];this.vk=null}hf.prototype=new $g;hf.prototype.jf=function(a,b){for(var c=this.vk,d=0;d<this.Cc.length;++d){var e=this.Cc[d];c!=null&&c==e.zj()||e.jf(a,b)}};hf.prototype.pg=function(a,b,c){for(var d=this.vk,e=0;e<this.Cc.length;++e){var f=this.Cc[e];d!=null&&d==f.zj()||f.pg(a,b,c)}};function rc(a,b){a.Cc.push(b)}
function Qd(a,b){for(var c=0;c<a.Cc.length;)if(a.Cc[c]===b){a.Cc.splice(c,1);return}else++c}hf.prototype.clear=function(){this.Cc=[]};hf.prototype.ng=function(a,b,c,d,e){var f=9.999999999E8,g=null,i=null;if(d)i=new D;for(var j=0;j<this.Cc.length;++j){var m=this.Cc[j].ng(a,b,c,i,e);if(m!=null){var o=qa(m,a);if(o<f){g=m.e();f=o;d&&i.Ca(d)}}}return g};hf.prototype.ci=ca("vk");p.Ok=function(){this.A=[];this.g=new z;this.Oc=[]};
function jf(a,b,c,d){this.Nn=this.Mn=0;this.Xl=c==null?64:c;if(a){this.ta=b;this.Wd=new p.Ok;this.A=[];for(b=0;b<a.Fa.length;++b)if(c=a.Fa[b])if(!(d!=null&&c.ja&&c.ja.i==d))for(var e=c.ba.length,f=0;f<e;f+=3){var g=new D(c.k[c.ba[f]].f,c.k[c.ba[f+1]].f,c.k[c.ba[f+2]].f);this.Wd.A.push(g);this.A.push(g)}ah(this,this.Wd)}}jf.prototype=new $g;
function ah(a,b){++a.Mn;b.g.J=b.A[0].R.e();b.g.L=b.g.J.e();for(var c,d=b.A.length,e=0;e<d;++e){c=b.A[e];A(b.g,c.R);A(b.g,c.Z);A(b.g,c.$)}if(!b.g.J.M(b.g.L)&&d>a.Xl){d=Da(b.g);for(var f=Fa(b.g),g=new z,i=0;i<8;++i){var j=[];g.J=d.e();g.L=d.e();A(g,f[i]);b.Oc.push(new p.Ok);for(e=0;e<b.A.length;++e){c=b.A[e];g.Uh(c.R)&&g.Uh(c.Z)&&g.Uh(c.$)?b.Oc[i].A.push(c):j.push(c)}b.A=j;if(b.Oc[i].A.length==0)b.Oc[i]=null;else ah(a,b.Oc[i])}}a.Nn+=b.A.length}
jf.prototype.jf=function(a,b){kf.prototype.jf.call(this,a,b)};jf.prototype.pg=function(a,b,c){if(this.ta.aa){var d=new F;a=a.e();if(this.ta){d=this.ta.aa.e();Xa(d);eb(d,a)}var e=d;e.o=1;e.r=0;e.s=0;e.B=0;e.t=0;e.p=1;e.u=0;e.C=0;e.v=0;e.w=0;e.q=1;e.D=0;e.F=0;e.G=0;e.H=0;e.I=1;e.Ka=true;if(b)d=b.e();if(this.ta)d=I(d,this.ta.aa);this.Wd&&bh(this,this.Wd,c,a,d)}};
function bh(a,b,c,d,e){if(Ha(b.g,d)){var f=b.A.length,g;if(Oa(e))for(g=0;g<f;++g)c.push(b.A[g]);else if(Pa(e))for(g=0;g<f;++g)c.push(new D(Va(e,b.A[g].R),Va(e,b.A[g].Z),Va(e,b.A[g].$)));else for(g=0;g<f;++g)c.push(new D(Ta(e,b.A[g].R),Ta(e,b.A[g].Z),Ta(e,b.A[g].$)));for(g=0;g<b.Oc.length;++g){f=b.Oc[g];f!=null&&bh(a,f,c,d,e)}}}jf.prototype.zj=k("ta");function ch(a,b){var c=new p.Ok;c.A=b.A;c.g=b.g.e();for(var d=0;d<b.Oc.length;++d){var e=b.Oc[d],f=null;if(e)f=ch(a,e);c.Oc.push(f)}return c}
jf.prototype.h=function(a){var b=new jf(null,a,this.Xl);b.ta=a;b.A=this.A;b.Wd=null;if(this.Wd)b.Wd=ch(this,this.Wd);return b};window.startCopperLichtFromFile=function(a,b,c,d){a=new vd(a,true,null,false,c,d);a.load(b);return a};window.CL3D=p;window.ccbGetSceneNodeFromId=bg;window.ccbCloneSceneNode=cg;window.ccbGetActiveCamera=dg;window.ccbSetActiveCamera=eg;window.ccbGetChildSceneNode=fg;window.ccbGetRootSceneNode=gg;window.ccbGetSceneNodeChildCount=hg;window.ccbGetSceneNodeFromName=ig;window.ccbRemoveSceneNode=jg;window.ccbGetSceneNodeMaterialCount=kg;window.ccbGetSceneNodeMaterialProperty=lg;
window.ccbSetSceneNodeMaterialProperty=ng;window.ccbSetSceneNodeProperty=og;window.ccbGetSceneNodeProperty=pg;window.ccbSetSceneNodePositionWithoutCollision=qg;window.ccbRegisterOnFrameEvent=rg;window.ccbDrawColoredRectangle=tg;window.ccbDrawTextureRectangle=ug;window.ccbDrawTextureRectangleWithAlpha=vg;window.ccbGet3DPosFrom2DPos=wg;window.ccbGet2DPosFrom3DPos=xg;window.ccbGetCollisionPointOfWorldWithLine=yg;window.ccbEndProgram=Ag;window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=zg;
window.ccbLoadTexture=Cg;window.ccbGetMousePosX=Dg;window.ccbGetMousePosY=Eg;window.ccbGetScreenWidth=Fg;window.ccbGetScreenHeight=Gg;window.ccbSetCloseOnEscapePressed=Hg;window.ccbSetCursorVisible=Ig;window.ccbSwitchToScene=Jg;window.ccbPlaySound=Kg;window.ccbGetCopperCubeVariable=Lg;window.ccbSetCopperCubeVariable=Mg;window.ccbReadFileContent=Og;window.ccbWriteFileContent=Pg;window.ccbGetPlatform=Qg;window.ccbInvokeAction=Rg;window.ccbCleanMemory=mg;window.print=Sg;window.system=Tg;
window.ccbRegisterBehaviorEventReceiver=Ug;window.ccbUnregisterOnFrameEvent=sg;window.ccbSwitchToFullscreen=Ng;window.ccbDoHTTPRequest=Vg;window.ccbCancelHTTPRequest=Wg;window.ccbCreateMaterial=Xg;window.ccbSetShaderConstant=Yg;window.ccbSetPhysicsVelocity=Bg;window.ccbAICommand=Zg;
